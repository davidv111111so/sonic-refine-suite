[{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\AccountSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1277,1280],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1277,1280],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n  AlertDialogTrigger,\r\n} from '@/components/ui/alert-dialog';\r\nimport { toast } from 'sonner';\r\nimport { Trash2, AlertTriangle } from 'lucide-react';\r\n\r\nexport function AccountSettings() {\r\n  const [loading, setLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const handleDeleteAccount = async () => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      \r\n      if (!user) {\r\n        throw new Error('No user found');\r\n      }\r\n\r\n      // Call edge function to delete all user data\r\n      const { error: deleteError } = await supabase.functions.invoke('delete-account');\r\n      \r\n      if (deleteError) throw deleteError;\r\n\r\n      toast.success('Account and all data deleted successfully.');\r\n      navigate('/auth');\r\n\r\n    } catch (error: any) {\r\n      toast.error(error.message || 'Error deleting account');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card className=\"bg-slate-900 border-slate-700\">\r\n      <CardHeader>\r\n        <CardTitle className=\"text-2xl font-bold text-white\">Account Settings</CardTitle>\r\n      </CardHeader>\r\n      <CardContent className=\"space-y-6\">\r\n        <div className=\"border-2 border-red-500/50 rounded-lg p-6 bg-red-950/20\">\r\n          <div className=\"flex items-center gap-3 mb-4\">\r\n            <AlertTriangle className=\"h-6 w-6 text-red-500\" />\r\n            <h3 className=\"text-lg font-semibold text-red-400\">Danger Zone</h3>\r\n          </div>\r\n          \r\n          <p className=\"text-sm text-slate-300 mb-4\">\r\n            Once you delete your account, there is no going back. This action cannot be undone.\r\n          </p>\r\n          \r\n          <AlertDialog>\r\n            <AlertDialogTrigger asChild>\r\n              <Button variant=\"destructive\" className=\"w-full sm:w-auto\">\r\n                <Trash2 className=\"h-4 w-4 mr-2\" />\r\n                Delete Account\r\n              </Button>\r\n            </AlertDialogTrigger>\r\n            <AlertDialogContent className=\"bg-slate-900 border-slate-700 text-white\">\r\n              <AlertDialogHeader>\r\n                <AlertDialogTitle className=\"text-red-400\">\r\n                  Are you absolutely sure?\r\n                </AlertDialogTitle>\r\n                <AlertDialogDescription className=\"text-slate-300\">\r\n                  This action cannot be undone. This will permanently delete your account\r\n                  and remove your data from our servers.\r\n                </AlertDialogDescription>\r\n              </AlertDialogHeader>\r\n              <AlertDialogFooter>\r\n                <AlertDialogCancel className=\"bg-slate-800 border-slate-700 text-white hover:bg-slate-700\">\r\n                  Cancel\r\n                </AlertDialogCancel>\r\n                <AlertDialogAction\r\n                  onClick={handleDeleteAccount}\r\n                  disabled={loading}\r\n                  className=\"bg-red-600 hover:bg-red-700 text-white\"\r\n                >\r\n                  {loading ? 'Deleting...' : 'Yes, Delete My Account'}\r\n                </AlertDialogAction>\r\n              </AlertDialogFooter>\r\n            </AlertDialogContent>\r\n          </AlertDialog>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\AdvancedAudioPlayer.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'connectAudioGraph' and 'eqBands'. Either include them or remove the dependency array.","line":118,"column":6,"nodeType":"ArrayExpression","endLine":118,"endColumn":57,"suggestions":[{"desc":"Update the dependencies array to be: [audioFile, audioContext, createMediaElementSource, connectAudioGraph, eqBands]","fix":{"range":[4146,4197],"text":"[audioFile, audioContext, createMediaElementSource, connectAudioGraph, eqBands]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Advanced Audio Player with Real-time Enhancement\r\n * Features: EQ, compression, stereo widening, visualization\r\n * All processing happens in the browser using Web Audio API\r\n */\r\n\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Slider } from '@/components/ui/slider';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { \r\n  Play, Pause, Square, Volume2, VolumeX, \r\n  Music, Sliders, TrendingUp, Activity \r\n} from 'lucide-react';\r\nimport { AudioFile } from '@/types/audio';\r\nimport { useAudioContext } from '@/hooks/useAudioContext';\r\n\r\ninterface AdvancedAudioPlayerProps {\r\n  audioFile: AudioFile | null;\r\n  eqBands?: number[];\r\n  onEQChange?: (bandIndex: number, value: number) => void;\r\n}\r\n\r\nconst EQ_FREQUENCIES = [60, 250, 1000, 4000, 12000]; // 5-band EQ\r\n\r\nexport const AdvancedAudioPlayer: React.FC<AdvancedAudioPlayerProps> = ({\r\n  audioFile,\r\n  eqBands = [0, 0, 0, 0, 0],\r\n  onEQChange\r\n}) => {\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [duration, setDuration] = useState(0);\r\n  const [volume, setVolume] = useState(0.8);\r\n  const [isMuted, setIsMuted] = useState(false);\r\n  \r\n  // Enhancement controls\r\n  const [eqEnabled, setEqEnabled] = useState(true);\r\n  const [compressionEnabled, setCompressionEnabled] = useState(false);\r\n  const [compressionThreshold, setCompressionThreshold] = useState(-24);\r\n  \r\n  // Refs for Web Audio API nodes\r\n  const audioElementRef = useRef<HTMLAudioElement>(null);\r\n  const sourceNodeRef = useRef<MediaElementAudioSourceNode | null>(null);\r\n  const gainNodeRef = useRef<GainNode | null>(null);\r\n  const compressorNodeRef = useRef<DynamicsCompressorNode | null>(null);\r\n  const eqFiltersRef = useRef<BiquadFilterNode[]>([]);\r\n  const analyserNodeRef = useRef<AnalyserNode | null>(null);\r\n  \r\n  // Canvas for visualization\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const animationFrameRef = useRef<number>(0);\r\n\r\n  const { audioContext, ensureContextRunning, createMediaElementSource } = useAudioContext();\r\n\r\n  // Initialize Web Audio API\r\n  useEffect(() => {\r\n    if (!audioFile || !audioElementRef.current || !audioContext) return;\r\n\r\n    const initAudio = async () => {\r\n      try {\r\n        // Create audio nodes if they don't exist\r\n        if (!sourceNodeRef.current) {\r\n          sourceNodeRef.current = await createMediaElementSource(audioElementRef.current!);\r\n        }\r\n        \r\n        if (!gainNodeRef.current) {\r\n          gainNodeRef.current = audioContext.createGain();\r\n        }\r\n        \r\n        if (!compressorNodeRef.current) {\r\n          compressorNodeRef.current = audioContext.createDynamicsCompressor();\r\n        }\r\n        \r\n        if (!analyserNodeRef.current) {\r\n          analyserNodeRef.current = audioContext.createAnalyser();\r\n          analyserNodeRef.current.fftSize = 2048;\r\n        }\r\n        \r\n        // Create EQ filters\r\n        if (eqFiltersRef.current.length === 0) {\r\n          EQ_FREQUENCIES.forEach((freq, i) => {\r\n            const filter = audioContext.createBiquadFilter();\r\n            \r\n            if (i === 0) {\r\n              filter.type = 'lowshelf';\r\n            } else if (i === EQ_FREQUENCIES.length - 1) {\r\n              filter.type = 'highshelf';\r\n            } else {\r\n              filter.type = 'peaking';\r\n            }\r\n            \r\n            filter.frequency.value = freq;\r\n            filter.gain.value = eqBands[i] || 0;\r\n            filter.Q.value = 1.0;\r\n            \r\n            eqFiltersRef.current.push(filter);\r\n          });\r\n        }\r\n        \r\n        // Connect audio graph\r\n        connectAudioGraph();\r\n      } catch (error) {\r\n        console.error('Failed to initialize audio:', error);\r\n      }\r\n    };\r\n\r\n    initAudio();\r\n\r\n    return () => {\r\n      if (animationFrameRef.current) {\r\n        cancelAnimationFrame(animationFrameRef.current);\r\n      }\r\n      // Don't close shared context!\r\n    };\r\n  }, [audioFile, audioContext, createMediaElementSource]);\r\n\r\n  // Connect audio processing graph\r\n  const connectAudioGraph = () => {\r\n    if (!sourceNodeRef.current || !gainNodeRef.current || !analyserNodeRef.current || !audioContext) return;\r\n\r\n    let currentNode: AudioNode = sourceNodeRef.current;\r\n    \r\n    // Apply EQ if enabled\r\n    if (eqEnabled && eqFiltersRef.current.length > 0) {\r\n      eqFiltersRef.current.forEach(filter => {\r\n        currentNode.connect(filter);\r\n        currentNode = filter;\r\n      });\r\n    }\r\n    \r\n    // Apply compression if enabled\r\n    if (compressionEnabled && compressorNodeRef.current) {\r\n      currentNode.connect(compressorNodeRef.current);\r\n      currentNode = compressorNodeRef.current;\r\n    }\r\n    \r\n    // Connect to gain -> analyser -> destination\r\n    currentNode.connect(gainNodeRef.current);\r\n    gainNodeRef.current.connect(analyserNodeRef.current);\r\n    analyserNodeRef.current.connect(audioContext.destination);\r\n  };\r\n\r\n  // Update EQ bands in real-time\r\n  useEffect(() => {\r\n    if (eqFiltersRef.current.length === 0 || !audioContext) return;\r\n    \r\n    eqFiltersRef.current.forEach((filter, index) => {\r\n      if (eqBands[index] !== undefined) {\r\n        filter.gain.setValueAtTime(\r\n          eqBands[index],\r\n          audioContext.currentTime\r\n        );\r\n      }\r\n    });\r\n  }, [eqBands, audioContext]);\r\n\r\n  // Update volume\r\n  useEffect(() => {\r\n    if (gainNodeRef.current && audioContext) {\r\n      const gainValue = isMuted ? 0 : volume;\r\n      gainNodeRef.current.gain.setValueAtTime(\r\n        gainValue,\r\n        audioContext.currentTime\r\n      );\r\n    }\r\n  }, [volume, isMuted, audioContext]);\r\n\r\n  // Update compression\r\n  useEffect(() => {\r\n    if (compressorNodeRef.current && audioContext) {\r\n      compressorNodeRef.current.threshold.setValueAtTime(\r\n        compressionThreshold,\r\n        audioContext.currentTime\r\n      );\r\n    }\r\n  }, [compressionThreshold, audioContext]);\r\n\r\n  // Visualization\r\n  useEffect(() => {\r\n    if (!isPlaying || !analyserNodeRef.current || !canvasRef.current) return;\r\n\r\n    const canvas = canvasRef.current;\r\n    const ctx = canvas.getContext('2d');\r\n    if (!ctx) return;\r\n\r\n    const analyser = analyserNodeRef.current;\r\n    const bufferLength = analyser.frequencyBinCount;\r\n    const dataArray = new Uint8Array(bufferLength);\r\n\r\n    const draw = () => {\r\n      animationFrameRef.current = requestAnimationFrame(draw);\r\n\r\n      analyser.getByteFrequencyData(dataArray);\r\n\r\n      ctx.fillStyle = 'rgba(15, 23, 42, 0.3)';\r\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n      const barWidth = (canvas.width / bufferLength) * 2.5;\r\n      let barHeight;\r\n      let x = 0;\r\n\r\n      for (let i = 0; i < bufferLength; i++) {\r\n        barHeight = (dataArray[i] / 255) * canvas.height;\r\n\r\n        const gradient = ctx.createLinearGradient(0, canvas.height - barHeight, 0, canvas.height);\r\n        gradient.addColorStop(0, '#06b6d4');\r\n        gradient.addColorStop(1, '#3b82f6');\r\n\r\n        ctx.fillStyle = gradient;\r\n        ctx.fillRect(x, canvas.height - barHeight, barWidth, barHeight);\r\n\r\n        x += barWidth + 1;\r\n      }\r\n    };\r\n\r\n    draw();\r\n\r\n    return () => {\r\n      if (animationFrameRef.current) {\r\n        cancelAnimationFrame(animationFrameRef.current);\r\n      }\r\n    };\r\n  }, [isPlaying]);\r\n\r\n  const handlePlayPause = async () => {\r\n    if (!audioElementRef.current) return;\r\n\r\n    try {\r\n      // Ensure AudioContext is running\r\n      await ensureContextRunning();\r\n\r\n      if (isPlaying) {\r\n        audioElementRef.current.pause();\r\n        setIsPlaying(false);\r\n      } else {\r\n        await audioElementRef.current.play();\r\n        setIsPlaying(true);\r\n      }\r\n    } catch (error) {\r\n      console.error('Playback failed:', error);\r\n      setIsPlaying(false);\r\n    }\r\n  };\r\n\r\n  const handleStop = () => {\r\n    if (!audioElementRef.current) return;\r\n    audioElementRef.current.pause();\r\n    audioElementRef.current.currentTime = 0;\r\n    setIsPlaying(false);\r\n    setCurrentTime(0);\r\n  };\r\n\r\n  const handleSeek = (value: number[]) => {\r\n    if (!audioElementRef.current) return;\r\n    audioElementRef.current.currentTime = value[0];\r\n    setCurrentTime(value[0]);\r\n  };\r\n\r\n  const formatTime = (seconds: number): string => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = Math.floor(seconds % 60);\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  if (!audioFile) {\r\n    return (\r\n      <Card className=\"bg-slate-900/90 border-slate-700\">\r\n        <CardContent className=\"p-8 text-center\">\r\n          <Music className=\"h-16 w-16 text-slate-500 mx-auto mb-4\" />\r\n          <p className=\"text-slate-400\">No audio file loaded</p>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Card className=\"bg-gradient-to-br from-slate-900 to-slate-800 border-slate-700 shadow-xl\">\r\n      <CardHeader>\r\n        <CardTitle className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-2 text-cyan-400\">\r\n            <Activity className=\"h-5 w-5\" />\r\n            Advanced Player\r\n          </div>\r\n          <Badge className=\"bg-green-600 text-white\">\r\n            Real-time Enhancement\r\n          </Badge>\r\n        </CardTitle>\r\n      </CardHeader>\r\n      <CardContent className=\"space-y-6\">\r\n        {/* Audio Element */}\r\n        <audio\r\n          ref={audioElementRef}\r\n          src={audioFile.originalUrl || URL.createObjectURL(audioFile.originalFile)}\r\n          onTimeUpdate={(e) => setCurrentTime(e.currentTarget.currentTime)}\r\n          onLoadedMetadata={(e) => setDuration(e.currentTarget.duration)}\r\n          onEnded={() => setIsPlaying(false)}\r\n        />\r\n\r\n        {/* Visualization Canvas */}\r\n        <canvas\r\n          ref={canvasRef}\r\n          width={600}\r\n          height={100}\r\n          className=\"w-full rounded-lg bg-slate-950/50 border border-slate-700\"\r\n        />\r\n\r\n        {/* Track Info */}\r\n        <div className=\"text-center\">\r\n          <h3 className=\"text-white font-semibold truncate\">{audioFile.name}</h3>\r\n          <div className=\"flex justify-between text-sm text-slate-400 mt-2\">\r\n            <span>{formatTime(currentTime)}</span>\r\n            <span>{formatTime(duration)}</span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Progress Bar */}\r\n        <Slider\r\n          value={[currentTime]}\r\n          max={duration || 100}\r\n          step={0.1}\r\n          onValueChange={handleSeek}\r\n          className=\"w-full\"\r\n        />\r\n\r\n        {/* Playback Controls */}\r\n        <div className=\"flex items-center justify-center gap-4\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"icon\"\r\n            onClick={handleStop}\r\n            className=\"bg-slate-800 border-slate-600 hover:bg-slate-700\"\r\n          >\r\n            <Square className=\"h-4 w-4\" />\r\n          </Button>\r\n          <Button\r\n            variant=\"default\"\r\n            size=\"icon\"\r\n            onClick={handlePlayPause}\r\n            className=\"bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 h-12 w-12\"\r\n          >\r\n            {isPlaying ? <Pause className=\"h-6 w-6\" /> : <Play className=\"h-6 w-6\" />}\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"icon\"\r\n            onClick={() => setIsMuted(!isMuted)}\r\n            className=\"bg-slate-800 border-slate-600 hover:bg-slate-700\"\r\n          >\r\n            {isMuted ? <VolumeX className=\"h-4 w-4\" /> : <Volume2 className=\"h-4 w-4\" />}\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Volume Control */}\r\n        <div className=\"flex items-center gap-3\">\r\n          <Volume2 className=\"h-4 w-4 text-slate-400\" />\r\n          <Slider\r\n            value={[volume]}\r\n            max={1}\r\n            step={0.01}\r\n            onValueChange={(v) => setVolume(v[0])}\r\n            className=\"flex-1\"\r\n          />\r\n          <span className=\"text-sm text-slate-400 w-12 text-right\">\r\n            {Math.round(volume * 100)}%\r\n          </span>\r\n        </div>\r\n\r\n        {/* Enhancement Controls */}\r\n        <div className=\"space-y-4 pt-4 border-t border-slate-700\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <Sliders className=\"h-4 w-4 text-cyan-400\" />\r\n              <span className=\"text-white font-medium\">Equalizer</span>\r\n            </div>\r\n            <Switch checked={eqEnabled} onCheckedChange={setEqEnabled} />\r\n          </div>\r\n\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <TrendingUp className=\"h-4 w-4 text-purple-400\" />\r\n              <span className=\"text-white font-medium\">Compression</span>\r\n            </div>\r\n            <Switch\r\n              checked={compressionEnabled}\r\n              onCheckedChange={setCompressionEnabled}\r\n            />\r\n          </div>\r\n\r\n          {compressionEnabled && (\r\n            <div className=\"pl-6 space-y-2\">\r\n              <label className=\"text-sm text-slate-400\">\r\n                Threshold: {compressionThreshold}dB\r\n              </label>\r\n              <Slider\r\n                value={[compressionThreshold]}\r\n                min={-60}\r\n                max={0}\r\n                step={1}\r\n                onValueChange={(v) => setCompressionThreshold(v[0])}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Processing Status */}\r\n        <div className=\"flex items-center justify-center gap-2 text-sm text-slate-400\">\r\n          <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\" />\r\n          <span>\r\n            Processing: {eqEnabled ? 'EQ' : ''}{' '}\r\n            {compressionEnabled ? 'Compression' : ''}\r\n          </span>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\AnimatedTitle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\AudioAnalysis.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\AudioComparison.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\AudioEnhancementBanner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\AudioFileActions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\AudioFileCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\AudioFileHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\AudioFileInfo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\AudioMiniPlayer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\AudioPlayer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\AudioSettingsTooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\AudioWaveform.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1348,1351],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1348,1351],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { useEffect, useRef } from 'react';\r\n\r\ninterface AudioWaveformProps {\r\n  audioUrl: string;\r\n  color?: string;\r\n  height?: number;\r\n  playing?: boolean;\r\n}\r\n\r\nexport const AudioWaveform = ({ audioUrl, color = '#3b82f6', height = 40, playing = false }: AudioWaveformProps) => {\r\n  const canvasRef = useRef<HTMLCanvasElement | null>(null);\r\n  const animationRef = useRef<number | null>(null);\r\n  const audioContextRef = useRef<AudioContext | null>(null);\r\n  const analyserRef = useRef<AnalyserNode | null>(null);\r\n  const sourceRef = useRef<MediaElementAudioSourceNode | null>(null);\r\n  const audioRef = useRef<HTMLAudioElement | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!audioUrl) return;\r\n\r\n    // Create audio element if it doesn't exist\r\n    if (!audioRef.current) {\r\n      audioRef.current = new Audio();\r\n    }\r\n    \r\n    audioRef.current.src = audioUrl;\r\n    audioRef.current.crossOrigin = 'anonymous';\r\n    \r\n    if (playing) {\r\n      audioRef.current.play().catch(err => console.error(\"Playback error:\", err));\r\n    } else {\r\n      audioRef.current.pause();\r\n    }\r\n\r\n    // Clean up and create new audio context\r\n    if (audioContextRef.current) {\r\n      sourceRef.current?.disconnect();\r\n      analyserRef.current?.disconnect();\r\n    }\r\n\r\n    // Create audio context\r\n    const AudioContext = window.AudioContext || (window as any).webkitAudioContext;\r\n    audioContextRef.current = new AudioContext();\r\n    analyserRef.current = audioContextRef.current.createAnalyser();\r\n    sourceRef.current = audioContextRef.current.createMediaElementSource(audioRef.current);\r\n    \r\n    // Connect audio graph\r\n    sourceRef.current.connect(analyserRef.current);\r\n    analyserRef.current.connect(audioContextRef.current.destination);\r\n    \r\n    // Configure analyzer\r\n    analyserRef.current.fftSize = 256;\r\n    const bufferLength = analyserRef.current.frequencyBinCount;\r\n    const dataArray = new Uint8Array(bufferLength);\r\n\r\n    // Get canvas context and start drawing\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n    \r\n    const canvasCtx = canvas.getContext('2d');\r\n    if (!canvasCtx) return;\r\n\r\n    // Function to draw waveform\r\n    const draw = () => {\r\n      if (!analyserRef.current || !canvasCtx) return;\r\n      \r\n      animationRef.current = requestAnimationFrame(draw);\r\n      \r\n      analyserRef.current.getByteFrequencyData(dataArray);\r\n      \r\n      canvasCtx.clearRect(0, 0, canvas.width, canvas.height);\r\n      \r\n      // Draw the waveform\r\n      const barWidth = (canvas.width / bufferLength) * 2.5;\r\n      let x = 0;\r\n      \r\n      for (let i = 0; i < bufferLength; i++) {\r\n        const barHeight = (dataArray[i] / 255) * canvas.height;\r\n        \r\n        canvasCtx.fillStyle = color;\r\n        canvasCtx.fillRect(x, canvas.height - barHeight, barWidth, barHeight);\r\n        \r\n        x += barWidth + 1;\r\n      }\r\n    };\r\n    \r\n    // Start the animation\r\n    draw();\r\n\r\n    return () => {\r\n      // Clean up\r\n      if (animationRef.current) {\r\n        cancelAnimationFrame(animationRef.current);\r\n      }\r\n      audioRef.current?.pause();\r\n    };\r\n  }, [audioUrl, color, playing]);\r\n\r\n  return (\r\n    <div className=\"w-full\">\r\n      <canvas \r\n        ref={canvasRef} \r\n        height={height} \r\n        className=\"w-full rounded-md\"\r\n      ></canvas>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\BatchPresets.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":7,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[271,274],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[271,274],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Disc, Mic, Wand2, FileAudio, Music4, Music2 } from 'lucide-react';\r\n\r\ninterface BatchPresetsProps {\r\n  onSelectPreset: (preset: any) => void;\r\n}\r\n\r\nexport const BatchPresets = ({ onSelectPreset }: BatchPresetsProps) => {\r\n  const presets = [\r\n    {\r\n      name: \"Vinyl Restoration\",\r\n      icon: Disc,\r\n      settings: {\r\n        targetBitrate: 320,\r\n        sampleRate: 48000,\r\n        noiseReduction: true,\r\n        noiseReductionLevel: 70,\r\n        normalization: true,\r\n        normalizationLevel: -3,\r\n        bassBoost: true,\r\n        bassBoostLevel: 15,\r\n        trebleEnhancement: true,\r\n        trebleLevel: 20,\r\n        compression: true,\r\n        compressionRatio: 3,\r\n        outputFormat: 'flac',\r\n        smartFolder: 'Vinyl'\r\n      }\r\n    },\r\n    {\r\n      name: \"Podcast Enhancement\",\r\n      icon: Mic,\r\n      settings: {\r\n        targetBitrate: 192,\r\n        sampleRate: 44100,\r\n        noiseReduction: true,\r\n        noiseReductionLevel: 80,\r\n        normalization: true,\r\n        normalizationLevel: -2,\r\n        bassBoost: false,\r\n        trebleEnhancement: true,\r\n        trebleLevel: 25,\r\n        compression: true,\r\n        compressionRatio: 6,\r\n        outputFormat: 'mp3',\r\n        smartFolder: 'Podcasts'\r\n      }\r\n    },\r\n    {\r\n      name: \"Lo-Fi Tapes\",\r\n      icon: Music2,\r\n      settings: {\r\n        targetBitrate: 320,\r\n        sampleRate: 48000,\r\n        noiseReduction: true,\r\n        noiseReductionLevel: 60,\r\n        normalization: true,\r\n        normalizationLevel: -4,\r\n        bassBoost: true,\r\n        bassBoostLevel: 30,\r\n        trebleEnhancement: false,\r\n        compression: true,\r\n        compressionRatio: 2,\r\n        outputFormat: 'mp3',\r\n        smartFolder: 'LoFi'\r\n      }\r\n    },\r\n    {\r\n      name: \"Classical Music\",\r\n      icon: Music4,\r\n      settings: {\r\n        targetBitrate: 320,\r\n        sampleRate: 96000,\r\n        noiseReduction: true,\r\n        noiseReductionLevel: 30,\r\n        normalization: true,\r\n        normalizationLevel: -6,\r\n        bassBoost: false,\r\n        trebleEnhancement: false,\r\n        compression: false,\r\n        outputFormat: 'flac',\r\n        smartFolder: 'Classical'\r\n      }\r\n    },\r\n    {\r\n      name: \"Live Recordings\",\r\n      icon: FileAudio,\r\n      settings: {\r\n        targetBitrate: 320,\r\n        sampleRate: 48000,\r\n        noiseReduction: true,\r\n        noiseReductionLevel: 40,\r\n        normalization: true,\r\n        normalizationLevel: -3,\r\n        bassBoost: true,\r\n        bassBoostLevel: 10,\r\n        trebleEnhancement: true,\r\n        trebleLevel: 15,\r\n        compression: true,\r\n        compressionRatio: 3,\r\n        outputFormat: 'flac',\r\n        smartFolder: 'Live'\r\n      }\r\n    },\r\n    {\r\n      name: \"Voice Memo\",\r\n      icon: Mic,\r\n      settings: {\r\n        targetBitrate: 192,\r\n        sampleRate: 44100,\r\n        noiseReduction: true,\r\n        noiseReductionLevel: 90,\r\n        normalization: true,\r\n        normalizationLevel: -1,\r\n        bassBoost: false,\r\n        trebleEnhancement: true,\r\n        trebleLevel: 30,\r\n        compression: true,\r\n        compressionRatio: 8,\r\n        outputFormat: 'mp3',\r\n        smartFolder: 'Voice'\r\n      }\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <Card className=\"bg-slate-800/50 border-slate-700\">\r\n      <CardHeader>\r\n        <CardTitle className=\"flex items-center gap-2 text-white\">\r\n          <Wand2 className=\"h-5 w-5\" />\r\n          Specialized Presets\r\n        </CardTitle>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\r\n          {presets.map((preset) => (\r\n            <Button\r\n              key={preset.name}\r\n              variant=\"outline\"\r\n              className=\"bg-slate-700 border-slate-600 hover:bg-slate-600 text-white flex items-center h-auto py-4\"\r\n              onClick={() => onSelectPreset(preset.settings)}\r\n            >\r\n              <div className=\"flex flex-col items-center gap-2\">\r\n                <preset.icon className=\"h-6 w-6\" />\r\n                <span>{preset.name}</span>\r\n              </div>\r\n            </Button>\r\n          ))}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\BetaGate.tsx","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":43,"column":9,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":43,"endColumn":66,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[1441,1498],"text":"// @ts-expect-error - is_admin RPC will be created by migration"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { useUserSubscription } from '@/hooks/useUserSubscription';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { BETA_CONFIG } from '@/config/beta';\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { AlertTriangle, Lock } from 'lucide-react';\r\n\r\ninterface BetaGateProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const BetaGate: React.FC<BetaGateProps> = ({ children }) => {\r\n  const { user, loading: authLoading } = useAuth();\r\n  const { isAdmin, loading: subscriptionLoading } = useUserSubscription();\r\n  const [isBetaUser, setIsBetaUser] = useState<boolean | null>(null);\r\n  const [checking, setChecking] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const checkBetaAccess = async () => {\r\n      // If beta mode is disabled, allow all access\r\n      if (!BETA_CONFIG.BETA_MODE_ENABLED) {\r\n        setIsBetaUser(true);\r\n        setChecking(false);\r\n        return;\r\n      }\r\n\r\n      // Wait for auth to load\r\n      if (authLoading || subscriptionLoading) {\r\n        return;\r\n      }\r\n\r\n      // If no user, deny access\r\n      if (!user) {\r\n        setIsBetaUser(false);\r\n        setChecking(false);\r\n        return;\r\n      }\r\n\r\n      // Check if user is admin (bypass beta) via Database\r\n      try {\r\n        // @ts-ignore - is_admin RPC will be created by migration\r\n        const { data: isAdminDB } = await supabase.rpc('is_admin', {\r\n          check_user_id: user.id\r\n        });\r\n\r\n        if (isAdminDB || isAdmin) {\r\n          setIsBetaUser(true);\r\n          setChecking(false);\r\n          return;\r\n        }\r\n      } catch (error) {\r\n        console.error('Admin check failed:', error);\r\n        // Fallback to config if DB check fails (safety net)\r\n        const userEmail = user.email?.toLowerCase();\r\n        const isAdminEmail = userEmail && BETA_CONFIG.ADMIN_EMAILS.includes(userEmail);\r\n        if (isAdminEmail) {\r\n          setIsBetaUser(true);\r\n          setChecking(false);\r\n          return;\r\n        }\r\n      }\r\n\r\n      // Check if user is in beta whitelist via database\r\n      try {\r\n        const { data: betaData, error } = await supabase.rpc('is_beta_user', {\r\n          _user_id: user.id\r\n        });\r\n\r\n        if (error) {\r\n          console.error('Beta check error:', error);\r\n          setIsBetaUser(false);\r\n        } else {\r\n          setIsBetaUser(betaData === true);\r\n        }\r\n      } catch (error) {\r\n        console.error('Beta check failed:', error);\r\n        setIsBetaUser(false);\r\n      } finally {\r\n        setChecking(false);\r\n      }\r\n    };\r\n\r\n    checkBetaAccess();\r\n  }, [user, authLoading, subscriptionLoading, isAdmin]);\r\n\r\n  // Show loading state\r\n  if (checking || authLoading || subscriptionLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-slate-950\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-400 mx-auto\"></div>\r\n          <p className=\"mt-4 text-slate-400\">Loading...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // If beta mode is disabled, show children\r\n  if (!BETA_CONFIG.BETA_MODE_ENABLED) {\r\n    return <>{children}</>;\r\n  }\r\n\r\n  // If user has beta access, show children\r\n  if (isBetaUser === true) {\r\n    return <>{children}</>;\r\n  }\r\n\r\n  // Show beta restriction message\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4\">\r\n      <Card className=\"max-w-md w-full border-red-500/50 bg-slate-800/90\">\r\n        <CardHeader className=\"text-center\">\r\n          <div className=\"flex justify-center mb-4\">\r\n            <div className=\"rounded-full bg-red-500/20 p-4\">\r\n              <Lock className=\"h-12 w-12 text-red-400\" />\r\n            </div>\r\n          </div>\r\n          <CardTitle className=\"text-2xl text-red-400 flex items-center justify-center gap-2\">\r\n            <AlertTriangle className=\"h-6 w-6\" />\r\n            {BETA_CONFIG.BETA_MESSAGE.title}\r\n          </CardTitle>\r\n          <CardDescription className=\"text-slate-300 mt-4\">\r\n            {BETA_CONFIG.BETA_MESSAGE.description}\r\n          </CardDescription>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-4\">\r\n          <div className=\"bg-slate-700/50 rounded-lg p-4 border border-slate-600\">\r\n            <p className=\"text-sm text-slate-300 text-center\">\r\n              {BETA_CONFIG.BETA_MESSAGE.contact}\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"flex flex-col gap-2\">\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={async () => {\r\n                await supabase.auth.signOut();\r\n                window.location.href = '/auth';\r\n              }}\r\n              className=\"w-full border-slate-600 text-slate-300 hover:bg-slate-700\"\r\n            >\r\n              Sign Out\r\n            </Button>\r\n          </div>\r\n\r\n          <div className=\"text-xs text-slate-500 text-center pt-4 border-t border-slate-700\">\r\n            Error Code: BETA_ACCESS_DENIED\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\CompactEnhancementSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[708,711],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[708,711],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[789,792],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[789,792],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":21,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1000,1003],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1000,1003],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":25,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1103,1106],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1103,1106],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":25,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1118,1121],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1118,1121],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"Assignments to the 'onApplyPreset' variable from inside React Hook useEffect will be lost after each render. To preserve the value over time, store it in a useRef Hook and keep the mutable value in the '.current' property. Otherwise, you can move this variable directly inside useEffect.","line":88,"column":23,"nodeType":"ArrowFunctionExpression","endLine":111,"endColumn":8},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":88,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":88,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3053,3056],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3053,3056],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":126,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":126,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4720,4723],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4720,4723],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":145,"column":80,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":145,"endColumn":83,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5463,5466],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5463,5466],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Slider } from '@/components/ui/slider';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Checkbox } from '@/components/ui/checkbox';\r\nimport { Settings, Zap, Volume2, Headphones, Sparkles, Trash2 } from 'lucide-react';\r\nimport { EnhancedMiniPlayer } from '@/components/EnhancedMiniPlayer';\r\nimport { useEstimatedFileSize, formatFileSize } from '@/hooks/useEstimatedFileSize';\r\n\r\ninterface CompactEnhancementSettingsProps {\r\n  onEnhance: (settings: any) => void;\r\n  isProcessing: boolean;\r\n  hasFiles: boolean;\r\n  uploadedFiles?: any[];\r\n  onRemoveFile?: (id: string) => void;\r\n  eqBands: number[];\r\n  onEQBandChange: (bandIndex: number, value: number) => void;\r\n  onResetEQ: () => void;\r\n  eqEnabled: boolean;\r\n  onApplyPreset?: (settings: any) => void;\r\n}\r\n\r\n// Sub-component for file size estimation\r\nconst FileEstimateRow: React.FC<{ file: any; settings: any }> = ({ file, settings }) => {\r\n  const estimatedSize = useEstimatedFileSize(file.size, {\r\n    format: settings.outputFormat,\r\n    sampleRate: settings.sampleRate,\r\n    bitDepth: settings.bitDepth,\r\n    bitrate: settings.targetBitrate,\r\n    duration: file.duration,\r\n    channels: 2\r\n  });\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n      <div>\r\n        <span className=\"text-slate-400\">Before:</span>\r\n        <span className=\"ml-2 text-white font-semibold\">\r\n          {formatFileSize(file.size)}\r\n        </span>\r\n      </div>\r\n      <div>\r\n        <span className=\"text-slate-400\">After:</span>\r\n        <span className=\"ml-2 text-cyan-400 font-semibold\">\r\n          {estimatedSize > 0 ? `~${formatFileSize(estimatedSize)}` : 'Calculating...'}\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const CompactEnhancementSettings = ({\r\n  onEnhance, \r\n  isProcessing, \r\n  hasFiles,\r\n  uploadedFiles = [],\r\n  onRemoveFile,\r\n  eqBands = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n  onEQBandChange = () => {},\r\n  onResetEQ = () => {},\r\n  eqEnabled = true,\r\n  onApplyPreset\r\n}: CompactEnhancementSettingsProps) => {\r\n  const [noiseReductionEnabled, setNoiseReductionEnabled] = useState(true);\r\n  const [compressionEnabled, setCompressionEnabled] = useState(true);\r\n  const [stereoWideningEnabled, setStereoWideningEnabled] = useState(true);\r\n  \r\n  const [settings, setSettings] = useState({\r\n    sampleRate: 44100, // Default to 44.1 kHz\r\n    bitDepth: 16,\r\n    noiseReduction: 30,\r\n    compression: 40,\r\n    bassBoost: 0,\r\n    midBoost: 0,\r\n    trebleBoost: 0,\r\n    stereoWidening: 25,\r\n    normalization: true,\r\n    highFreqRestoration: true,\r\n    outputFormat: 'mp3', // Default to MP3\r\n    targetBitrate: 320\r\n  });\r\n\r\n  // Update settings when preset is applied\r\n  useEffect(() => {\r\n    if (onApplyPreset) {\r\n      const originalOnApplyPreset = onApplyPreset;\r\n      onApplyPreset = (presetSettings: any) => {\r\n        if (presetSettings.noiseReduction !== undefined) {\r\n          setSettings(prev => ({ ...prev, noiseReduction: presetSettings.noiseReduction }));\r\n          setNoiseReductionEnabled(presetSettings.noiseReduction > 0);\r\n        }\r\n        if (presetSettings.compression !== undefined) {\r\n          setSettings(prev => ({ ...prev, compression: presetSettings.compression }));\r\n          setCompressionEnabled(presetSettings.compression > 0);\r\n        }\r\n        if (presetSettings.stereoWidening !== undefined) {\r\n          setSettings(prev => ({ ...prev, stereoWidening: presetSettings.stereoWidening }));\r\n          setStereoWideningEnabled(presetSettings.stereoWidening > 0);\r\n        }\r\n        if (presetSettings.bassBoost !== undefined) {\r\n          setSettings(prev => ({ ...prev, bassBoost: presetSettings.bassBoost }));\r\n        }\r\n        if (presetSettings.midBoost !== undefined) {\r\n          setSettings(prev => ({ ...prev, midBoost: presetSettings.midBoost }));\r\n        }\r\n        if (presetSettings.trebleBoost !== undefined) {\r\n          setSettings(prev => ({ ...prev, trebleBoost: presetSettings.trebleBoost }));\r\n        }\r\n        originalOnApplyPreset(presetSettings);\r\n      };\r\n    }\r\n  }, [onApplyPreset]);\r\n\r\n  const handleEnhance = () => {\r\n    const finalSettings = {\r\n      ...settings,\r\n      noiseReduction: noiseReductionEnabled ? settings.noiseReduction : 0,\r\n      compression: compressionEnabled ? settings.compression : 0,\r\n      stereoWidening: stereoWideningEnabled ? settings.stereoWidening : 0\r\n    };\r\n    onEnhance(finalSettings);\r\n  };\r\n\r\n\r\n  const ToggleButton = ({ enabled, onToggle, icon, label, color }: any) => (\r\n    <button\r\n      onClick={onToggle}\r\n      className={`w-10 h-10 rounded-full flex items-center justify-center transition-all duration-500 transform hover:scale-110 ${\r\n        enabled \r\n          ? `text-white shadow-2xl ring-2 ring-opacity-50 animate-pulse` \r\n          : 'bg-slate-700 text-slate-400 hover:bg-slate-600'\r\n      }`}\r\n      title={`Toggle ${label}`}\r\n      style={enabled ? {\r\n        background: `linear-gradient(135deg, ${color}80, ${color}ff)`,\r\n        boxShadow: `0 0 30px ${color}80, 0 0 60px ${color}40, inset 0 0 20px ${color}20`,\r\n        borderColor: color + '60'\r\n      } : {}}\r\n    >\r\n      {icon}\r\n    </button>\r\n  );\r\n\r\n  const CustomSlider = ({ enabled, value, onChange, label, max = 100, color }: any) => (\r\n    <div className={`transition-all duration-300 ${!enabled ? 'opacity-30 pointer-events-none grayscale' : ''}`}>\r\n      <div className=\"flex justify-between text-xs text-slate-300 mb-2\">\r\n        <span>{label}</span>\r\n        <span className=\"font-mono\">{value}%</span>\r\n      </div>\r\n      <div className=\"relative\">\r\n        <Slider\r\n          value={[value]}\r\n          onValueChange={([val]) => onChange(val)}\r\n          max={max}\r\n          step={5}\r\n          className=\"w-full\"\r\n          disabled={!enabled}\r\n          style={{\r\n            '--slider-track': enabled ? color : '#64748b',\r\n            '--slider-range': enabled ? color : '#64748b',\r\n            '--slider-thumb': enabled ? '#ffffff' : '#94a3b8'\r\n          } as React.CSSProperties}\r\n        />\r\n        {enabled && (\r\n          <div \r\n            className=\"absolute inset-0 rounded-full pointer-events-none\"\r\n            style={{\r\n              background: `linear-gradient(90deg, transparent, ${color}20, transparent)`,\r\n              boxShadow: `0 0 10px ${color}40`\r\n            }}\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Songs Ready for Enhancement */}\r\n      {uploadedFiles.length > 0 && (\r\n        <Card className=\"bg-gradient-to-br from-slate-800 to-slate-900 border-slate-600 shadow-lg\">\r\n          <CardHeader className=\"pb-3\">\r\n            <CardTitle className=\"text-white text-lg flex items-center gap-2\">\r\n              <Settings className=\"h-5 w-5 text-blue-400\" />\r\n              Songs Ready for Enhancement ({uploadedFiles.length})\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"pt-0\">\r\n            <div className=\"space-y-2 max-h-60 overflow-y-auto\">\r\n              {uploadedFiles.map((file) => (\r\n                  <div key={file.id} className=\"space-y-2\">\r\n                    <div className=\"flex items-center justify-between p-3 bg-slate-800/50 rounded border border-slate-700\">\r\n                      <div className=\"flex-1 min-w-0\">\r\n                        <p className=\"text-sm text-white truncate font-medium\">{file.name}</p>\r\n                        <FileEstimateRow file={file} settings={settings} />\r\n                      </div>\r\n                      {(file.status === 'error' || file.status === 'uploaded') && onRemoveFile && (\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"sm\"\r\n                          onClick={() => onRemoveFile(file.id)}\r\n                          className=\"h-8 w-8 p-0 text-red-400 hover:text-red-300 hover:bg-red-900/50 ml-2\"\r\n                        >\r\n                          <Trash2 className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      )}\r\n                    </div>\r\n                    \r\n                    {/* Mini Player for each file */}\r\n                    <EnhancedMiniPlayer file={file} />\r\n                  </div>\r\n              ))}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      <Card className=\"bg-gradient-to-br from-slate-800 to-slate-900 border-slate-600 shadow-lg\">\r\n        <CardHeader className=\"pb-3\">\r\n          <CardTitle className=\"text-white text-lg flex items-center gap-3\">\r\n            <Settings className=\"h-5 w-5 text-blue-400\" />\r\n            Enhancement Settings\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent className=\"pt-0 space-y-6\">\r\n          {/* Neon Toggle Switches */}\r\n          <div className=\"flex items-center justify-around p-6 bg-gradient-to-r from-slate-800/80 to-slate-700/80 rounded-xl border border-slate-600 backdrop-blur-sm\">\r\n            <div className=\"flex flex-col items-center gap-3\">\r\n              <ToggleButton\r\n                enabled={noiseReductionEnabled}\r\n                onToggle={() => setNoiseReductionEnabled(!noiseReductionEnabled)}\r\n                icon={<Volume2 className=\"h-5 w-5\" />}\r\n                label=\"Noise Reduction\"\r\n                color=\"#10b981\"\r\n              />\r\n              <span className=\"text-xs text-slate-300 font-bold tracking-wide\">Noise</span>\r\n            </div>\r\n            <div className=\"flex flex-col items-center gap-3\">\r\n              <ToggleButton\r\n                enabled={compressionEnabled}\r\n                onToggle={() => setCompressionEnabled(!compressionEnabled)}\r\n                icon={<Zap className=\"h-5 w-5\" />}\r\n                label=\"Compression\"\r\n                color=\"#f59e0b\"\r\n              />\r\n              <span className=\"text-xs text-slate-300 font-bold tracking-wide\">Compress</span>\r\n            </div>\r\n            <div className=\"flex flex-col items-center gap-3\">\r\n              <ToggleButton\r\n                enabled={stereoWideningEnabled}\r\n                onToggle={() => setStereoWideningEnabled(!stereoWideningEnabled)}\r\n                icon={<Headphones className=\"h-5 w-5\" />}\r\n                label=\"Stereo Widening\"\r\n                color=\"#a855f7\"\r\n              />\r\n              <span className=\"text-xs text-slate-300 font-bold tracking-wide\">Stereo</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Quality Settings */}\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div>\r\n              <label className=\"text-xs text-slate-300 mb-2 block font-medium\">Sample Rate</label>\r\n              <Select value={settings.sampleRate.toString()} onValueChange={(value) => setSettings({...settings, sampleRate: parseInt(value)})}>\r\n                <SelectTrigger className=\"bg-slate-700 border-slate-600 text-white h-10\">\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"44100\">44.1 kHz</SelectItem>\r\n                  <SelectItem value=\"48000\">48 kHz</SelectItem>\r\n                  <SelectItem value=\"96000\">96 kHz</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n            <div>\r\n              <label className=\"text-xs text-slate-300 mb-2 block font-medium\">Format</label>\r\n              <Select value={settings.outputFormat} onValueChange={(value) => setSettings({...settings, outputFormat: value})}>\r\n                <SelectTrigger className=\"bg-slate-700 border-slate-600 text-white h-10\">\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"mp3\">MP3</SelectItem>\r\n                  <SelectItem value=\"wav\">WAV</SelectItem>\r\n                  <SelectItem value=\"flac\">FLAC</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Modern Enhancement Controls */}\r\n          <div className=\"space-y-4\">\r\n            <CustomSlider\r\n              enabled={noiseReductionEnabled}\r\n              value={settings.noiseReduction}\r\n              onChange={(value: number) => setSettings({...settings, noiseReduction: value})}\r\n              label=\"Noise Reduction\"\r\n              color=\"#10b981\"\r\n            />\r\n\r\n            <CustomSlider\r\n              enabled={compressionEnabled}\r\n              value={settings.compression}\r\n              onChange={(value: number) => setSettings({...settings, compression: value})}\r\n              label=\"Compression\"\r\n              color=\"#f59e0b\"\r\n            />\r\n\r\n            <CustomSlider\r\n              enabled={stereoWideningEnabled}\r\n              value={settings.stereoWidening}\r\n              onChange={(value: number) => setSettings({...settings, stereoWidening: value})}\r\n              label=\"Stereo Widening\"\r\n              color=\"#a855f7\"\r\n            />\r\n          </div>\r\n\r\n          {/* Checkboxes */}\r\n          <div className=\"space-y-3 pt-4 border-t border-slate-700\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <Checkbox \r\n                id=\"normalization\"\r\n                checked={settings.normalization}\r\n                onCheckedChange={(checked) => setSettings({...settings, normalization: !!checked})}\r\n                className=\"border-slate-500\"\r\n              />\r\n              <label htmlFor=\"normalization\" className=\"text-sm text-slate-300 font-medium\">Volume Normalization</label>\r\n            </div>\r\n            <div className=\"flex items-center space-x-3\">\r\n              <Checkbox \r\n                id=\"highfreq\"\r\n                checked={settings.highFreqRestoration}\r\n                onCheckedChange={(checked) => setSettings({...settings, highFreqRestoration: !!checked})}\r\n                className=\"border-slate-500\"\r\n              />\r\n              <label htmlFor=\"highfreq\" className=\"text-sm text-slate-300 font-medium\">High-Frequency Restoration</label>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Enhanced Perfect Audio Enhancement Button */}\r\n          <Button\r\n            onClick={handleEnhance}\r\n            disabled={!hasFiles || isProcessing}\r\n            className={`w-full h-14 text-xl font-bold relative overflow-hidden transition-all duration-500 transform hover:scale-105 ${\r\n              !hasFiles || isProcessing \r\n                ? 'opacity-50 cursor-not-allowed' \r\n                : 'bg-gradient-to-r from-purple-600 via-blue-600 to-cyan-500 hover:from-purple-700 hover:via-blue-700 hover:to-cyan-600 shadow-2xl hover:shadow-3xl'\r\n            }`}\r\n            style={{\r\n              boxShadow: !hasFiles || isProcessing ? '' : '0 0 40px rgba(147, 51, 234, 0.6), 0 0 80px rgba(59, 130, 246, 0.4), 0 0 120px rgba(6, 182, 212, 0.2)',\r\n              animation: !hasFiles || isProcessing ? '' : 'pulse 3s infinite'\r\n            }}\r\n          >\r\n            <div className=\"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000\" />\r\n            <Sparkles className=\"h-6 w-6 mr-3\" />\r\n            {isProcessing ? 'Enhancing...' : 'Perfect Audio Enhancement'}\r\n          </Button>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\CompactEqualizer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\CompactUploadZone.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\Controls.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\CopyrightNotice.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\CustomEQPresets.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\EQPresetButtons.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\EnhancedMiniPlayer.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":62,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2176,2179],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2176,2179],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Slider } from '@/components/ui/slider';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Play, Pause, Volume2, VolumeX, Settings } from 'lucide-react';\r\nimport { AudioFile } from '@/types/audio';\r\nimport { useAudioContext } from '@/hooks/useAudioContext';\r\n\r\ninterface EnhancedMiniPlayerProps {\r\n  file: AudioFile;\r\n  onAudioElementRef?: (audioElement: HTMLAudioElement | null) => void;\r\n}\r\n\r\nexport const EnhancedMiniPlayer = ({\r\n  file,\r\n  onAudioElementRef\r\n}: EnhancedMiniPlayerProps) => {\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [volume, setVolume] = useState(0.5);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [duration, setDuration] = useState(0);\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n  const audioRef = useRef<HTMLAudioElement>(null);\r\n  const sourceNodeRef = useRef<MediaElementAudioSourceNode | null>(null);\r\n  const { ensureContextRunning, createMediaElementSource } = useAudioContext();\r\n\r\n  // Initialize Web Audio API context using shared context\r\n  useEffect(() => {\r\n    const audio = audioRef.current;\r\n    if (!audio) return;\r\n\r\n    const initAudio = async () => {\r\n      try {\r\n        // Create MediaElementSource using shared context\r\n        const source = await createMediaElementSource(audio);\r\n        sourceNodeRef.current = source;\r\n        console.log('MediaElementSource connected for', file.name);\r\n      } catch (error) {\r\n        console.error('Error creating MediaElementSource:', error);\r\n      }\r\n    };\r\n\r\n    initAudio();\r\n\r\n    // Pass audio element reference to parent\r\n    if (onAudioElementRef) {\r\n      onAudioElementRef(audio);\r\n    }\r\n\r\n    const handleLoadedMetadata = () => {\r\n      setDuration(audio.duration || 0);\r\n      setIsLoaded(true);\r\n      console.log('Audio metadata loaded:', file.name, 'Duration:', audio.duration);\r\n    };\r\n\r\n    const handleLoadedData = () => {\r\n      setIsLoaded(true);\r\n      console.log('Audio data loaded successfully:', file.name);\r\n    };\r\n\r\n    const handleError = (e: any) => {\r\n      console.error('Audio loading error for', file.name, ':', e);\r\n      setIsLoaded(false);\r\n    };\r\n\r\n    const handleCanPlay = () => {\r\n      setIsLoaded(true);\r\n      console.log('Audio can play:', file.name);\r\n    };\r\n\r\n    const handleEnded = () => {\r\n      setIsPlaying(false);\r\n      setCurrentTime(0);\r\n      console.log('Audio playback ended:', file.name);\r\n    };\r\n\r\n    audio.addEventListener('loadedmetadata', handleLoadedMetadata);\r\n    audio.addEventListener('loadeddata', handleLoadedData);\r\n    audio.addEventListener('error', handleError);\r\n    audio.addEventListener('canplay', handleCanPlay);\r\n    audio.addEventListener('ended', handleEnded);\r\n\r\n    // Set audio source with error handling\r\n    try {\r\n      if (file.enhancedUrl) {\r\n        audio.src = file.enhancedUrl;\r\n        console.log('Setting enhanced audio source:', file.enhancedUrl.substring(0, 50));\r\n      } else if (file.originalFile) {\r\n        const objectUrl = URL.createObjectURL(file.originalFile);\r\n        audio.src = objectUrl;\r\n        console.log('Setting original file audio source from Blob');\r\n      }\r\n      audio.load();\r\n    } catch (error) {\r\n      console.error('Error setting audio source:', error);\r\n      setIsLoaded(false);\r\n    }\r\n\r\n    return () => {\r\n      audio.removeEventListener('loadedmetadata', handleLoadedMetadata);\r\n      audio.removeEventListener('loadeddata', handleLoadedData);\r\n      audio.removeEventListener('error', handleError);\r\n      audio.removeEventListener('canplay', handleCanPlay);\r\n      audio.removeEventListener('ended', handleEnded);\r\n      \r\n      // Clean up audio element reference\r\n      if (onAudioElementRef) {\r\n        onAudioElementRef(null);\r\n      }\r\n\r\n      // Don't close shared context!\r\n    };\r\n  }, [file, onAudioElementRef, createMediaElementSource]);\r\n\r\n  useEffect(() => {\r\n    if (audioRef.current) {\r\n      audioRef.current.volume = volume;\r\n    }\r\n  }, [volume]);\r\n\r\n  useEffect(() => {\r\n    const audioElement = audioRef.current;\r\n    if (!audioElement) return;\r\n\r\n    const timeUpdateHandler = () => {\r\n      setCurrentTime(audioElement.currentTime);\r\n    };\r\n\r\n    const endedHandler = () => {\r\n      setIsPlaying(false);\r\n      setCurrentTime(0);\r\n    };\r\n\r\n    // Prevent browser from auto-pausing\r\n    const pauseHandler = (e: Event) => {\r\n      if (isPlaying && audioElement.readyState >= 2) {\r\n        console.log('Preventing unwanted pause, resuming playback...');\r\n        audioElement.play().catch(err => console.error('Resume failed:', err));\r\n      }\r\n    };\r\n\r\n    audioElement.addEventListener(\"timeupdate\", timeUpdateHandler);\r\n    audioElement.addEventListener(\"ended\", endedHandler);\r\n    audioElement.addEventListener(\"pause\", pauseHandler);\r\n\r\n    return () => {\r\n      audioElement.removeEventListener(\"timeupdate\", timeUpdateHandler);\r\n      audioElement.removeEventListener(\"ended\", endedHandler);\r\n      audioElement.removeEventListener(\"pause\", pauseHandler);\r\n    };\r\n  }, [isPlaying]);\r\n\r\n  const togglePlay = async () => {\r\n    const audio = audioRef.current;\r\n    \r\n    if (!audio) {\r\n      console.warn('Audio element not available');\r\n      return;\r\n    }\r\n\r\n    if (!isLoaded) {\r\n      console.warn('Audio not loaded yet, attempting to load...');\r\n      try {\r\n        await audio.load();\r\n        // Wait for loadeddata event\r\n        await new Promise((resolve) => {\r\n          const handler = () => {\r\n            audio.removeEventListener('loadeddata', handler);\r\n            resolve(true);\r\n          };\r\n          audio.addEventListener('loadeddata', handler);\r\n        });\r\n      } catch (error) {\r\n        console.error('Failed to load audio:', error);\r\n        return;\r\n      }\r\n    }\r\n\r\n    try {\r\n      if (isPlaying) {\r\n        audio.pause();\r\n        setIsPlaying(false);\r\n        console.log('Audio paused');\r\n      } else {\r\n        // Ensure AudioContext is running\r\n        await ensureContextRunning();\r\n        console.log('AudioContext ensured running');\r\n\r\n        // Stop other audio players\r\n        const allAudioElements = document.querySelectorAll('audio');\r\n        allAudioElements.forEach(audioEl => {\r\n          if (audioEl !== audio && !audioEl.paused) {\r\n            audioEl.pause();\r\n          }\r\n        });\r\n        \r\n        console.log('Attempting to play audio:', file.name);\r\n        console.log('Audio src:', audio.src.substring(0, 100));\r\n        console.log('Audio readyState:', audio.readyState);\r\n        console.log('Audio networkState:', audio.networkState);\r\n        console.log('Audio duration:', audio.duration);\r\n        \r\n        await audio.play();\r\n        setIsPlaying(true);\r\n        console.log('Audio playing successfully:', file.name);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Playback failed:\", error);\r\n      console.error(\"Error details:\", {\r\n        name: (error as Error).name,\r\n        message: (error as Error).message,\r\n        src: audio.src,\r\n        readyState: audio.readyState,\r\n        networkState: audio.networkState,\r\n        error: audio.error\r\n      });\r\n      setIsPlaying(false);\r\n    }\r\n  };\r\n\r\n  const handleVolumeChange = (value: number[]) => {\r\n    setVolume(value[0] / 100);\r\n  };\r\n\r\n  const handleTimeChange = (value: number[]) => {\r\n    if (audioRef.current && isLoaded) {\r\n      audioRef.current.currentTime = value[0];\r\n      setCurrentTime(value[0]);\r\n    }\r\n  };\r\n\r\n  const formatTime = (time: number) => {\r\n    const minutes = Math.floor(time / 60);\r\n    const seconds = Math.floor(time % 60);\r\n    return `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;\r\n  };\r\n\r\n  return (\r\n    <Card className=\"bg-gradient-to-br from-slate-800 to-slate-900 border-slate-600 shadow-lg\">\r\n      <CardHeader className=\"pb-2\">\r\n        <CardTitle className=\"text-sm text-white flex items-center gap-2\">\r\n          <Settings className=\"h-4 w-4 text-blue-400\" />\r\n          Preview: {file.name}\r\n        </CardTitle>\r\n      </CardHeader>\r\n      <CardContent className=\"pt-0\">\r\n        <div className=\"flex items-center justify-between mb-3\">\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={togglePlay}\r\n            disabled={!isLoaded}\r\n            className=\"h-8 w-8 p-0 text-white hover:bg-slate-700\"\r\n          >\r\n            {isPlaying ? <Pause className=\"h-4 w-4\" /> : <Play className=\"h-4 w-4\" />}\r\n          </Button>\r\n          \r\n          <div className=\"flex items-center gap-2 flex-1 mx-3\">\r\n            <span className=\"text-xs text-slate-400 font-mono\">{formatTime(currentTime)}</span>\r\n            <div className=\"flex-1\">\r\n              <Slider\r\n                value={[currentTime]}\r\n                onValueChange={handleTimeChange}\r\n                max={duration || 100}\r\n                step={1}\r\n                className=\"w-full\"\r\n                disabled={!isLoaded}\r\n              />\r\n            </div>\r\n            <span className=\"text-xs text-slate-400 font-mono\">{formatTime(duration)}</span>\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-2\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              className=\"h-6 w-6 p-0 text-slate-400 hover:text-white\"\r\n            >\r\n              {volume === 0 ? <VolumeX className=\"h-3 w-3\" /> : <Volume2 className=\"h-3 w-3\" />}\r\n            </Button>\r\n            <div className=\"w-16\">\r\n              <Slider\r\n                value={[volume * 100]}\r\n                onValueChange={handleVolumeChange}\r\n                max={100}\r\n                step={1}\r\n                className=\"w-full\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <audio ref={audioRef} preload=\"metadata\" />\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\EnhancedSongsList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\EnhancementPresets.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[750,753],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[750,753],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Music, Mic, Zap, Coffee, Volume2, Radio, Headphones, Guitar, Piano, Drum, Info, Heart, Star, Sparkles, Waves, Sun, Moon } from 'lucide-react';\r\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\r\n\r\ninterface Preset {\r\n  name: string;\r\n  icon: React.ReactNode;\r\n  settings: {\r\n    bassBoost: number;\r\n    midBoost: number;\r\n    trebleBoost: number;\r\n    noiseReduction: number;\r\n    compression: number;\r\n    stereoWidening: number;\r\n    eqBands: number[];\r\n  };\r\n}\r\n\r\ninterface EnhancementPresetsProps {\r\n  onApplyPreset: (settings: any) => void;\r\n}\r\n\r\nexport const EnhancementPresets = ({ onApplyPreset }: EnhancementPresetsProps) => {\r\n  const [selectedPreset, setSelectedPreset] = useState<string | null>(null);\r\n\r\n  const presets: Preset[] = [\r\n    {\r\n      name: 'Music',\r\n      icon: <Music className=\"h-4 w-4\" />,\r\n      settings: {\r\n        bassBoost: 2,\r\n        midBoost: 0,\r\n        trebleBoost: 3,\r\n        noiseReduction: 20,\r\n        compression: 30,\r\n        stereoWidening: 25,\r\n        eqBands: [1, 2, 1, 0, 0, 1, 2, 3, 2, 1]\r\n      }\r\n    },\r\n    {\r\n      name: 'Podcast',\r\n      icon: <Mic className=\"h-4 w-4\" />,\r\n      settings: {\r\n        bassBoost: -2,\r\n        midBoost: 4,\r\n        trebleBoost: 2,\r\n        noiseReduction: 60,\r\n        compression: 50,\r\n        stereoWidening: 0,\r\n        eqBands: [-2, -1, 2, 4, 3, 2, 1, 2, 1, 0]\r\n      }\r\n    },\r\n    {\r\n      name: 'Electronic',\r\n      icon: <Zap className=\"h-4 w-4\" />,\r\n      settings: {\r\n        bassBoost: 4,\r\n        midBoost: -1,\r\n        trebleBoost: 5,\r\n        noiseReduction: 10,\r\n        compression: 20,\r\n        stereoWidening: 40,\r\n        eqBands: [3, 4, 2, -1, -2, 0, 3, 5, 4, 3]\r\n      }\r\n    },\r\n    {\r\n      name: 'Jazz',\r\n      icon: <Coffee className=\"h-4 w-4\" />,\r\n      settings: {\r\n        bassBoost: 1,\r\n        midBoost: 2,\r\n        trebleBoost: 1,\r\n        noiseReduction: 30,\r\n        compression: 15,\r\n        stereoWidening: 20,\r\n        eqBands: [0, 1, 2, 3, 2, 1, 2, 1, 1, 0]\r\n      }\r\n    },\r\n    {\r\n      name: 'Latin',\r\n      icon: <Volume2 className=\"h-4 w-4\" />,\r\n      settings: {\r\n        bassBoost: 3,\r\n        midBoost: 1,\r\n        trebleBoost: 2,\r\n        noiseReduction: 25,\r\n        compression: 25,\r\n        stereoWidening: 30,\r\n        eqBands: [2, 3, 2, 1, 2, 3, 2, 2, 1, 1]\r\n      }\r\n    },\r\n    {\r\n      name: 'Radio',\r\n      icon: <Radio className=\"h-4 w-4\" />,\r\n      settings: {\r\n        bassBoost: 0,\r\n        midBoost: 3,\r\n        trebleBoost: 4,\r\n        noiseReduction: 40,\r\n        compression: 60,\r\n        stereoWidening: 10,\r\n        eqBands: [-1, 0, 2, 4, 3, 2, 3, 4, 2, 1]\r\n      }\r\n    },\r\n    {\r\n      name: 'Hip Hop',\r\n      icon: <Headphones className=\"h-4 w-4\" />,\r\n      settings: {\r\n        bassBoost: 5,\r\n        midBoost: -1,\r\n        trebleBoost: 2,\r\n        noiseReduction: 15,\r\n        compression: 35,\r\n        stereoWidening: 25,\r\n        eqBands: [4, 5, 3, 1, -1, 0, 1, 2, 2, 1]\r\n      }\r\n    },\r\n    {\r\n      name: 'Rock',\r\n      icon: <Guitar className=\"h-4 w-4\" />,\r\n      settings: {\r\n        bassBoost: 2,\r\n        midBoost: 1,\r\n        trebleBoost: 4,\r\n        noiseReduction: 20,\r\n        compression: 40,\r\n        stereoWidening: 35,\r\n        eqBands: [1, 2, 3, 2, 1, 2, 3, 4, 3, 2]\r\n      }\r\n    },\r\n    {\r\n      name: 'Classical',\r\n      icon: <Piano className=\"h-4 w-4\" />,\r\n      settings: {\r\n        bassBoost: 0,\r\n        midBoost: 1,\r\n        trebleBoost: 2,\r\n        noiseReduction: 35,\r\n        compression: 10,\r\n        stereoWidening: 15,\r\n        eqBands: [0, 0, 1, 2, 1, 1, 2, 2, 1, 1]\r\n      }\r\n    },\r\n    {\r\n      name: 'Pop',\r\n      icon: <Drum className=\"h-4 w-4\" />,\r\n      settings: {\r\n        bassBoost: 3,\r\n        midBoost: 2,\r\n        trebleBoost: 3,\r\n        noiseReduction: 25,\r\n        compression: 45,\r\n        stereoWidening: 30,\r\n        eqBands: [2, 3, 2, 2, 1, 2, 3, 3, 2, 2]\r\n      }\r\n    },\r\n    {\r\n      name: 'Acoustic',\r\n      icon: <Heart className=\"h-4 w-4\" />,\r\n      settings: {\r\n        bassBoost: 1,\r\n        midBoost: 3,\r\n        trebleBoost: 2,\r\n        noiseReduction: 30,\r\n        compression: 20,\r\n        stereoWidening: 20,\r\n        eqBands: [0, 1, 2, 3, 3, 2, 2, 2, 1, 0]\r\n      }\r\n    },\r\n    {\r\n      name: 'Blues',\r\n      icon: <Star className=\"h-4 w-4\" />,\r\n      settings: {\r\n        bassBoost: 2,\r\n        midBoost: 2,\r\n        trebleBoost: 1,\r\n        noiseReduction: 25,\r\n        compression: 25,\r\n        stereoWidening: 25,\r\n        eqBands: [1, 2, 2, 3, 2, 2, 2, 1, 1, 0]\r\n      }\r\n    },\r\n    {\r\n      name: 'Ambient',\r\n      icon: <Sparkles className=\"h-4 w-4\" />,\r\n      settings: {\r\n        bassBoost: 0,\r\n        midBoost: 0,\r\n        trebleBoost: 3,\r\n        noiseReduction: 40,\r\n        compression: 10,\r\n        stereoWidening: 50,\r\n        eqBands: [0, 0, 0, 1, 1, 2, 3, 3, 2, 1]\r\n      }\r\n    },\r\n    {\r\n      name: 'Lofi',\r\n      icon: <Waves className=\"h-4 w-4\" />,\r\n      settings: {\r\n        bassBoost: 2,\r\n        midBoost: 1,\r\n        trebleBoost: -2,\r\n        noiseReduction: 10,\r\n        compression: 30,\r\n        stereoWidening: 15,\r\n        eqBands: [2, 2, 1, 1, 0, -1, -2, -1, 0, 0]\r\n      }\r\n    },\r\n    {\r\n      name: 'Vocal',\r\n      icon: <Sun className=\"h-4 w-4\" />,\r\n      settings: {\r\n        bassBoost: -1,\r\n        midBoost: 4,\r\n        trebleBoost: 3,\r\n        noiseReduction: 50,\r\n        compression: 40,\r\n        stereoWidening: 10,\r\n        eqBands: [-1, 0, 2, 4, 4, 3, 3, 2, 1, 0]\r\n      }\r\n    },\r\n    {\r\n      name: 'Dance',\r\n      icon: <Moon className=\"h-4 w-4\" />,\r\n      settings: {\r\n        bassBoost: 4,\r\n        midBoost: 0,\r\n        trebleBoost: 4,\r\n        noiseReduction: 15,\r\n        compression: 50,\r\n        stereoWidening: 40,\r\n        eqBands: [4, 4, 3, 1, 0, 1, 2, 4, 3, 2]\r\n      }\r\n    }\r\n  ];\r\n\r\n  const getPresetDescription = (preset: Preset) => {\r\n    const desc = [];\r\n    if (preset.settings.bassBoost > 0) desc.push(`+${preset.settings.bassBoost}dB Bass`);\r\n    if (preset.settings.midBoost > 0) desc.push(`+${preset.settings.midBoost}dB Mid`);\r\n    if (preset.settings.trebleBoost > 0) desc.push(`+${preset.settings.trebleBoost}dB Treble`);\r\n    if (preset.settings.noiseReduction > 0) desc.push(`${preset.settings.noiseReduction}% Noise Reduction`);\r\n    if (preset.settings.compression > 0) desc.push(`${preset.settings.compression}% Compression`);\r\n    if (preset.settings.stereoWidening > 0) desc.push(`${preset.settings.stereoWidening}% Stereo Width`);\r\n    return desc.join(', ');\r\n  };\r\n\r\n  return (\r\n    <Card className=\"bg-gradient-to-br from-slate-800 to-slate-900 border-slate-600 shadow-lg\">\r\n      <CardHeader className=\"pb-2\">\r\n        <CardTitle className=\"text-white text-sm flex items-center gap-2\">\r\n          Enhancement Presets\r\n          <Info className=\"h-4 w-4 text-slate-400\" />\r\n        </CardTitle>\r\n      </CardHeader>\r\n      <CardContent className=\"pt-0\">\r\n        <div className=\"grid grid-cols-2 gap-2\">\r\n          {presets.map((preset) => (\r\n            <Popover key={preset.name}>\r\n              <PopoverTrigger asChild>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => {\r\n                    onApplyPreset(preset.settings);\r\n                    setSelectedPreset(preset.name);\r\n                  }}\r\n                  className={`bg-slate-700 border-slate-600 hover:bg-slate-600 text-white h-8 text-xs flex items-center gap-2 ${\r\n                    selectedPreset === preset.name ? 'ring-2 ring-blue-400' : ''\r\n                  }`}\r\n                >\r\n                  {preset.icon}\r\n                  {preset.name}\r\n                </Button>\r\n              </PopoverTrigger>\r\n              <PopoverContent className=\"w-64 bg-slate-800 border-slate-700 text-white\">\r\n                <div className=\"space-y-2\">\r\n                  <h4 className=\"font-medium text-blue-400\">{preset.name} Preset</h4>\r\n                  <p className=\"text-xs text-slate-300\">\r\n                    {getPresetDescription(preset)}\r\n                  </p>\r\n                </div>\r\n              </PopoverContent>\r\n            </Popover>\r\n          ))}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\EnhancementSection.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[587,590],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[587,590],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":19,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[790,793],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[790,793],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { CompactEnhancementSettings } from '@/components/CompactEnhancementSettings';\r\nimport { EnhancementPresets } from '@/components/EnhancementPresets';\r\nimport { CustomEQPresets } from '@/components/CustomEQPresets';\r\nimport { CompactEqualizer } from '@/components/CompactEqualizer';\r\nimport { Music, FileAudio } from 'lucide-react';\r\nimport { AudioFile } from '@/types/audio';\r\n\r\ninterface EnhancementSectionProps {\r\n  audioFiles: AudioFile[];\r\n  onEnhance: (settings: any) => void;\r\n  isProcessing: boolean;\r\n  eqBands: number[];\r\n  onEQBandChange: (bandIndex: number, value: number) => void;\r\n  onResetEQ: () => void;\r\n  eqEnabled: boolean;\r\n  onApplyPreset: (settings: any) => void;\r\n  onRemoveFile?: (id: string) => void;\r\n}\r\n\r\nexport const EnhancementSection = ({\r\n  audioFiles,\r\n  onEnhance,\r\n  isProcessing,\r\n  eqBands,\r\n  onEQBandChange,\r\n  onResetEQ,\r\n  eqEnabled,\r\n  onApplyPreset,\r\n  onRemoveFile\r\n}: EnhancementSectionProps) => {\r\n  const uploadedFiles = audioFiles.filter(f => f.status === 'uploaded');\r\n\r\n  const formatFileSize = (bytes: number) => {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Enhancement Settings and Presets */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        <div className=\"space-y-4\">\r\n          <CompactEnhancementSettings\r\n            onEnhance={onEnhance}\r\n            isProcessing={isProcessing}\r\n            hasFiles={uploadedFiles.length > 0}\r\n            uploadedFiles={uploadedFiles}\r\n            onRemoveFile={onRemoveFile}\r\n            eqBands={eqBands}\r\n            onEQBandChange={onEQBandChange}\r\n            onResetEQ={onResetEQ}\r\n            eqEnabled={eqEnabled}\r\n          />\r\n        </div>\r\n        \r\n        <div className=\"space-y-4\">\r\n          <EnhancementPresets onApplyPreset={onApplyPreset} />\r\n          \r\n          {/* Compact EQ for Enhancement Preview - Above Custom Presets */}\r\n          {uploadedFiles.length > 0 && (\r\n            <div className=\"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 rounded-lg p-3 border border-slate-600 shadow-lg\">\r\n              <h4 className=\"text-xs font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent tracking-wide mb-2\">\r\n                Enhancement EQ Preview\r\n              </h4>\r\n              <div className=\"flex justify-center items-end gap-1 py-2 px-2 border border-slate-600 rounded-lg bg-gradient-to-t from-slate-800/60 to-slate-700/30 backdrop-blur-md shadow-inner\">\r\n                {[31, 62, 125, 250, 500, 1000, 2000, 4000, 8000, 16000].map((freq, index) => (\r\n                  <div key={freq} className=\"flex flex-col items-center group\">\r\n                    <div className=\"h-12 flex items-end justify-center mb-1 relative\">\r\n                      <div \r\n                        className=\"absolute inset-x-0 bottom-0 rounded-t-lg transition-all duration-500 ease-out\"\r\n                        style={{\r\n                          background: `linear-gradient(180deg, \r\n                            ${['#ff1744', '#ff6d00', '#ffc400', '#76ff03', '#00e676', '#00e5ff', '#3d5afe', '#651fff', '#e91e63', '#ff3d00'][index]}40 0%, \r\n                            ${['#ff1744', '#ff6d00', '#ffc400', '#76ff03', '#00e676', '#00e5ff', '#3d5afe', '#651fff', '#e91e63', '#ff3d00'][index]}20 50%, \r\n                            transparent 100%)`,\r\n                          boxShadow: eqBands[index] !== 0 ? `0 0 10px ${['#ff1744', '#ff6d00', '#ffc400', '#76ff03', '#00e676', '#00e5ff', '#3d5afe', '#651fff', '#e91e63', '#ff3d00'][index]}40` : 'none',\r\n                        }}\r\n                      />\r\n                      <div className=\"relative z-10 w-3\">\r\n                        <input\r\n                          type=\"range\"\r\n                          min=\"-12\"\r\n                          max=\"12\"\r\n                          step=\"0.5\"\r\n                          value={eqBands[index]}\r\n                          onChange={(e) => onEQBandChange(index, parseFloat(e.target.value))}\r\n                          className=\"h-10 w-3 transform -rotate-90 origin-center\"\r\n                          style={{\r\n                            background: 'transparent',\r\n                            outline: 'none'\r\n                          }}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    <div className=\"text-xs text-center mb-1 font-bold tracking-wider bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent\">\r\n                      {freq < 1000 ? `${freq}Hz` : `${freq/1000}k`}\r\n                    </div>\r\n                    \r\n                    <div \r\n                      className=\"text-xs text-center min-w-6 font-mono bg-slate-900/90 rounded-full px-1 py-0.5 border transition-all duration-300 shadow-lg\"\r\n                      style={{\r\n                        color: eqBands[index] !== 0 ? ['#ff1744', '#ff6d00', '#ffc400', '#76ff03', '#00e676', '#00e5ff', '#3d5afe', '#651fff', '#e91e63', '#ff3d00'][index] : '#94a3b8',\r\n                        borderColor: eqBands[index] !== 0 ? ['#ff1744', '#ff6d00', '#ffc400', '#76ff03', '#00e676', '#00e5ff', '#3d5afe', '#651fff', '#e91e63', '#ff3d00'][index] + '60' : '#475569',\r\n                        fontSize: '9px'\r\n                      }}\r\n                    >\r\n                      {eqBands[index] > 0 ? '+' : ''}{eqBands[index]}\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n          <CustomEQPresets \r\n            currentEQBands={eqBands} \r\n            onApplyPreset={(eqBands) => onApplyPreset({ eqBands })} \r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\EnhancementSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":117,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":117,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4288,4291],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4288,4291],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { useState, useMemo } from 'react';\r\nimport { Settings, Wand2, Zap, Filter, Sliders } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { SaveLocationSelector } from '@/components/SaveLocationSelector';\r\nimport { BasicSettings } from '@/components/enhancement/BasicSettings';\r\nimport { AudioProcessingSettings } from '@/components/enhancement/AudioProcessingSettings';\r\nimport { CompactEqualizerWithPresets } from '@/components/enhancement/CompactEqualizerWithPresets';\r\nimport { AudioSettingsTooltip } from '@/components/AudioSettingsTooltip';\r\nimport { SimpleAudioEnhancer } from '@/components/SimpleAudioEnhancer';\r\n\r\ninterface EnhancementSettingsProps {\r\n  onEnhance: (settings: EnhancementSettings) => void;\r\n  isProcessing: boolean;\r\n  hasFiles: boolean;\r\n  onSaveLocationChange?: (location: string | FileSystemDirectoryHandle) => void;\r\n}\r\n\r\ninterface EnhancementSettings {\r\n  targetBitrate: number;\r\n  sampleRate: number;\r\n  noiseReduction: number;\r\n  noiseReductionEnabled: boolean;\r\n  normalize: boolean;\r\n  normalizeLevel: number;\r\n  bassBoost: number;\r\n  trebleEnhancement: number;\r\n  compression: number;\r\n  compressionEnabled: boolean;\r\n  stereoWidening: number;\r\n  stereoWideningEnabled: boolean;\r\n  outputFormat: string;\r\n  gainAdjustment: number;\r\n  enableEQ: boolean;\r\n  eqBands: number[];\r\n}\r\n\r\nconst getQualityLevel = (settings: EnhancementSettings) => {\r\n  let score = 0;\r\n  \r\n  if (settings.sampleRate >= 192000) score += 4;\r\n  else if (settings.sampleRate >= 96000) score += 3;\r\n  else if (settings.sampleRate >= 44100) score += 2;\r\n  else score += 1;\r\n  \r\n  if (settings.targetBitrate >= 320) score += 2;\r\n  else if (settings.targetBitrate >= 256) score += 1;\r\n  \r\n  if (settings.outputFormat === 'flac' || settings.outputFormat === 'wav') score += 2;\r\n  else if (settings.outputFormat === 'mp3') score += 1;\r\n  \r\n  if (settings.enableEQ) score += 1;\r\n  if (settings.noiseReductionEnabled) score += 1;\r\n  if (settings.normalize) score += 1;\r\n  \r\n  if (score >= 8) return 'Studio';\r\n  if (score >= 6) return 'High';\r\n  if (score >= 4) return 'Good';\r\n  return 'Standard';\r\n};\r\n\r\nexport const EnhancementSettings = ({ onEnhance, isProcessing, hasFiles, onSaveLocationChange }: EnhancementSettingsProps) => {\r\n  const [settings, setSettings] = useState<EnhancementSettings>({\r\n    targetBitrate: 320,\r\n    sampleRate: 44100,\r\n    noiseReduction: 50,\r\n    noiseReductionEnabled: false,\r\n    normalize: true,\r\n    normalizeLevel: -3,\r\n    bassBoost: 0,\r\n    trebleEnhancement: 0,\r\n    compression: 4,\r\n    compressionEnabled: false,\r\n    stereoWidening: 25,\r\n    stereoWideningEnabled: false,\r\n    outputFormat: 'mp3',\r\n    gainAdjustment: 0,\r\n    enableEQ: true,\r\n    eqBands: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n  });\r\n\r\n  const [showAdvanced, setShowAdvanced] = useState(false);\r\n\r\n  const estimatedFileSize = useMemo(() => {\r\n    const baseSize = 40;\r\n    const sampleRateMultiplier = settings.sampleRate / 44100;\r\n    const bitrateMultiplier = settings.targetBitrate / 320;\r\n    \r\n    let formatMultiplier = 1;\r\n    switch (settings.outputFormat) {\r\n      case 'flac': formatMultiplier = 1.8; break;\r\n      case 'wav': formatMultiplier = 2.5; break;\r\n      case 'ogg': formatMultiplier = 0.9; break;\r\n      default: formatMultiplier = 1;\r\n    }\r\n    \r\n    let effectsMultiplier = 1;\r\n    if (settings.enableEQ) {\r\n      const eqIntensity = settings.eqBands.reduce((sum, band) => sum + Math.abs(band), 0) / 10;\r\n      effectsMultiplier *= (1 + eqIntensity * 0.05);\r\n    }\r\n    if (settings.noiseReductionEnabled) effectsMultiplier *= 1.02;\r\n    if (settings.compressionEnabled) effectsMultiplier *= 0.95;\r\n    if (settings.normalize) effectsMultiplier *= 1.01;\r\n    \r\n    const gainMultiplier = 1 + Math.abs(settings.gainAdjustment) * 0.01;\r\n    const estimatedSize = baseSize * sampleRateMultiplier * bitrateMultiplier * formatMultiplier * effectsMultiplier * gainMultiplier;\r\n    \r\n    return {\r\n      size: estimatedSize.toFixed(1),\r\n      quality: getQualityLevel(settings),\r\n      improvement: Math.max(1, estimatedSize / baseSize).toFixed(1)\r\n    };\r\n  }, [settings]);\r\n\r\n  const handleSettingChange = (key: keyof EnhancementSettings, value: any) => {\r\n    setSettings(prev => ({ ...prev, [key]: value }));\r\n  };\r\n\r\n  const handleEQBandChange = (bandIndex: number, value: number) => {\r\n    const newEqBands = [...settings.eqBands];\r\n    newEqBands[bandIndex] = value;\r\n    setSettings(prev => ({ ...prev, eqBands: newEqBands }));\r\n  };\r\n\r\n  const resetEQ = () => {\r\n    setSettings(prev => ({ ...prev, eqBands: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0] }));\r\n  };\r\n\r\n  const handleEnhance = () => {\r\n    const enhancementSettings = {\r\n      ...settings,\r\n      sampleRates: [settings.sampleRate]\r\n    };\r\n    onEnhance(enhancementSettings);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <SaveLocationSelector \r\n        onLocationSelected={onSaveLocationChange || (() => {})}\r\n        currentLocation=\"Downloads folder\"\r\n      />\r\n\r\n      {/* Advanced Settings - Now on top */}\r\n      <Card className=\"bg-slate-800/50 border-slate-700\">\r\n        <CardHeader className=\"pb-3\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <CardTitle className=\"flex items-center gap-2 text-white text-lg\">\r\n              <Settings className=\"h-4 w-4\" />\r\n              Advanced Settings\r\n            </CardTitle>\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={() => setShowAdvanced(!showAdvanced)}\r\n              className=\"bg-slate-700 border-slate-600 hover:bg-slate-600 text-white\"\r\n            >\r\n              {showAdvanced ? 'Hide' : 'Show'} Advanced\r\n            </Button>\r\n          </div>\r\n          <p className=\"text-slate-400 text-sm\">\r\n            Fine-tune output format, quality settings, and equalizer\r\n          </p>\r\n        </CardHeader>\r\n        {showAdvanced && (\r\n          <CardContent className=\"pt-0\">\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6\">\r\n              <Card className=\"bg-slate-900/50 border-slate-600\">\r\n                <CardHeader className=\"pb-3\">\r\n                  <CardTitle className=\"flex items-center gap-2 text-white text-base\">\r\n                    <Settings className=\"h-4 w-4\" />\r\n                    Output Settings\r\n                  </CardTitle>\r\n                </CardHeader>\r\n                <CardContent className=\"pt-0\">\r\n                  <BasicSettings \r\n                    settings={settings}\r\n                    onSettingChange={handleSettingChange}\r\n                    estimatedFileSize={estimatedFileSize}\r\n                  />\r\n                </CardContent>\r\n              </Card>\r\n\r\n              <Card className=\"bg-slate-900/50 border-slate-600\">\r\n                <CardHeader className=\"pb-3\">\r\n                  <CardTitle className=\"flex items-center gap-2 text-white text-base\">\r\n                    <Filter className=\"h-4 w-4\" />\r\n                    Processing Options\r\n                  </CardTitle>\r\n                </CardHeader>\r\n                <CardContent className=\"pt-0\">\r\n                  <AudioProcessingSettings \r\n                    settings={settings}\r\n                    onSettingChange={handleSettingChange}\r\n                  />\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n\r\n            <Card className=\"bg-slate-900/50 border-slate-600\">\r\n              <CardHeader className=\"pb-3\">\r\n                <CardTitle className=\"flex items-center gap-2 text-white text-base\">\r\n                  <Sliders className=\"h-4 w-4\" />\r\n                  Equalizer & Presets\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"pt-0\">\r\n                <CompactEqualizerWithPresets \r\n                  settings={settings}\r\n                  onSettingChange={handleSettingChange}\r\n                  onEQBandChange={handleEQBandChange}\r\n                  onResetEQ={resetEQ}\r\n                />\r\n              </CardContent>\r\n            </Card>\r\n          </CardContent>\r\n        )}\r\n      </Card>\r\n\r\n      {/* Simple Audio Enhancer - Now below advanced settings */}\r\n      <SimpleAudioEnhancer\r\n        settings={settings}\r\n        onSettingChange={handleSettingChange}\r\n        onEnhance={handleEnhance}\r\n        isProcessing={isProcessing}\r\n        hasFiles={hasFiles}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\Equalizer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ExportHistory.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1465,1468],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1465,1468],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { useState } from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { Download, History, FileCheck, Copy, Trash2 } from 'lucide-react';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { EnhancementHistoryEntry } from '@/hooks/useEnhancementHistory';\r\n\r\ninterface ExportHistoryProps {\r\n  history: EnhancementHistoryEntry[];\r\n  onClearHistory?: () => void;\r\n}\r\n\r\nexport const ExportHistory = ({ history = [], onClearHistory }: ExportHistoryProps) => {\r\n  const { toast } = useToast();\r\n  const [activeTab, setActiveTab] = useState('list');\r\n  \r\n  // Sort history by most recent first\r\n  const sortedHistory = [...history].sort((a, b) => \r\n    b.timestamp.getTime() - a.timestamp.getTime()\r\n  );\r\n\r\n  const formatDate = (date: Date) => {\r\n    return new Intl.DateTimeFormat('en-US', {\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    }).format(date);\r\n  };\r\n\r\n  const formatFileSize = (bytes: number) => {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n  };\r\n\r\n  const copySettingsToClipboard = (settings: Record<string, any>) => {\r\n    navigator.clipboard.writeText(JSON.stringify(settings, null, 2));\r\n    toast({\r\n      title: \"Settings copied\",\r\n      description: \"Enhancement settings have been copied to clipboard\",\r\n    });\r\n  };\r\n\r\n  // Create mock data if no history exists\r\n  const mockHistory: EnhancementHistoryEntry[] = history.length === 0 ? [\r\n    {\r\n      id: '1',\r\n      fileName: 'Enhanced_Song.mp3',\r\n      timestamp: new Date(Date.now() - 1000 * 60 * 10),\r\n      settings: {\r\n        targetBitrate: 320,\r\n        noiseReduction: true,\r\n        normalization: true,\r\n        outputFormat: 'mp3'\r\n      },\r\n      originalSize: 3200000,\r\n      enhancedSize: 4580000,\r\n      status: 'success'\r\n    }\r\n  ] : [];\r\n\r\n  const combinedHistory = [...sortedHistory, ...mockHistory];\r\n\r\n  return (\r\n    <Card className=\"bg-slate-800/50 border-slate-700\">\r\n      <CardHeader className=\"flex flex-row items-center justify-between\">\r\n        <CardTitle className=\"flex items-center gap-2 text-white\">\r\n          <History className=\"h-5 w-5\" />\r\n          Enhancement History\r\n        </CardTitle>\r\n        \r\n        <Button\r\n          variant=\"ghost\"\r\n          size=\"sm\"\r\n          onClick={onClearHistory}\r\n          className=\"text-slate-400 hover:text-slate-300\"\r\n        >\r\n          <Trash2 className=\"h-4 w-4 mr-1\" />\r\n          Clear\r\n        </Button>\r\n      </CardHeader>\r\n      \r\n      <CardContent>\r\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\r\n          <TabsList className=\"grid w-full grid-cols-2 bg-slate-700\">\r\n            <TabsTrigger value=\"list\" className=\"data-[state=active]:bg-blue-600\">\r\n              List\r\n            </TabsTrigger>\r\n            <TabsTrigger value=\"stats\" className=\"data-[state=active]:bg-blue-600\">\r\n              Stats\r\n            </TabsTrigger>\r\n          </TabsList>\r\n          \r\n          <TabsContent value=\"list\" className=\"mt-4\">\r\n            {combinedHistory.length === 0 ? (\r\n              <div className=\"text-center py-8\">\r\n                <FileCheck className=\"h-10 w-10 text-slate-500 mx-auto mb-2\" />\r\n                <p className=\"text-slate-400\">No enhancement history yet</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-3\">\r\n                {combinedHistory.map((item) => (\r\n                  <div key={item.id} className=\"bg-slate-700/50 rounded p-3\">\r\n                    <div className=\"flex justify-between items-start\">\r\n                      <div>\r\n                        <h4 className=\"font-medium text-white truncate\">{item.fileName}</h4>\r\n                        <p className=\"text-xs text-slate-400 mt-1\">\r\n                          Status: {item.status === 'success' ? ' Enhanced' : ' Failed'}\r\n                        </p>\r\n                      </div>\r\n                      <span className=\"text-xs text-slate-500\">\r\n                        {formatDate(item.timestamp)}\r\n                      </span>\r\n                    </div>\r\n                    \r\n                    <div className=\"flex justify-between items-center mt-3\">\r\n                      <span className=\"text-xs text-slate-400\">\r\n                        {formatFileSize(item.originalSize)}  {formatFileSize(item.enhancedSize)}\r\n                      </span>\r\n                      \r\n                      <div className=\"flex items-center gap-2\">\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"sm\"\r\n                          className=\"h-7 text-blue-400 hover:text-blue-300\"\r\n                          onClick={() => copySettingsToClipboard(item.settings)}\r\n                        >\r\n                          <Copy className=\"h-3 w-3 mr-1\" />\r\n                          Settings\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </TabsContent>\r\n          \r\n          <TabsContent value=\"stats\" className=\"mt-4\">\r\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n              <div className=\"bg-slate-700/50 rounded p-3 text-center\">\r\n                <p className=\"text-sm text-slate-400\">Total Files</p>\r\n                <p className=\"text-2xl font-bold text-white\">{combinedHistory.length}</p>\r\n              </div>\r\n              \r\n              <div className=\"bg-slate-700/50 rounded p-3 text-center\">\r\n                <p className=\"text-sm text-slate-400\">Total Size</p>\r\n                <p className=\"text-2xl font-bold text-white\">\r\n                  {formatFileSize(combinedHistory.reduce((total, item) => total + item.enhancedSize, 0))}\r\n                </p>\r\n              </div>\r\n              \r\n              <div className=\"bg-slate-700/50 rounded p-3 text-center\">\r\n                <p className=\"text-sm text-slate-400\">Success Rate</p>\r\n                <p className=\"text-2xl font-bold text-white\">\r\n                  {Math.round((combinedHistory.filter(item => item.status === 'success').length / combinedHistory.length) * 100)}%\r\n                </p>\r\n              </div>\r\n              \r\n              <div className=\"bg-slate-700/50 rounded p-3 text-center\">\r\n                <p className=\"text-sm text-slate-400\">Avg Enhancement</p>\r\n                <p className=\"text-2xl font-bold text-white\">\r\n                  {Math.round(combinedHistory.reduce((total, item) => total + (item.enhancedSize / item.originalSize), 0) / combinedHistory.length * 100)}%\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </TabsContent>\r\n        </Tabs>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\FFmpegReference.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[469,472],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[469,472],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState } from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Terminal, Copy, ExternalLink } from 'lucide-react';\r\nimport { generateFFmpegCommand, professionalPresets } from '@/utils/audioEnhancement';\r\nimport { useToast } from '@/hooks/use-toast';\r\n\r\ninterface FFmpegReferenceProps {\r\n  settings: any;\r\n  fileName?: string;\r\n}\r\n\r\nexport const FFmpegReference = ({ settings, fileName = 'input.wav' }: FFmpegReferenceProps) => {\r\n  const [showCommands, setShowCommands] = useState(false);\r\n  const { toast } = useToast();\r\n  \r\n  const outputFileName = `enhanced_${fileName.replace(/\\.[^.]+$/, '')}.${settings.outputFormat}`;\r\n  const ffmpegCommand = generateFFmpegCommand(fileName, outputFileName, settings);\r\n  \r\n  const copyToClipboard = (text: string) => {\r\n    navigator.clipboard.writeText(text);\r\n    toast({\r\n      title: \"Copied to clipboard\",\r\n      description: \"FFmpeg command copied successfully\"\r\n    });\r\n  };\r\n  \r\n  const professionalCommands = Object.entries(professionalPresets).map(([name, preset]) => ({\r\n    name,\r\n    command: generateFFmpegCommand(fileName, `${name.toLowerCase().replace(/\\s+/g, '_')}_${outputFileName}`, preset)\r\n  }));\r\n  \r\n  return (\r\n    <Card className=\"bg-slate-800/50 border-slate-700\">\r\n      <CardHeader className=\"pb-3\">\r\n        <CardTitle className=\"flex items-center gap-2 text-white text-lg\">\r\n          <Terminal className=\"h-4 w-4\" />\r\n          Professional Audio Enhancement Reference\r\n        </CardTitle>\r\n      </CardHeader>\r\n      <CardContent className=\"pt-0\">\r\n        <div className=\"space-y-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <p className=\"text-sm text-slate-400\">\r\n              Use these FFmpeg commands for professional-grade audio enhancement on your local machine.\r\n            </p>\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={() => setShowCommands(!showCommands)}\r\n              className=\"bg-slate-700 border-slate-600 hover:bg-slate-600 text-white\"\r\n            >\r\n              {showCommands ? 'Hide' : 'Show'} Commands\r\n            </Button>\r\n          </div>\r\n          \r\n          {showCommands && (\r\n            <div className=\"space-y-4\">\r\n              {/* Current Settings Command */}\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <h4 className=\"text-sm font-medium text-white\">Current Settings</h4>\r\n                  <Badge variant=\"outline\" className=\"text-blue-400 border-blue-400\">\r\n                    {settings.outputFormat.toUpperCase()} | {settings.targetBitrate}kbps | {settings.sampleRate/1000}kHz\r\n                  </Badge>\r\n                </div>\r\n                <div className=\"relative\">\r\n                  <pre className=\"bg-slate-900 border border-slate-600 rounded-lg p-3 text-xs text-green-400 font-mono overflow-x-auto\">\r\n                    {ffmpegCommand}\r\n                  </pre>\r\n                  <Button\r\n                    size=\"icon\"\r\n                    variant=\"ghost\"\r\n                    className=\"absolute top-2 right-2 h-6 w-6 hover:bg-slate-700\"\r\n                    onClick={() => copyToClipboard(ffmpegCommand)}\r\n                  >\r\n                    <Copy className=\"h-3 w-3\" />\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Professional Presets */}\r\n              <div className=\"space-y-3\">\r\n                <h4 className=\"text-sm font-medium text-white\">Professional Presets</h4>\r\n                {professionalCommands.map(({ name, command }) => (\r\n                  <div key={name} className=\"space-y-2\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <span className=\"text-sm text-slate-300\">{name}</span>\r\n                      <Button\r\n                        size=\"sm\"\r\n                        variant=\"ghost\"\r\n                        className=\"h-6 px-2 text-xs hover:bg-slate-700\"\r\n                        onClick={() => copyToClipboard(command)}\r\n                      >\r\n                        <Copy className=\"h-3 w-3 mr-1\" />\r\n                        Copy\r\n                      </Button>\r\n                    </div>\r\n                    <pre className=\"bg-slate-900/80 border border-slate-700 rounded p-2 text-xs text-slate-300 font-mono overflow-x-auto\">\r\n                      {command}\r\n                    </pre>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n              \r\n              {/* Installation Instructions */}\r\n              <div className=\"mt-6 p-4 bg-blue-900/20 border border-blue-700/30 rounded-lg\">\r\n                <h4 className=\"text-sm font-medium text-blue-300 mb-2 flex items-center gap-2\">\r\n                  <ExternalLink className=\"h-4 w-4\" />\r\n                  FFmpeg Installation\r\n                </h4>\r\n                <div className=\"space-y-2 text-xs text-slate-300\">\r\n                  <p><strong>Windows:</strong> Download from <code>ffmpeg.org</code> or use <code>winget install FFmpeg</code></p>\r\n                  <p><strong>macOS:</strong> <code>brew install ffmpeg</code></p>\r\n                  <p><strong>Linux:</strong> <code>sudo apt install ffmpeg</code> (Ubuntu/Debian) or <code>sudo yum install ffmpeg</code> (CentOS/RHEL)</p>\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Parameter Explanations */}\r\n              <div className=\"mt-6 p-4 bg-purple-900/20 border border-purple-700/30 rounded-lg\">\r\n                <h4 className=\"text-sm font-medium text-purple-300 mb-2\">Key Parameters Explained</h4>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 text-xs text-slate-300\">\r\n                  <div>\r\n                    <code className=\"text-green-400\">afftdn</code> - Advanced FFT-based noise reduction\r\n                  </div>\r\n                  <div>\r\n                    <code className=\"text-green-400\">loudnorm</code> - EBU R128 loudness normalization\r\n                  </div>\r\n                  <div>\r\n                    <code className=\"text-green-400\">acompressor</code> - Dynamic range compression\r\n                  </div>\r\n                  <div>\r\n                    <code className=\"text-green-400\">alimiter</code> - Brick-wall limiting\r\n                  </div>\r\n                  <div>\r\n                    <code className=\"text-green-400\">equalizer</code> - Precise frequency adjustment\r\n                  </div>\r\n                  <div>\r\n                    <code className=\"text-green-400\">-ar</code> - Audio sample rate\r\n                  </div>\r\n                  <div>\r\n                    <code className=\"text-green-400\">-b:a</code> - Audio bitrate\r\n                  </div>\r\n                  <div>\r\n                    <code className=\"text-green-400\">-c:a</code> - Audio codec\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\FileInfoModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\FileUpload.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\FiveBandEqualizer.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1392,1395],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1392,1395],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'eqBands' and 'eqFrequencies'. Either include them or remove the dependency array.","line":98,"column":6,"nodeType":"ArrayExpression","endLine":98,"endColumn":29,"suggestions":[{"desc":"Update the dependencies array to be: [audioElement, enabled, eqBands, eqFrequencies]","fix":{"range":[3130,3153],"text":"[audioElement, enabled, eqBands, eqFrequencies]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useRef } from 'react';\r\nimport { Slider } from '@/components/ui/slider';\r\nimport { Button } from '@/components/ui/button';\r\n\r\ninterface FiveBandEqualizerProps {\r\n  eqBands: number[];\r\n  onEQBandChange: (bandIndex: number, value: number) => void;\r\n  onResetEQ: () => void;\r\n  enabled: boolean;\r\n  audioElement?: HTMLAudioElement | null;\r\n}\r\n\r\nexport const FiveBandEqualizer = ({ \r\n  eqBands, \r\n  onEQBandChange, \r\n  onResetEQ, \r\n  enabled,\r\n  audioElement \r\n}: FiveBandEqualizerProps) => {\r\n  const audioContextRef = useRef<AudioContext | null>(null);\r\n  const sourceRef = useRef<MediaElementAudioSourceNode | null>(null);\r\n  const filtersRef = useRef<BiquadFilterNode[]>([]);\r\n  const gainNodeRef = useRef<GainNode | null>(null);\r\n\r\n  // 5 band EQ frequencies\r\n  const eqFrequencies = [60, 250, 1000, 4000, 12000];\r\n  const bandLabels = ['Bass', 'Low Mid', 'Mid', 'High Mid', 'Treble'];\r\n  \r\n  const getEQColor = (index: number) => {\r\n    const colors = [\r\n      '#ff1744', '#ff6d00', '#ffc400', '#3d5afe', '#651fff'\r\n    ];\r\n    return colors[index];\r\n  };\r\n\r\n  // Initialize Web Audio API when audio element is available\r\n  useEffect(() => {\r\n    if (!audioElement || !enabled) return;\r\n\r\n    try {\r\n      // Create audio context if it doesn't exist\r\n      if (!audioContextRef.current) {\r\n        audioContextRef.current = new (window.AudioContext || (window as any).webkitAudioContext)();\r\n      }\r\n\r\n      const audioContext = audioContextRef.current;\r\n\r\n      // Create source node if it doesn't exist\r\n      if (!sourceRef.current) {\r\n        sourceRef.current = audioContext.createMediaElementSource(audioElement);\r\n      }\r\n\r\n      // Create 5 filters if they don't exist\r\n      if (filtersRef.current.length === 0) {\r\n        filtersRef.current = eqFrequencies.map((freq, index) => {\r\n          const filter = audioContext.createBiquadFilter();\r\n          filter.type = 'peaking';\r\n          filter.frequency.setValueAtTime(freq, audioContext.currentTime);\r\n          filter.Q.setValueAtTime(1, audioContext.currentTime);\r\n          filter.gain.setValueAtTime(eqBands[index] || 0, audioContext.currentTime);\r\n          return filter;\r\n        });\r\n\r\n        // Create gain node\r\n        gainNodeRef.current = audioContext.createGain();\r\n\r\n        // Connect the audio chain\r\n        let currentNode: AudioNode = sourceRef.current;\r\n        \r\n        filtersRef.current.forEach(filter => {\r\n          currentNode.connect(filter);\r\n          currentNode = filter;\r\n        });\r\n\r\n        currentNode.connect(gainNodeRef.current!);\r\n        gainNodeRef.current.connect(audioContext.destination);\r\n      }\r\n\r\n      // Resume audio context if suspended\r\n      if (audioContext.state === 'suspended') {\r\n        audioContext.resume();\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Error initializing Web Audio API:', error);\r\n    }\r\n\r\n    return () => {\r\n      // Cleanup on unmount\r\n      if (sourceRef.current) {\r\n        try {\r\n          sourceRef.current.disconnect();\r\n        } catch (e) {\r\n          console.warn('Error disconnecting source:', e);\r\n        }\r\n      }\r\n    };\r\n  }, [audioElement, enabled]);\r\n\r\n  // Update EQ bands when values change\r\n  useEffect(() => {\r\n    if (!enabled || filtersRef.current.length === 0 || !audioContextRef.current) return;\r\n\r\n    try {\r\n      filtersRef.current.forEach((filter, index) => {\r\n        if (filter && audioContextRef.current && eqBands[index] !== undefined) {\r\n          filter.gain.setValueAtTime(eqBands[index], audioContextRef.current.currentTime);\r\n        }\r\n      });\r\n    } catch (error) {\r\n      console.error('Error updating EQ bands:', error);\r\n    }\r\n  }, [eqBands, enabled]);\r\n\r\n  if (!enabled) return null;\r\n\r\n  return (\r\n    <div className=\"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 rounded-xl p-6 border-2 border-slate-600 shadow-2xl backdrop-blur-sm\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h4 className=\"text-lg font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent tracking-wide\">\r\n          5-Band Audio EQ\r\n        </h4>\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          onClick={onResetEQ}\r\n          className=\"h-8 text-xs bg-slate-800 border-slate-500 hover:bg-slate-700 text-white font-medium px-4 transition-all duration-300 hover:shadow-lg hover:shadow-blue-500/25\"\r\n        >\r\n          Reset\r\n        </Button>\r\n      </div>\r\n      \r\n      <div className=\"relative\">\r\n        <div className=\"flex justify-center items-end gap-6 py-4 px-4 border-2 border-slate-600 rounded-xl bg-gradient-to-t from-slate-800/60 to-slate-700/30 backdrop-blur-md shadow-inner\">\r\n          {eqFrequencies.map((freq, index) => (\r\n            <div key={freq} className=\"flex flex-col items-center group\">\r\n              <div className=\"h-32 flex items-end justify-center mb-3 relative\">\r\n                <div \r\n                  className=\"absolute inset-x-0 bottom-0 rounded-t-lg transition-all duration-500 ease-out\"\r\n                  style={{\r\n                    background: `linear-gradient(180deg, \r\n                      ${getEQColor(index)}80 0%, \r\n                      ${getEQColor(index)}40 50%, \r\n                      transparent 100%)`,\r\n                    boxShadow: (eqBands[index] || 0) !== 0 ? `0 0 20px ${getEQColor(index)}60, inset 0 0 10px ${getEQColor(index)}20` : 'none',\r\n                    borderRadius: '8px',\r\n                    border: `1px solid ${getEQColor(index)}40`\r\n                  }}\r\n                />\r\n                <div className=\"relative z-10\">\r\n                  <Slider\r\n                    orientation=\"vertical\"\r\n                    value={[eqBands[index] || 0]}\r\n                    onValueChange={([value]) => onEQBandChange(index, value)}\r\n                    min={-12}\r\n                    max={12}\r\n                    step={0.5}\r\n                    className=\"h-28 w-6 group-hover:scale-110 transition-all duration-300\"\r\n                    style={{\r\n                      '--slider-track': getEQColor(index),\r\n                      '--slider-range': getEQColor(index),\r\n                      '--slider-thumb': '#ffffff'\r\n                    } as React.CSSProperties}\r\n                  />\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"text-xs text-center mb-2 font-bold tracking-wider bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent\">\r\n                {bandLabels[index]}\r\n              </div>\r\n              \r\n              <div className=\"text-xs text-center mb-2 font-medium text-slate-300\">\r\n                {freq < 1000 ? `${freq}Hz` : `${freq/1000}k`}\r\n              </div>\r\n              \r\n              <div \r\n                className=\"text-xs text-center min-w-12 font-mono bg-slate-900/90 rounded-full px-2 py-1 border-2 transition-all duration-300 shadow-lg\"\r\n                style={{\r\n                  color: (eqBands[index] || 0) !== 0 ? getEQColor(index) : '#94a3b8',\r\n                  borderColor: (eqBands[index] || 0) !== 0 ? getEQColor(index) + '60' : '#475569',\r\n                  boxShadow: (eqBands[index] || 0) !== 0 ? `0 0 15px ${getEQColor(index)}40` : 'none'\r\n                }}\r\n              >\r\n                {(eqBands[index] || 0) > 0 ? '+' : ''}{(eqBands[index] || 0)}dB\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        \r\n        <div className=\"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-cyan-500/10 rounded-xl pointer-events-none animate-pulse\"></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\Footer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\FrequencyAnalyzer.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1324,1327],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1324,1327],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { useEffect, useRef } from 'react';\r\n\r\ninterface FrequencyAnalyzerProps {\r\n  audioUrl?: string;\r\n  playing?: boolean;\r\n  height?: number;\r\n}\r\n\r\nexport const FrequencyAnalyzer = ({ audioUrl, playing = false, height = 120 }: FrequencyAnalyzerProps) => {\r\n  const canvasRef = useRef<HTMLCanvasElement | null>(null);\r\n  const animationRef = useRef<number | null>(null);\r\n  const audioContextRef = useRef<AudioContext | null>(null);\r\n  const analyserRef = useRef<AnalyserNode | null>(null);\r\n  const sourceRef = useRef<MediaElementAudioSourceNode | null>(null);\r\n  const audioRef = useRef<HTMLAudioElement | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!audioUrl) return;\r\n\r\n    // Create audio element if it doesn't exist\r\n    if (!audioRef.current) {\r\n      audioRef.current = new Audio();\r\n    }\r\n    \r\n    audioRef.current.src = audioUrl;\r\n    audioRef.current.crossOrigin = 'anonymous';\r\n    \r\n    if (playing) {\r\n      audioRef.current.play().catch(err => console.error(\"Playback error:\", err));\r\n    } else {\r\n      audioRef.current.pause();\r\n    }\r\n\r\n    // Clean up and create new audio context\r\n    if (audioContextRef.current) {\r\n      sourceRef.current?.disconnect();\r\n      analyserRef.current?.disconnect();\r\n    }\r\n\r\n    // Create audio context\r\n    const AudioContext = window.AudioContext || (window as any).webkitAudioContext;\r\n    audioContextRef.current = new AudioContext();\r\n    analyserRef.current = audioContextRef.current.createAnalyser();\r\n    sourceRef.current = audioContextRef.current.createMediaElementSource(audioRef.current);\r\n    \r\n    // Connect audio graph\r\n    sourceRef.current.connect(analyserRef.current);\r\n    analyserRef.current.connect(audioContextRef.current.destination);\r\n    \r\n    // Configure analyzer\r\n    analyserRef.current.fftSize = 2048;\r\n    const bufferLength = analyserRef.current.frequencyBinCount;\r\n    const dataArray = new Uint8Array(bufferLength);\r\n\r\n    // Get canvas context and start drawing\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n    \r\n    const canvasCtx = canvas.getContext('2d');\r\n    if (!canvasCtx) return;\r\n\r\n    // Function to draw spectrum analyzer\r\n    const draw = () => {\r\n      if (!analyserRef.current || !canvasCtx) return;\r\n      \r\n      animationRef.current = requestAnimationFrame(draw);\r\n      \r\n      analyserRef.current.getByteFrequencyData(dataArray);\r\n      \r\n      canvasCtx.clearRect(0, 0, canvas.width, canvas.height);\r\n      \r\n      // Draw the spectrum\r\n      const barWidth = (canvas.width / bufferLength) * 8;\r\n      let x = 0;\r\n      \r\n      // Create gradient\r\n      const gradient = canvasCtx.createLinearGradient(0, 0, 0, canvas.height);\r\n      gradient.addColorStop(0, 'rgba(0, 200, 255, 1)');\r\n      gradient.addColorStop(0.5, 'rgba(0, 100, 255, 0.8)');\r\n      gradient.addColorStop(1, 'rgba(0, 50, 200, 0.6)');\r\n\r\n      for (let i = 0; i < bufferLength; i += 4) {\r\n        const barHeight = (dataArray[i] / 255) * canvas.height;\r\n        \r\n        canvasCtx.fillStyle = gradient;\r\n        canvasCtx.fillRect(x, canvas.height - barHeight, barWidth, barHeight);\r\n        \r\n        x += barWidth + 1;\r\n      }\r\n    };\r\n    \r\n    // Start the animation\r\n    draw();\r\n\r\n    return () => {\r\n      // Clean up\r\n      if (animationRef.current) {\r\n        cancelAnimationFrame(animationRef.current);\r\n      }\r\n      audioRef.current?.pause();\r\n    };\r\n  }, [audioUrl, playing]);\r\n\r\n  return (\r\n    <div className=\"w-full bg-slate-900/60 rounded-md p-2\">\r\n      <canvas \r\n        ref={canvasRef} \r\n        height={height} \r\n        className=\"w-full rounded\"\r\n      ></canvas>\r\n      <div className=\"flex justify-between text-xs text-slate-500 mt-1\">\r\n        <span>20 Hz</span>\r\n        <span>1 kHz</span>\r\n        <span>20 kHz</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\FunctionalEqualizer.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1388,1391],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1388,1391],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'eqBands' and 'eqFrequencies'. Either include them or remove the dependency array.","line":98,"column":6,"nodeType":"ArrayExpression","endLine":98,"endColumn":29,"suggestions":[{"desc":"Update the dependencies array to be: [audioElement, enabled, eqBands, eqFrequencies]","fix":{"range":[3119,3142],"text":"[audioElement, enabled, eqBands, eqFrequencies]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useEffect, useRef } from 'react';\r\nimport { Slider } from '@/components/ui/slider';\r\nimport { Button } from '@/components/ui/button';\r\n\r\ninterface FunctionalEqualizerProps {\r\n  eqBands: number[];\r\n  onEQBandChange: (bandIndex: number, value: number) => void;\r\n  onResetEQ: () => void;\r\n  enabled: boolean;\r\n  audioElement?: HTMLAudioElement | null;\r\n}\r\n\r\nexport const FunctionalEqualizer = ({ \r\n  eqBands, \r\n  onEQBandChange, \r\n  onResetEQ, \r\n  enabled,\r\n  audioElement \r\n}: FunctionalEqualizerProps) => {\r\n  const audioContextRef = useRef<AudioContext | null>(null);\r\n  const sourceRef = useRef<MediaElementAudioSourceNode | null>(null);\r\n  const filtersRef = useRef<BiquadFilterNode[]>([]);\r\n  const gainNodeRef = useRef<GainNode | null>(null);\r\n\r\n  const eqFrequencies = [31, 62, 125, 250, 500, 1000, 2000, 4000, 8000, 16000];\r\n  \r\n  const getEQColor = (index: number) => {\r\n    const colors = [\r\n      '#ff1744', '#ff6d00', '#ffc400', '#76ff03', '#00e676',\r\n      '#00e5ff', '#3d5afe', '#651fff', '#e91e63', '#ff3d00'\r\n    ];\r\n    return colors[index];\r\n  };\r\n\r\n  // Initialize Web Audio API when audio element is available\r\n  useEffect(() => {\r\n    if (!audioElement || !enabled) return;\r\n\r\n    try {\r\n      // Create audio context if it doesn't exist\r\n      if (!audioContextRef.current) {\r\n        audioContextRef.current = new (window.AudioContext || (window as any).webkitAudioContext)();\r\n      }\r\n\r\n      const audioContext = audioContextRef.current;\r\n\r\n      // Create source node if it doesn't exist\r\n      if (!sourceRef.current) {\r\n        sourceRef.current = audioContext.createMediaElementSource(audioElement);\r\n      }\r\n\r\n      // Create filters if they don't exist\r\n      if (filtersRef.current.length === 0) {\r\n        filtersRef.current = eqFrequencies.map((freq, index) => {\r\n          const filter = audioContext.createBiquadFilter();\r\n          filter.type = 'peaking';\r\n          filter.frequency.setValueAtTime(freq, audioContext.currentTime);\r\n          filter.Q.setValueAtTime(1, audioContext.currentTime);\r\n          filter.gain.setValueAtTime(eqBands[index], audioContext.currentTime);\r\n          return filter;\r\n        });\r\n\r\n        // Create gain node\r\n        gainNodeRef.current = audioContext.createGain();\r\n\r\n        // Connect the audio chain\r\n        let currentNode: AudioNode = sourceRef.current;\r\n        \r\n        filtersRef.current.forEach(filter => {\r\n          currentNode.connect(filter);\r\n          currentNode = filter;\r\n        });\r\n\r\n        currentNode.connect(gainNodeRef.current!);\r\n        gainNodeRef.current.connect(audioContext.destination);\r\n      }\r\n\r\n      // Resume audio context if suspended\r\n      if (audioContext.state === 'suspended') {\r\n        audioContext.resume();\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Error initializing Web Audio API:', error);\r\n    }\r\n\r\n    return () => {\r\n      // Cleanup on unmount\r\n      if (sourceRef.current) {\r\n        try {\r\n          sourceRef.current.disconnect();\r\n        } catch (e) {\r\n          console.warn('Error disconnecting source:', e);\r\n        }\r\n      }\r\n    };\r\n  }, [audioElement, enabled]);\r\n\r\n  // Update EQ bands when values change\r\n  useEffect(() => {\r\n    if (!enabled || filtersRef.current.length === 0 || !audioContextRef.current) return;\r\n\r\n    try {\r\n      filtersRef.current.forEach((filter, index) => {\r\n        if (filter && audioContextRef.current) {\r\n          filter.gain.setValueAtTime(eqBands[index], audioContextRef.current.currentTime);\r\n        }\r\n      });\r\n    } catch (error) {\r\n      console.error('Error updating EQ bands:', error);\r\n    }\r\n  }, [eqBands, enabled]);\r\n\r\n  if (!enabled) return null;\r\n\r\n  return (\r\n    <div className=\"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 rounded-xl p-6 border-2 border-slate-600 shadow-2xl backdrop-blur-sm\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h4 className=\"text-lg font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent tracking-wide\">\r\n          Live Audio EQ\r\n        </h4>\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          onClick={onResetEQ}\r\n          className=\"h-8 text-xs bg-slate-800 border-slate-500 hover:bg-slate-700 text-white font-medium px-4 transition-all duration-300 hover:shadow-lg hover:shadow-blue-500/25\"\r\n        >\r\n          Reset\r\n        </Button>\r\n      </div>\r\n      \r\n      <div className=\"relative\">\r\n        <div className=\"flex justify-center items-end gap-4 py-4 px-4 border-2 border-slate-600 rounded-xl bg-gradient-to-t from-slate-800/60 to-slate-700/30 backdrop-blur-md shadow-inner\">\r\n          {eqFrequencies.map((freq, index) => (\r\n            <div key={freq} className=\"flex flex-col items-center group\">\r\n              <div className=\"h-24 flex items-end justify-center mb-3 relative\">\r\n                <div \r\n                  className=\"absolute inset-x-0 bottom-0 rounded-t-lg transition-all duration-500 ease-out\"\r\n                  style={{\r\n                    background: `linear-gradient(180deg, \r\n                      ${getEQColor(index)}80 0%, \r\n                      ${getEQColor(index)}40 50%, \r\n                      transparent 100%)`,\r\n                    boxShadow: eqBands[index] !== 0 ? `0 0 20px ${getEQColor(index)}60, inset 0 0 10px ${getEQColor(index)}20` : 'none',\r\n                    borderRadius: '8px',\r\n                    border: `1px solid ${getEQColor(index)}40`\r\n                  }}\r\n                />\r\n                <div className=\"relative z-10\">\r\n                  <Slider\r\n                    orientation=\"vertical\"\r\n                    value={[eqBands[index]]}\r\n                    onValueChange={([value]) => onEQBandChange(index, value)}\r\n                    min={-12}\r\n                    max={12}\r\n                    step={0.5}\r\n                    className=\"h-20 w-6 group-hover:scale-110 transition-all duration-300\"\r\n                    style={{\r\n                      '--slider-track': getEQColor(index),\r\n                      '--slider-range': getEQColor(index),\r\n                      '--slider-thumb': '#ffffff'\r\n                    } as React.CSSProperties}\r\n                  />\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"text-xs text-center mb-2 font-bold tracking-wider bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent\">\r\n                {freq < 1000 ? `${freq}Hz` : `${freq/1000}k`}\r\n              </div>\r\n              \r\n              <div \r\n                className=\"text-xs text-center min-w-10 font-mono bg-slate-900/90 rounded-full px-2 py-1 border-2 transition-all duration-300 shadow-lg\"\r\n                style={{\r\n                  color: eqBands[index] !== 0 ? getEQColor(index) : '#94a3b8',\r\n                  borderColor: eqBands[index] !== 0 ? getEQColor(index) + '60' : '#475569',\r\n                  boxShadow: eqBands[index] !== 0 ? `0 0 15px ${getEQColor(index)}40` : 'none'\r\n                }}\r\n              >\r\n                {eqBands[index] > 0 ? '+' : ''}{eqBands[index]}dB\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        \r\n        <div className=\"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-cyan-500/10 rounded-xl pointer-events-none animate-pulse\"></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\Guide.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ID3TagEditor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\IntroAnimation.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\LanguageToggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\LevelLogo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\LevelTabs.tsx","messages":[{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":127,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":127,"endColumn":59,"suggestions":[{"messageId":"addBrackets","fix":{"range":[4651,4776],"text":"{ const bitrate = processingSettings.bitrate || 320;\r\n        estimated = (bitrate * 1000 * totalDuration) / 8;\r\n        break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":131,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":131,"endColumn":118,"suggestions":[{"messageId":"addBrackets","fix":{"range":[4806,4967],"text":"{ const wavSize = (processingSettings.sampleRate * processingSettings.bitDepth * channels * totalDuration) / 8;\r\n        estimated = wavSize * 0.6;\r\n        break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":141,"column":80,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":141,"endColumn":83,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5227,5230],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5227,5230],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":202,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":202,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7456,7459],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7456,7459],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":205,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":205,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7567,7570],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7567,7570],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useMemo } from 'react';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { LevelUpload } from '@/components/level/LevelUpload';\r\nimport { LevelTrackList } from '@/components/level/LevelTrackList';\r\nimport { DynamicOutputSettings } from '@/components/enhancement/DynamicOutputSettings';\r\nimport { InteractiveProcessingOptions } from '@/components/enhancement/InteractiveProcessingOptions';\r\nimport { FiveBandEqualizer } from '@/components/enhancement/FiveBandEqualizer';\r\nimport { AdvancedAudioEnhancement } from '@/components/enhancement/AdvancedAudioEnhancement';\r\nimport { FileInfoModal } from '@/components/FileInfoModal';\r\nimport { AudioFile } from '@/types/audio';\r\nimport { ProcessingSettings } from '@/utils/audioProcessor';\r\nimport { BarChart3, Settings, Upload, Zap, Package, Music } from 'lucide-react';\r\nimport { useLanguage } from '@/contexts/LanguageContext';\r\nimport { IndividualModeQueue } from '@/components/enhancement/IndividualModeQueue';\r\nimport { AIMasteringTab } from '@/components/ai-mastering/AIMasteringTab';\r\nimport { LevelMediaPlayer } from '@/components/media-player/LevelMediaPlayer';\r\nimport { toast } from 'sonner';\r\n\r\ninterface LevelTabsProps {\r\n  audioFiles: AudioFile[];\r\n  enhancedHistory: AudioFile[];\r\n  onFilesUploaded: (files: AudioFile[]) => void;\r\n  onDownload: (file: AudioFile) => void;\r\n  onConvert: (file: AudioFile, targetFormat: 'mp3' | 'wav' | 'flac') => void;\r\n  onDownloadAll: () => void;\r\n  onClearDownloaded: () => void;\r\n  onClearAll: () => void;\r\n  onDelete: (fileId: string) => void;\r\n  onEnhanceFiles: (settings: ProcessingSettings) => void;\r\n  eqBands: number[];\r\n  onEQBandChange: (bandIndex: number, value: number) => void;\r\n  onResetEQ: () => void;\r\n  eqEnabled: boolean;\r\n  setEqEnabled: (enabled: boolean) => void;\r\n}\r\n\r\nexport const LevelTabs = ({\r\n  audioFiles,\r\n  enhancedHistory,\r\n  onFilesUploaded,\r\n  onDownload,\r\n  onConvert,\r\n  onDownloadAll,\r\n  onClearDownloaded,\r\n  onClearAll,\r\n  onDelete,\r\n  onEnhanceFiles,\r\n  eqBands,\r\n  onEQBandChange,\r\n  onResetEQ,\r\n  eqEnabled,\r\n  setEqEnabled\r\n}: LevelTabsProps) => {\r\n  const { t, language } = useLanguage();\r\n  const [activeTab, setActiveTab] = useState('level');\r\n  const [autoPlayFile, setAutoPlayFile] = useState<AudioFile | null>(null);\r\n  const [selectedFilesForIndividual, setSelectedFilesForIndividual] = useState<string[]>([]);\r\n  const [fileInfoModal, setFileInfoModal] = useState<{\r\n    isOpen: boolean;\r\n    file: AudioFile | null;\r\n  }>({\r\n    isOpen: false,\r\n    file: null\r\n  });\r\n\r\n  // Processing settings state\r\n  const [processingSettings, setProcessingSettings] = useState<ProcessingSettings>({\r\n    outputFormat: 'wav',\r\n    sampleRate: 44100,\r\n    bitDepth: 16,\r\n    bitrate: 320,\r\n    noiseReduction: 50,\r\n    noiseReductionEnabled: false,\r\n    normalize: true,\r\n    normalizeLevel: -0.3,\r\n    bassBoost: 0,\r\n    trebleEnhancement: 0,\r\n    compression: 4,\r\n    compressionEnabled: false,\r\n    compressionThreshold: -3,\r\n    compressionRatio: '2:1',\r\n    gainAdjustment: 0,\r\n    stereoWidening: 25,\r\n    stereoWideningEnabled: false,\r\n    batchMode: false,\r\n    eqBands: eqBands,\r\n    enableEQ: eqEnabled\r\n  });\r\n\r\n  const handlePlayInMediaPlayer = (file: AudioFile) => {\r\n    setAutoPlayFile(file);\r\n    setActiveTab('media-player');\r\n  };\r\n\r\n  // Calculate estimated total output size\r\n  const estimatedTotalSize = useMemo(() => {\r\n    if (audioFiles.length === 0) return 0;\r\n\r\n    const filesToCalculate = processingSettings.batchMode\r\n      ? audioFiles\r\n      : audioFiles.filter(file => selectedFilesForIndividual.includes(file.id));\r\n\r\n    if (filesToCalculate.length === 0) return 0;\r\n\r\n    const totalDuration = filesToCalculate.reduce((acc, file) => acc + (file.duration || 0), 0);\r\n    const totalOriginalSize = filesToCalculate.reduce((acc, file) => acc + file.size, 0);\r\n\r\n    if (totalDuration === 0) {\r\n      const format = processingSettings.outputFormat.toLowerCase();\r\n      if (format === 'wav') return totalOriginalSize * 10;\r\n      if (format === 'flac') return totalOriginalSize * 6;\r\n      return totalOriginalSize;\r\n    }\r\n\r\n    const channels = 2;\r\n    const format = processingSettings.outputFormat.toLowerCase();\r\n    let estimated = 0;\r\n\r\n    switch (format) {\r\n      case 'wav':\r\n        estimated = (processingSettings.sampleRate * processingSettings.bitDepth * channels * totalDuration) / 8;\r\n        break;\r\n      case 'mp3':\r\n        const bitrate = processingSettings.bitrate || 320;\r\n        estimated = (bitrate * 1000 * totalDuration) / 8;\r\n        break;\r\n      case 'flac':\r\n        const wavSize = (processingSettings.sampleRate * processingSettings.bitDepth * channels * totalDuration) / 8;\r\n        estimated = wavSize * 0.6;\r\n        break;\r\n      default:\r\n        estimated = totalOriginalSize;\r\n    }\r\n\r\n    return Math.round(estimated * 1.015);\r\n  }, [audioFiles, selectedFilesForIndividual, processingSettings]);\r\n\r\n  const handleProcessingSettingChange = (key: keyof ProcessingSettings, value: any) => {\r\n    setProcessingSettings(prev => {\r\n      const newSettings = { ...prev, [key]: value };\r\n      if (key === 'batchMode' && value === true && prev.batchMode === false) {\r\n        toast.info(language === 'ES' ? 'Modo por Lotes Activado' : 'Batch Mode Activated', {\r\n          description: language === 'ES'\r\n            ? 'Todos los archivos sern procesados con la misma configuracin'\r\n            : 'All files will be processed with the same settings'\r\n        });\r\n      }\r\n      return newSettings;\r\n    });\r\n  };\r\n\r\n  const handleResetProcessingOptions = () => {\r\n    setProcessingSettings(prev => ({\r\n      ...prev,\r\n      noiseReduction: 50,\r\n      noiseReductionEnabled: false,\r\n      normalize: true,\r\n      normalizeLevel: -0.3,\r\n      compression: 4,\r\n      compressionEnabled: false,\r\n      compressionThreshold: -3,\r\n      compressionRatio: '2:1',\r\n      stereoWidening: 25,\r\n      stereoWideningEnabled: false,\r\n      batchMode: false\r\n    }));\r\n  };\r\n\r\n  const handleFilesUploaded = async (files: AudioFile[]) => {\r\n    if (files.length > 5) {\r\n      toast.error('Please upload maximum 5 files at a time for optimal performance');\r\n      return;\r\n    }\r\n\r\n    const toastId = toast.loading(`Analyzing ${files.length} file${files.length > 1 ? 's' : ''}...`, {\r\n      description: 'Detecting BPM and key signatures',\r\n    });\r\n\r\n    const { detectKeyFromFile } = await import('@/utils/keyDetector');\r\n    const { detectBPMFromFile } = await import('@/utils/bpmDetector');\r\n\r\n    const filesWithAnalysis = await Promise.all(\r\n      files.map(async (file, idx) => {\r\n        let harmonicKey = 'N/A';\r\n        let bpm: number | undefined = undefined;\r\n\r\n        const [keyResult, bpmResult] = await Promise.allSettled([\r\n          Promise.race([\r\n            detectKeyFromFile(file.originalFile),\r\n            new Promise((_, reject) => setTimeout(() => reject(new Error('Key timeout')), 5000))\r\n          ]),\r\n          Promise.race([\r\n            detectBPMFromFile(file.originalFile),\r\n            new Promise((_, reject) => setTimeout(() => reject(new Error('BPM timeout')), 5000))\r\n          ])\r\n        ]);\r\n\r\n        if (keyResult.status === 'fulfilled') {\r\n          harmonicKey = (keyResult.value as any).camelot;\r\n        }\r\n        if (bpmResult.status === 'fulfilled') {\r\n          bpm = (bpmResult.value as any).bpm;\r\n        }\r\n\r\n        return { ...file, harmonicKey, bpm };\r\n      })\r\n    );\r\n\r\n    const detectedBPM = filesWithAnalysis.filter(f => f.bpm).length;\r\n    const detectedKey = filesWithAnalysis.filter(f => f.harmonicKey && f.harmonicKey !== 'N/A').length;\r\n\r\n    if (detectedKey === 0 && detectedBPM === 0) {\r\n      toast.error('Analysis failed', { id: toastId, description: 'Could not detect BPM or Key.' });\r\n    } else {\r\n      toast.success('Analysis complete!', { id: toastId, description: `BPM: ${detectedBPM}/${files.length}  Key: ${detectedKey}/${files.length}` });\r\n    }\r\n\r\n    onFilesUploaded(filesWithAnalysis);\r\n  };\r\n\r\n  const handleToggleFileForIndividual = (fileId: string) => {\r\n    setSelectedFilesForIndividual(prev =>\r\n      prev.includes(fileId) ? prev.filter(id => id !== fileId) : [...prev, fileId]\r\n    );\r\n  };\r\n\r\n  const handleClearSelectedFiles = () => setSelectedFilesForIndividual([]);\r\n\r\n  const handleEnhanceFiles = async () => {\r\n    const filesToProcess = processingSettings.batchMode\r\n      ? audioFiles\r\n      : audioFiles.filter(file => selectedFilesForIndividual.includes(file.id));\r\n\r\n    if (filesToProcess.length === 0) {\r\n      toast.error(language === 'ES' ? 'Seleccione al menos un archivo' : 'Please select at least one file');\r\n      return;\r\n    }\r\n\r\n    if (filesToProcess.length >= 2) {\r\n      if (!window.confirm(language === 'ES' ? `Procesar ${filesToProcess.length} archivos?` : `Process ${filesToProcess.length} files?`)) return;\r\n    }\r\n\r\n    const finalSettings = {\r\n      ...processingSettings,\r\n      eqBands: eqBands,\r\n      enableEQ: eqEnabled,\r\n      fileIdsToProcess: filesToProcess.map(f => f.id)\r\n    };\r\n\r\n    onEnhanceFiles(finalSettings);\r\n    setSelectedFilesForIndividual([]);\r\n    setActiveTab('level');\r\n    toast.success(language === 'ES' ? 'Procesamiento iniciado' : 'Processing started');\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\r\n        <TabsList className=\"grid w-full grid-cols-4 bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 dark:from-black dark:via-slate-900 dark:to-black border-2 border-slate-600 dark:border-slate-700 p-1 rounded-xl shadow-xl\">\r\n          <TabsTrigger value=\"level\" className=\"flex items-center gap-2 data-[state=active]:bg-gradient-to-r data-[state=active]:from-cyan-500 data-[state=active]:via-blue-500 data-[state=active]:to-purple-500 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-cyan-500/50 data-[state=active]:scale-105 transition-all duration-300 font-bold rounded-3xl\">\r\n            <BarChart3 className=\"h-5 w-5\" />\r\n            <span className=\"text-lg text-blue-50\">Level</span>\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"enhance\" className=\"flex items-center gap-2 data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-500 data-[state=active]:via-pink-500 data-[state=active]:to-orange-500 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-purple-500/50 data-[state=active]:scale-105 transition-all duration-300 font-bold rounded-3xl\">\r\n            <Settings className=\"h-5 w-5\" />\r\n            <span className=\"text-lg text-cyan-50\">{t('button.enhance')}</span>\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"ai-mastering\" className=\"flex items-center gap-2 data-[state=active]:bg-gradient-to-r data-[state=active]:from-cyan-500 data-[state=active]:via-purple-500 data-[state=active]:to-pink-500 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-purple-500/50 data-[state=active]:scale-105 transition-all duration-300 font-bold rounded-3xl\">\r\n            <Zap className=\"h-5 w-5\" />\r\n            <span className=\"text-lg text-cyan-50\">AI Mastering</span>\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"media-player\" className=\"flex items-center gap-2 data-[state=active]:bg-gradient-to-r data-[state=active]:from-green-500 data-[state=active]:via-teal-500 data-[state=active]:to-cyan-500 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-green-500/50 data-[state=active]:scale-105 transition-all duration-300 font-bold rounded-3xl\">\r\n            <Music className=\"h-5 w-5\" />\r\n            <span className=\"text-lg text-green-50\">Media Player</span>\r\n          </TabsTrigger>\r\n        </TabsList>\r\n\r\n        <TabsContent value=\"level\" className={`space-y-8 ${activeTab !== 'level' ? 'hidden' : ''}`}>\r\n          <div className=\"flex flex-col items-center justify-center min-h-[400px] w-full max-w-5xl mx-auto\">\r\n            <div className=\"w-full mb-8\">\r\n              <LevelUpload onFilesUploaded={handleFilesUploaded} />\r\n            </div>\r\n            <div className=\"w-full\">\r\n              <LevelTrackList\r\n                files={[...audioFiles, ...enhancedHistory]}\r\n                onPlay={handlePlayInMediaPlayer}\r\n                onDownload={onDownload}\r\n                onDelete={onDelete}\r\n                onClearAll={onClearAll}\r\n                onConvert={onConvert}\r\n              />\r\n            </div>\r\n          </div>\r\n        </TabsContent>\r\n        <TabsContent value=\"enhance\" className={`space-y-6 ${activeTab !== 'enhance' ? 'hidden' : ''}`}>\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full\">\r\n            {/* Left Column: Main Controls */}\r\n            <div className=\"lg:col-span-2 space-y-6\">\r\n              {/* Advanced Audio Enhancement Section */}\r\n              <AdvancedAudioEnhancement\r\n                audioFiles={processingSettings.batchMode ? audioFiles : audioFiles.filter(f => selectedFilesForIndividual.includes(f.id))}\r\n                processingSettings={processingSettings}\r\n                estimatedTotalSize={estimatedTotalSize}\r\n                onEnhance={handleEnhanceFiles}\r\n                isProcessing={false}\r\n              />\r\n\r\n              {/* File List / Individual Queue */}\r\n              {!processingSettings.batchMode && audioFiles.length > 0 && (\r\n                <IndividualModeQueue\r\n                  files={audioFiles}\r\n                  selectedFiles={selectedFilesForIndividual}\r\n                  onToggleFile={handleToggleFileForIndividual}\r\n                  onClearAll={handleClearSelectedFiles}\r\n                />\r\n              )}\r\n\r\n              {/* EQ Section */}\r\n              <FiveBandEqualizer\r\n                eqBands={eqBands}\r\n                onEQBandChange={onEQBandChange}\r\n                onResetEQ={onResetEQ}\r\n                enabled={eqEnabled}\r\n                onEnabledChange={setEqEnabled}\r\n              />\r\n            </div>\r\n\r\n            {/* Right Column: Settings & Actions */}\r\n            <div className=\"space-y-6 flex flex-col h-full\">\r\n              <div className=\"space-y-6 flex-1\">\r\n                <Card className=\"bg-slate-900/90 border-slate-800\">\r\n                  <CardHeader className=\"pb-2\">\r\n                    <CardTitle className=\"text-lg font-bold text-slate-200\">Output Settings</CardTitle>\r\n                  </CardHeader>\r\n                  <CardContent>\r\n                    <DynamicOutputSettings\r\n                      outputFormat={processingSettings.outputFormat}\r\n                      sampleRate={processingSettings.sampleRate}\r\n                      bitDepth={processingSettings.bitDepth}\r\n                      bitrate={processingSettings.bitrate}\r\n                      onOutputFormatChange={format => handleProcessingSettingChange('outputFormat', format)}\r\n                      onSampleRateChange={rate => handleProcessingSettingChange('sampleRate', rate)}\r\n                      onBitDepthChange={depth => handleProcessingSettingChange('bitDepth', depth)}\r\n                      onBitrateChange={rate => handleProcessingSettingChange('bitrate', rate)}\r\n                    />\r\n                  </CardContent>\r\n                </Card>\r\n\r\n                <InteractiveProcessingOptions\r\n                  noiseReduction={processingSettings.noiseReduction}\r\n                  noiseReductionEnabled={processingSettings.noiseReductionEnabled}\r\n                  normalize={processingSettings.normalize}\r\n                  normalizeLevel={processingSettings.normalizeLevel}\r\n                  compression={processingSettings.compression}\r\n                  compressionEnabled={processingSettings.compressionEnabled}\r\n                  compressionThreshold={processingSettings.compressionThreshold}\r\n                  compressionRatio={processingSettings.compressionRatio}\r\n                  stereoWidening={processingSettings.stereoWidening}\r\n                  stereoWideningEnabled={processingSettings.stereoWideningEnabled}\r\n                  batchMode={processingSettings.batchMode}\r\n                  onNoiseReductionChange={value => handleProcessingSettingChange('noiseReduction', value)}\r\n                  onNoiseReductionEnabledChange={enabled => handleProcessingSettingChange('noiseReductionEnabled', enabled)}\r\n                  onNormalizeChange={enabled => handleProcessingSettingChange('normalize', enabled)}\r\n                  onNormalizeLevelChange={level => handleProcessingSettingChange('normalizeLevel', level)}\r\n                  onCompressionChange={value => handleProcessingSettingChange('compression', value)}\r\n                  onCompressionEnabledChange={enabled => handleProcessingSettingChange('compressionEnabled', enabled)}\r\n                  onCompressionThresholdChange={value => handleProcessingSettingChange('compressionThreshold', value)}\r\n                  onCompressionRatioChange={ratio => handleProcessingSettingChange('compressionRatio', ratio)}\r\n                  onStereoWideningChange={value => handleProcessingSettingChange('stereoWidening', value)}\r\n                  onStereoWideningEnabledChange={enabled => handleProcessingSettingChange('stereoWideningEnabled', enabled)}\r\n                  onBatchModeChange={enabled => handleProcessingSettingChange('batchMode', enabled)}\r\n                  onReset={handleResetProcessingOptions}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </TabsContent>\r\n\r\n        <TabsContent value=\"ai-mastering\" className={`space-y-6 ${activeTab !== 'ai-mastering' ? 'hidden' : ''}`}>\r\n          <AIMasteringTab />\r\n        </TabsContent>\r\n\r\n        <TabsContent value=\"media-player\" className={`space-y-6 ${activeTab !== 'media-player' ? 'hidden' : ''}`}>\r\n          <LevelMediaPlayer\r\n            files={[...audioFiles, ...enhancedHistory]}\r\n            onFilesAdded={handleFilesUploaded}\r\n            onFileDelete={onDelete}\r\n            autoPlayFile={autoPlayFile}\r\n            onAutoPlayComplete={() => setAutoPlayFile(null)}\r\n            onClearAll={onClearAll}\r\n          />\r\n        </TabsContent>\r\n      </Tabs >\r\n\r\n      {\r\n        fileInfoModal.isOpen && fileInfoModal.file && (\r\n          <FileInfoModal\r\n            file={fileInfoModal.file}\r\n            isOpen={fileInfoModal.isOpen}\r\n            onClose={() => setFileInfoModal({ isOpen: false, file: null })}\r\n          />\r\n        )\r\n      }\r\n    </>\r\n  );\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\MainContent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\MainTabs.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":21,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1031,1034],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1031,1034],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":25,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1186,1189],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1186,1189],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { Upload, Music, Settings, Download, Radio, History, AlertTriangle } from 'lucide-react';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { UploadZone } from '@/components/UploadZone';\r\nimport { AudioFileCard } from '@/components/AudioFileCard';\r\nimport { EnhancementSettings } from '@/components/EnhancementSettings';\r\nimport { ProcessingQueue } from '@/components/ProcessingQueue';\r\nimport { MediaPlayer } from '@/components/MediaPlayer';\r\nimport { ExportHistory } from '@/components/ExportHistory';\r\nimport { ErrorBoundary } from '@/components/ErrorBoundary';\r\nimport { AudioFile } from '@/types/audio';\r\n\r\ninterface MainTabsProps {\r\n  activeTab: string;\r\n  setActiveTab: (tab: string) => void;\r\n  audioFiles: AudioFile[];\r\n  onFilesUploaded: (files: AudioFile[]) => void;\r\n  onRemoveFile: (fileId: string) => void;\r\n  onUpdateFile: (fileId: string, updates: Partial<AudioFile>) => void;\r\n  onEnhanceFiles: (settings: any) => void;\r\n  isProcessing: boolean;\r\n  hasFiles: boolean;\r\n  onSaveLocationChange: (location: string | FileSystemDirectoryHandle) => void;\r\n  history: any[];\r\n  onClearHistory: () => void;\r\n}\r\n\r\nexport const MainTabs = ({\r\n  activeTab,\r\n  setActiveTab,\r\n  audioFiles,\r\n  onFilesUploaded,\r\n  onRemoveFile,\r\n  onUpdateFile,\r\n  onEnhanceFiles,\r\n  isProcessing,\r\n  hasFiles,\r\n  onSaveLocationChange,\r\n  history,\r\n  onClearHistory\r\n}: MainTabsProps) => {\r\n  return (\r\n    <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\r\n      <TabsList className=\"grid w-full grid-cols-6 bg-slate-800 border-slate-700 h-9\">\r\n        <TabsTrigger value=\"upload\" className=\"data-[state=active]:bg-blue-600 text-xs\">\r\n          <Upload className=\"h-3 w-3 mr-1\" />\r\n          Upload\r\n        </TabsTrigger>\r\n        <TabsTrigger value=\"library\" className=\"data-[state=active]:bg-blue-600 text-xs\">\r\n          <Music className=\"h-3 w-3 mr-1\" />\r\n          Library\r\n        </TabsTrigger>\r\n        <TabsTrigger value=\"enhance\" className=\"data-[state=active]:bg-blue-600 text-xs\">\r\n          <Settings className=\"h-3 w-3 mr-1\" />\r\n          Enhance\r\n        </TabsTrigger>\r\n        <TabsTrigger value=\"queue\" className=\"data-[state=active]:bg-blue-600 text-xs\">\r\n          <Download className=\"h-3 w-3 mr-1\" />\r\n          Queue\r\n        </TabsTrigger>\r\n        <TabsTrigger value=\"player\" className=\"data-[state=active]:bg-blue-600 text-xs\">\r\n          <Radio className=\"h-3 w-3 mr-1\" />\r\n          Player\r\n        </TabsTrigger>\r\n        <TabsTrigger value=\"history\" className=\"data-[state=active]:bg-blue-600 text-xs\">\r\n          <History className=\"h-3 w-3 mr-1\" />\r\n          History\r\n        </TabsTrigger>\r\n      </TabsList>\r\n\r\n      <TabsContent value=\"upload\" className=\"mt-6\">\r\n        <ErrorBoundary>\r\n          <UploadZone onFilesUploaded={onFilesUploaded} />\r\n        </ErrorBoundary>\r\n      </TabsContent>\r\n\r\n      <TabsContent value=\"library\" className=\"mt-6\">\r\n        <ErrorBoundary>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n            {audioFiles.map((file) => (\r\n              <AudioFileCard\r\n                key={file.id}\r\n                file={file}\r\n                onRemove={onRemoveFile}\r\n              />\r\n            ))}\r\n            {audioFiles.length === 0 && (\r\n              <div className=\"col-span-full text-center py-12\">\r\n                <Music className=\"h-16 w-16 text-slate-600 mx-auto mb-4\" />\r\n                <p className=\"text-slate-400 text-lg\">No audio files uploaded yet</p>\r\n                <p className=\"text-slate-500\">Upload some files to get started</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </ErrorBoundary>\r\n      </TabsContent>\r\n\r\n      <TabsContent value=\"enhance\" className=\"mt-6 space-y-6\">\r\n        <ErrorBoundary \r\n          fallback={\r\n            <Card className=\"bg-red-900/20 border-red-500/50\">\r\n              <CardContent className=\"p-6\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <AlertTriangle className=\"h-8 w-8 text-red-400\" />\r\n                  <div>\r\n                    <h3 className=\"text-lg font-semibold text-red-300\">Enhancement Settings Error</h3>\r\n                    <p className=\"text-red-200 text-sm\">\r\n                      There was an error loading the enhancement settings. Please refresh the page.\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          }\r\n        >\r\n          <EnhancementSettings\r\n            onEnhance={onEnhanceFiles}\r\n            isProcessing={isProcessing}\r\n            hasFiles={hasFiles}\r\n            onSaveLocationChange={onSaveLocationChange}\r\n          />\r\n        </ErrorBoundary>\r\n      </TabsContent>\r\n\r\n      <TabsContent value=\"queue\" className=\"mt-6\">\r\n        <ErrorBoundary>\r\n          <ProcessingQueue files={audioFiles} />\r\n        </ErrorBoundary>\r\n      </TabsContent>\r\n\r\n      <TabsContent value=\"player\" className=\"mt-6\">\r\n        <ErrorBoundary>\r\n          <MediaPlayer />\r\n        </ErrorBoundary>\r\n      </TabsContent>\r\n      \r\n      <TabsContent value=\"history\" className=\"mt-6\">\r\n        <ErrorBoundary>\r\n          <ExportHistory \r\n            history={history} \r\n            onClearHistory={onClearHistory} \r\n          />\r\n        </ErrorBoundary>\r\n      </TabsContent>\r\n    </Tabs>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\MasteringDebugPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\MediaPlayer.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'connectAudioGraph'. Either include it or remove the dependency array.","line":72,"column":6,"nodeType":"ArrayExpression","endLine":72,"endColumn":17,"suggestions":[{"desc":"Update the dependencies array to be: [connectAudioGraph, eqEnabled]","fix":{"range":[2722,2733],"text":"[connectAudioGraph, eqEnabled]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":116,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":116,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3972,3975],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3972,3975],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { Play, Pause, SkipBack, SkipForward, Upload, Volume2, Sliders } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Slider } from '@/components/ui/slider';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport { FrequencyAnalyzer } from './FrequencyAnalyzer';\r\nimport { useToast } from '@/hooks/use-toast';\r\n\r\nexport const MediaPlayer = () => {\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [duration, setDuration] = useState(0);\r\n  const [volume, setVolume] = useState(50);\r\n  const [currentFile, setCurrentFile] = useState<File | null>(null);\r\n  const [audioUrl, setAudioUrl] = useState<string>('');\r\n  const [eqEnabled, setEqEnabled] = useState(false);\r\n  const [eqBands, setEqBands] = useState([0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\r\n  \r\n  const audioRef = useRef<HTMLAudioElement | null>(null);\r\n  const fileInputRef = useRef<HTMLInputElement | null>(null);\r\n  const audioContextRef = useRef<AudioContext | null>(null);\r\n  const sourceRef = useRef<MediaElementAudioSourceNode | null>(null);\r\n  const gainNodeRef = useRef<GainNode | null>(null);\r\n  const eqNodesRef = useRef<BiquadFilterNode[]>([]);\r\n  const isConnectedRef = useRef(false);\r\n  \r\n  const { toast } = useToast();\r\n\r\n  const eqFrequencies = [31, 62, 125, 250, 500, 1000, 2000, 4000, 8000, 16000];\r\n\r\n  const getFrequencyColor = (freq: number, bandValue: number) => {\r\n    const intensity = Math.abs(bandValue) / 12;\r\n    const alpha = 0.3 + intensity * 0.7;\r\n    \r\n    if (freq <= 125) return `rgba(239, 68, 68, ${alpha})`;\r\n    if (freq <= 500) return `rgba(249, 115, 22, ${alpha})`;\r\n    if (freq <= 2000) return `rgba(234, 179, 8, ${alpha})`;\r\n    if (freq <= 8000) return `rgba(34, 197, 94, ${alpha})`;\r\n    return `rgba(59, 130, 246, ${alpha})`;\r\n  };\r\n\r\n  const getFrequencyTextColor = (freq: number) => {\r\n    if (freq <= 125) return 'text-red-400';\r\n    if (freq <= 500) return 'text-orange-400';\r\n    if (freq <= 2000) return 'text-yellow-400';\r\n    if (freq <= 8000) return 'text-green-400';\r\n    return 'text-blue-400';\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (audioRef.current) {\r\n      audioRef.current.volume = volume / 100;\r\n    }\r\n  }, [volume]);\r\n\r\n  useEffect(() => {\r\n    if (audioContextRef.current && isConnectedRef.current) {\r\n      eqNodesRef.current.forEach((node, index) => {\r\n        if (node) {\r\n          node.gain.value = eqBands[index];\r\n        }\r\n      });\r\n    }\r\n  }, [eqBands]);\r\n\r\n  useEffect(() => {\r\n    if (isConnectedRef.current) {\r\n      connectAudioGraph();\r\n    }\r\n  }, [eqEnabled]);\r\n\r\n  const disconnectAudioGraph = () => {\r\n    try {\r\n      if (sourceRef.current) {\r\n        sourceRef.current.disconnect();\r\n      }\r\n      eqNodesRef.current.forEach(node => {\r\n        if (node) node.disconnect();\r\n      });\r\n      if (gainNodeRef.current) {\r\n        gainNodeRef.current.disconnect();\r\n      }\r\n    } catch (error) {\r\n      console.error('Error disconnecting audio graph:', error);\r\n    }\r\n  };\r\n\r\n  const connectAudioGraph = () => {\r\n    if (!sourceRef.current || !gainNodeRef.current || !audioContextRef.current) return;\r\n\r\n    try {\r\n      disconnectAudioGraph();\r\n      \r\n      let currentNode: AudioNode = sourceRef.current;\r\n      \r\n      if (eqEnabled && eqNodesRef.current.length > 0) {\r\n        eqNodesRef.current.forEach(filter => {\r\n          currentNode.connect(filter);\r\n          currentNode = filter;\r\n        });\r\n      }\r\n      \r\n      currentNode.connect(gainNodeRef.current);\r\n      gainNodeRef.current.connect(audioContextRef.current.destination);\r\n    } catch (error) {\r\n      console.error('Error connecting audio graph:', error);\r\n    }\r\n  };\r\n\r\n  const setupAudioContext = () => {\r\n    if (!audioRef.current) return;\r\n\r\n    try {\r\n      const AudioContext = window.AudioContext || (window as any).webkitAudioContext;\r\n      if (!audioContextRef.current) {\r\n        audioContextRef.current = new AudioContext();\r\n      }\r\n      \r\n      if (audioContextRef.current.state === 'suspended') {\r\n        audioContextRef.current.resume();\r\n      }\r\n      \r\n      // Only create source once per audio element\r\n      if (!sourceRef.current && audioRef.current) {\r\n        sourceRef.current = audioContextRef.current.createMediaElementSource(audioRef.current);\r\n        isConnectedRef.current = true;\r\n      }\r\n      \r\n      if (!gainNodeRef.current) {\r\n        gainNodeRef.current = audioContextRef.current.createGain();\r\n      }\r\n      \r\n      // Create EQ nodes\r\n      if (eqNodesRef.current.length === 0) {\r\n        eqNodesRef.current = eqFrequencies.map((freq, index) => {\r\n          const filter = audioContextRef.current!.createBiquadFilter();\r\n          filter.type = index === 0 ? 'lowshelf' : index === eqFrequencies.length - 1 ? 'highshelf' : 'peaking';\r\n          filter.frequency.value = freq;\r\n          filter.Q.value = 1;\r\n          filter.gain.value = eqBands[index];\r\n          return filter;\r\n        });\r\n      }\r\n\r\n      connectAudioGraph();\r\n    } catch (error) {\r\n      console.error('Audio context setup error:', error);\r\n    }\r\n  };\r\n\r\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    if (!file.type.startsWith('audio/')) {\r\n      toast({\r\n        title: \"Invalid file type\",\r\n        description: \"Please select an audio file\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Clean up previous audio\r\n    if (audioUrl) {\r\n      URL.revokeObjectURL(audioUrl);\r\n    }\r\n    disconnectAudioGraph();\r\n\r\n    setCurrentFile(file);\r\n    const url = URL.createObjectURL(file);\r\n    setAudioUrl(url);\r\n    setIsPlaying(false);\r\n    setCurrentTime(0);\r\n    \r\n    if (audioRef.current) {\r\n      audioRef.current.src = url;\r\n      audioRef.current.load();\r\n      setupAudioContext();\r\n    }\r\n\r\n    toast({\r\n      title: \"File loaded\",\r\n      description: `Now playing: ${file.name}`,\r\n    });\r\n  };\r\n\r\n  // Cleanup on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (audioUrl) {\r\n        URL.revokeObjectURL(audioUrl);\r\n      }\r\n      disconnectAudioGraph();\r\n      if (audioContextRef.current) {\r\n        audioContextRef.current.close();\r\n      }\r\n    };\r\n  }, [audioUrl]);\r\n\r\n  const formatTime = (seconds: number) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = Math.floor(seconds % 60);\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  const handlePlayPause = async () => {\r\n    if (!audioRef.current) return;\r\n    \r\n    if (audioContextRef.current?.state === 'suspended') {\r\n      await audioContextRef.current.resume();\r\n    }\r\n    \r\n    if (isPlaying) {\r\n      audioRef.current.pause();\r\n    } else {\r\n      audioRef.current.play().catch(error => {\r\n        console.error('Error playing audio:', error);\r\n        toast({\r\n          title: \"Playback error\",\r\n          description: \"Could not play the audio file\",\r\n          variant: \"destructive\"\r\n        });\r\n      });\r\n    }\r\n    \r\n    setIsPlaying(!isPlaying);\r\n  };\r\n\r\n  const handleSeek = (e: React.MouseEvent<HTMLDivElement>) => {\r\n    if (!audioRef.current || !duration) return;\r\n\r\n    const progressBar = e.currentTarget;\r\n    const rect = progressBar.getBoundingClientRect();\r\n    const pos = (e.clientX - rect.left) / rect.width;\r\n    const newTime = duration * pos;\r\n    \r\n    audioRef.current.currentTime = newTime;\r\n    setCurrentTime(newTime);\r\n  };\r\n\r\n  const handleSkip = (seconds: number) => {\r\n    if (!audioRef.current) return;\r\n    audioRef.current.currentTime = Math.max(0, Math.min(duration, currentTime + seconds));\r\n  };\r\n\r\n  const handleEQBandChange = (bandIndex: number, value: number) => {\r\n    const newEqBands = [...eqBands];\r\n    newEqBands[bandIndex] = value;\r\n    setEqBands(newEqBands);\r\n  };\r\n\r\n  const resetEQ = () => {\r\n    setEqBands([0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\r\n  };\r\n\r\n  const handleTimeUpdate = () => {\r\n    if (audioRef.current) {\r\n      setCurrentTime(audioRef.current.currentTime);\r\n    }\r\n  };\r\n\r\n  const handleLoadedMetadata = () => {\r\n    if (audioRef.current) {\r\n      setDuration(audioRef.current.duration);\r\n    }\r\n  };\r\n\r\n  const handleEnded = () => {\r\n    setIsPlaying(false);\r\n    setCurrentTime(0);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <input\r\n        ref={fileInputRef}\r\n        type=\"file\"\r\n        accept=\"audio/*\"\r\n        onChange={handleFileSelect}\r\n        className=\"hidden\"\r\n      />\r\n\r\n      <audio\r\n        ref={audioRef}\r\n        onTimeUpdate={handleTimeUpdate}\r\n        onLoadedMetadata={handleLoadedMetadata}\r\n        onEnded={handleEnded}\r\n        className=\"hidden\"\r\n      />\r\n\r\n      {/* File Selection */}\r\n      <Card className=\"bg-card border-border\">\r\n        <CardContent className=\"p-6\">\r\n          <div className=\"text-center\">\r\n            <Button\r\n              onClick={() => fileInputRef.current?.click()}\r\n              className=\"bg-primary hover:bg-primary/90 text-primary-foreground\"\r\n            >\r\n              <Upload className=\"h-5 w-5 mr-2\" />\r\n              Select Audio File\r\n            </Button>\r\n            {currentFile && (\r\n              <p className=\"mt-2 text-muted-foreground\">\r\n                Loaded: {currentFile.name}\r\n              </p>\r\n            )}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Frequency Analyzer */}\r\n      {audioUrl && (\r\n        <Card className=\"bg-card border-border\">\r\n          <CardHeader>\r\n            <CardTitle className=\"text-foreground text-center\">Frequency Analyzer</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <FrequencyAnalyzer \r\n              audioUrl={audioUrl} \r\n              playing={isPlaying}\r\n              height={200}\r\n            />\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Player Controls */}\r\n      <Card className=\"bg-card border-border\">\r\n        <CardContent className=\"p-6 space-y-4\">\r\n          {/* Progress Bar */}\r\n          <div \r\n            className=\"h-3 bg-muted rounded-full cursor-pointer\"\r\n            onClick={handleSeek}\r\n          >\r\n            <div \r\n              className=\"bg-primary h-full rounded-full transition-all\"\r\n              style={{ width: `${duration ? (currentTime / duration) * 100 : 0}%` }}\r\n            ></div>\r\n          </div>\r\n\r\n          {/* Time Display */}\r\n          <div className=\"flex justify-between text-sm text-muted-foreground\">\r\n            <span>{formatTime(currentTime)}</span>\r\n            <span>{formatTime(duration)}</span>\r\n          </div>\r\n\r\n          {/* Control Buttons */}\r\n          <div className=\"flex items-center justify-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"lg\"\r\n              onClick={() => handleSkip(-10)}\r\n              disabled={!audioUrl}\r\n              className=\"text-foreground hover:text-primary\"\r\n            >\r\n              <SkipBack className=\"h-6 w-6\" />\r\n            </Button>\r\n            \r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"lg\"\r\n              onClick={handlePlayPause}\r\n              disabled={!audioUrl}\r\n              className=\"text-foreground hover:text-primary\"\r\n            >\r\n              {isPlaying ? (\r\n                <Pause className=\"h-8 w-8\" />\r\n              ) : (\r\n                <Play className=\"h-8 w-8\" />\r\n              )}\r\n            </Button>\r\n            \r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"lg\"\r\n              onClick={() => handleSkip(10)}\r\n              disabled={!audioUrl}\r\n              className=\"text-foreground hover:text-primary\"\r\n            >\r\n              <SkipForward className=\"h-6 w-6\" />\r\n            </Button>\r\n          </div>\r\n\r\n          {/* Volume Control */}\r\n          <div className=\"flex items-center gap-4\">\r\n            <Volume2 className=\"h-5 w-5 text-muted-foreground\" />\r\n            <Slider\r\n              value={[volume]}\r\n              onValueChange={([value]) => setVolume(value)}\r\n              min={0}\r\n              max={100}\r\n              step={1}\r\n              className=\"flex-1\"\r\n            />\r\n            <span className=\"text-sm text-muted-foreground w-12\">{volume}%</span>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Enhanced 10-Band EQ */}\r\n      <Card className=\"bg-card border-border\">\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center gap-2 text-foreground\">\r\n            <Sliders className=\"h-5 w-5\" />\r\n            10-Band Equalizer\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <Switch\r\n              checked={eqEnabled}\r\n              onCheckedChange={setEqEnabled}\r\n            />\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={resetEQ}\r\n            >\r\n              Reset EQ\r\n            </Button>\r\n          </div>\r\n          \r\n          {eqEnabled && (\r\n            <div className=\"relative bg-slate-900/50 rounded-lg p-6\">\r\n              {/* Grid lines */}\r\n              <div className=\"absolute inset-6 pointer-events-none\">\r\n                <div className=\"h-full w-full grid grid-cols-10 gap-3\">\r\n                  {Array.from({ length: 10 }).map((_, i) => (\r\n                    <div key={i} className=\"relative\">\r\n                      <div className=\"absolute inset-0 border-l border-slate-600/30\"></div>\r\n                      {Array.from({ length: 9 }).map((_, j) => (\r\n                        <div \r\n                          key={j} \r\n                          className=\"absolute w-full border-t border-slate-600/20\"\r\n                          style={{ top: `${(j + 1) * 11.11}%` }}\r\n                        ></div>\r\n                      ))}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex justify-center items-end gap-3 py-4 relative z-10\">\r\n                {eqFrequencies.map((freq, index) => (\r\n                  <div key={freq} className=\"flex flex-col items-center\">\r\n                    <div className=\"h-32 flex items-end justify-center mb-2 relative\">\r\n                      <div \r\n                        className=\"absolute inset-0 rounded opacity-20\"\r\n                        style={{ \r\n                          background: `linear-gradient(to top, ${getFrequencyColor(freq, eqBands[index])}, transparent)`\r\n                        }}\r\n                      ></div>\r\n                      <Slider\r\n                        orientation=\"vertical\"\r\n                        value={[eqBands[index]]}\r\n                        onValueChange={([value]) => handleEQBandChange(index, value)}\r\n                        min={-12}\r\n                        max={12}\r\n                        step={0.5}\r\n                        className=\"h-28 w-6 relative z-10\"\r\n                      />\r\n                    </div>\r\n                    <div className={`text-xs font-medium ${getFrequencyTextColor(freq)} mb-1`}>\r\n                      {freq < 1000 ? `${freq}Hz` : `${freq/1000}kHz`}\r\n                    </div>\r\n                    <div className=\"text-xs text-slate-300\">\r\n                      {eqBands[index] > 0 ? '+' : ''}{eqBands[index]}dB\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\NewTrackManagementRow.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ProcessingLimitations.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ProcessingQueue.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ProfileModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":19,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[677,680],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[677,680],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[694,697],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[694,697],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport { Avatar, AvatarFallback } from '@/components/ui/avatar';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Separator } from '@/components/ui/separator';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { User, Mail, Calendar, Shield, Settings } from 'lucide-react';\r\nimport { AccountSettings } from './AccountSettings';\r\n\r\ninterface ProfileModalProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  user: any;\r\n  profile: any;\r\n  isAdmin: boolean;\r\n}\r\n\r\nexport const ProfileModal: React.FC<ProfileModalProps> = ({\r\n  open,\r\n  onOpenChange,\r\n  user,\r\n  profile,\r\n  isAdmin,\r\n}) => {\r\n  const initials = profile?.full_name\r\n    ? profile.full_name.split(' ').map((n: string) => n[0]).join('').toUpperCase()\r\n    : user.email?.[0].toUpperCase() || 'U';\r\n\r\n  const createdDate = user?.created_at ? new Date(user.created_at).toLocaleDateString('en-US', {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric'\r\n  }) : 'N/A';\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto bg-slate-900 border-slate-700 text-white z-[9999]\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"text-2xl font-bold text-cyan-400\">My Account</DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <Tabs defaultValue=\"profile\" className=\"w-full\">\r\n          <TabsList className=\"grid w-full grid-cols-2 bg-slate-800\">\r\n            <TabsTrigger value=\"profile\">Profile</TabsTrigger>\r\n            <TabsTrigger value=\"settings\">Settings</TabsTrigger>\r\n          </TabsList>\r\n\r\n          <TabsContent value=\"profile\" className=\"space-y-6 py-4\">\r\n          {/* Avatar Section */}\r\n          <div className=\"flex flex-col items-center gap-4\">\r\n            <Avatar className=\"h-24 w-24 border-4 border-cyan-500\">\r\n              <AvatarFallback className=\"bg-gradient-to-r from-cyan-500 to-purple-500 text-white font-bold text-3xl\">\r\n                {initials}\r\n              </AvatarFallback>\r\n            </Avatar>\r\n            {isAdmin && (\r\n              <Badge className=\"bg-yellow-600 text-white border-yellow-500\">\r\n                <Shield className=\"h-3 w-3 mr-1\" />\r\n                Administrator\r\n              </Badge>\r\n            )}\r\n          </div>\r\n\r\n          <Separator className=\"bg-slate-700\" />\r\n\r\n          {/* Profile Details */}\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"p-2 bg-cyan-700/30 rounded-lg\">\r\n                <User className=\"h-5 w-5 text-cyan-400\" />\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <p className=\"text-xs text-slate-400\">Full Name</p>\r\n                <p className=\"text-sm font-medium text-white\">\r\n                  {profile?.full_name || 'Not set'}\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"p-2 bg-purple-700/30 rounded-lg\">\r\n                <Mail className=\"h-5 w-5 text-purple-400\" />\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <p className=\"text-xs text-slate-400\">Email</p>\r\n                <p className=\"text-sm font-medium text-white break-all\">\r\n                  {user.email}\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"p-2 bg-green-700/30 rounded-lg\">\r\n                <Calendar className=\"h-5 w-5 text-green-400\" />\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <p className=\"text-xs text-slate-400\">Member Since</p>\r\n                <p className=\"text-sm font-medium text-white\">\r\n                  {createdDate}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"settings\">\r\n            <AccountSettings />\r\n          </TabsContent>\r\n        </Tabs>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\QueueAndStory.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\RecapModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\SaveLocationSelector.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[917,920],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[917,920],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { useState } from 'react';\r\nimport { Folder, Download, CheckCircle } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { useToast } from '@/hooks/use-toast';\r\n\r\ninterface SaveLocationSelectorProps {\r\n  onLocationSelected: (location: string | FileSystemDirectoryHandle) => void;\r\n  currentLocation: string;\r\n}\r\n\r\nexport const SaveLocationSelector = ({ onLocationSelected, currentLocation }: SaveLocationSelectorProps) => {\r\n  const [selectedLocation, setSelectedLocation] = useState<string>(currentLocation);\r\n  const [isSelectingFolder, setIsSelectingFolder] = useState(false);\r\n  const { toast } = useToast();\r\n\r\n  const handleSelectFolder = async () => {\r\n    setIsSelectingFolder(true);\r\n    \r\n    try {\r\n      if ('showDirectoryPicker' in window) {\r\n        const dirHandle = await (window as any).showDirectoryPicker();\r\n        setSelectedLocation(dirHandle.name || 'Custom folder');\r\n        onLocationSelected(dirHandle);\r\n        \r\n        toast({\r\n          title: \"Folder selected\",\r\n          description: `Enhanced files will be saved to ${dirHandle.name}`,\r\n        });\r\n      } else {\r\n        // Fallback for browsers that don't support File System Access API\r\n        toast({\r\n          title: \"Browser not supported\",\r\n          description: \"Files will be saved to your Downloads folder\",\r\n        });\r\n        setSelectedLocation('Downloads folder');\r\n        onLocationSelected('downloads');\r\n      }\r\n    } catch (error) {\r\n      console.log('Folder selection cancelled or failed');\r\n      toast({\r\n        title: \"Folder selection cancelled\",\r\n        description: \"Using default Downloads folder\",\r\n      });\r\n    } finally {\r\n      setIsSelectingFolder(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card className=\"bg-slate-800/50 border-slate-700\">\r\n      <CardHeader className=\"pb-3\">\r\n        <CardTitle className=\"flex items-center gap-2 text-white text-lg\">\r\n          <Download className=\"h-4 w-4\" />\r\n          Save Location\r\n        </CardTitle>\r\n      </CardHeader>\r\n      <CardContent className=\"pt-0\">\r\n        <div className=\"flex items-center justify-between gap-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"p-2 bg-slate-700 rounded-lg\">\r\n              <Folder className=\"h-4 w-4 text-blue-400\" />\r\n            </div>\r\n            <div>\r\n              <p className=\"text-sm font-medium text-white\">{selectedLocation}</p>\r\n              <p className=\"text-xs text-slate-400\">Enhanced files destination</p>\r\n            </div>\r\n          </div>\r\n          \r\n          <Button\r\n            onClick={handleSelectFolder}\r\n            disabled={isSelectingFolder}\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            className=\"bg-slate-700 border-slate-600 hover:bg-slate-600 text-white\"\r\n          >\r\n            {isSelectingFolder ? (\r\n              <>\r\n                <Folder className=\"h-3 w-3 mr-2 animate-pulse\" />\r\n                Selecting...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Folder className=\"h-3 w-3 mr-2\" />\r\n                Choose Folder\r\n              </>\r\n            )}\r\n          </Button>\r\n        </div>\r\n        \r\n        <div className=\"mt-3 p-3 bg-blue-900/20 border border-blue-700/30 rounded-lg\">\r\n          <div className=\"flex items-start gap-2\">\r\n            <CheckCircle className=\"h-4 w-4 text-blue-400 mt-0.5 flex-shrink-0\" />\r\n            <div className=\"text-xs text-blue-200\">\r\n              <p className=\"font-medium mb-1\">File System Access</p>\r\n              <p className=\"text-blue-300\">\r\n                Choose a custom folder to save enhanced files directly, or use the default Downloads folder.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ScrollableTitle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\SettingsPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\SimpleAudioEnhancer.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[711,714],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[711,714],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[757,760],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[757,760],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":93,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":93,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2552,2555],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2552,2555],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState } from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport { Slider } from '@/components/ui/slider';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from '@/components/ui/collapsible';\r\nimport { \r\n  Wand2, \r\n  Volume2, \r\n  Filter, \r\n  Zap, \r\n  Settings, \r\n  ChevronDown,\r\n  ChevronUp,\r\n  HelpCircle,\r\n  Download\r\n} from 'lucide-react';\r\nimport { Tooltip, TooltipContent, TooltipTrigger } from '@/components/ui/tooltip';\r\n\r\ninterface SimpleAudioEnhancerProps {\r\n  settings: any;\r\n  onSettingChange: (key: string, value: any) => void;\r\n  onEnhance: () => void;\r\n  isProcessing: boolean;\r\n  hasFiles: boolean;\r\n}\r\n\r\nexport const SimpleAudioEnhancer = ({ \r\n  settings, \r\n  onSettingChange, \r\n  onEnhance, \r\n  isProcessing, \r\n  hasFiles \r\n}: SimpleAudioEnhancerProps) => {\r\n  const [showInstallGuide, setShowInstallGuide] = useState(false);\r\n  const [activePreset, setActivePreset] = useState<string | null>(null);\r\n\r\n  const presets = [\r\n    {\r\n      id: 'vocal',\r\n      name: 'Vocal Enhancement',\r\n      description: 'Perfect for podcasts, voice recordings, and interviews',\r\n      icon: '',\r\n      settings: {\r\n        noiseReduction: true,\r\n        noiseReductionLevel: 70,\r\n        normalization: true,\r\n        normalizationLevel: -3,\r\n        compression: true,\r\n        compressionRatio: 4,\r\n        bassBoost: false,\r\n        trebleEnhancement: true,\r\n        trebleLevel: 25\r\n      }\r\n    },\r\n    {\r\n      id: 'music',\r\n      name: 'Music Mastering',\r\n      description: 'Enhanced clarity and punch for music tracks',\r\n      icon: '',\r\n      settings: {\r\n        noiseReduction: true,\r\n        noiseReductionLevel: 30,\r\n        normalization: true,\r\n        normalizationLevel: -6,\r\n        compression: true,\r\n        compressionRatio: 3,\r\n        bassBoost: true,\r\n        bassBoostLevel: 20,\r\n        trebleEnhancement: true,\r\n        trebleLevel: 15\r\n      }\r\n    },\r\n    {\r\n      id: 'cleanup',\r\n      name: 'Audio Cleanup',\r\n      description: 'Remove noise and improve old recordings',\r\n      icon: '',\r\n      settings: {\r\n        noiseReduction: true,\r\n        noiseReductionLevel: 80,\r\n        normalization: true,\r\n        normalizationLevel: -3,\r\n        compression: false,\r\n        bassBoost: false,\r\n        trebleEnhancement: false\r\n      }\r\n    }\r\n  ];\r\n\r\n  const applyPreset = (preset: any) => {\r\n    Object.entries(preset.settings).forEach(([key, value]) => {\r\n      onSettingChange(key, value);\r\n    });\r\n    setActivePreset(preset.id);\r\n  };\r\n\r\n  const ParameterTooltip = ({ children, content }: { children: React.ReactNode, content: string }) => (\r\n    <Tooltip>\r\n      <TooltipTrigger asChild>\r\n        {children}\r\n      </TooltipTrigger>\r\n      <TooltipContent className=\"max-w-xs bg-slate-800 text-white border-slate-600\">\r\n        <p className=\"text-sm\">{content}</p>\r\n      </TooltipContent>\r\n    </Tooltip>\r\n  );\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Main Enhancement Header */}\r\n      <Card className=\"bg-gradient-to-r from-blue-900/50 to-purple-900/50 border-blue-700/50\">\r\n        <CardHeader className=\"pb-4\">\r\n          <CardTitle className=\"flex items-center gap-3 text-2xl text-white\">\r\n            <Wand2 className=\"h-8 w-8 text-blue-400\" />\r\n            Enhance Your Audio\r\n          </CardTitle>\r\n          <p className=\"text-blue-100 text-lg\">\r\n            Make your audio sound clearer and more professional with one-click enhancement\r\n          </p>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"space-y-1\">\r\n              <h3 className=\"text-lg font-medium text-white\">\r\n                {hasFiles ? \"Ready to enhance your audio\" : \"Upload audio files to get started\"}\r\n              </h3>\r\n              <p className=\"text-slate-300 text-sm\">\r\n                {hasFiles \r\n                  ? \"Your files will be processed with professional-grade audio enhancement\"\r\n                  : \"Drag and drop your audio files in the Upload tab\"\r\n                }\r\n              </p>\r\n            </div>\r\n            <Button\r\n              onClick={onEnhance}\r\n              disabled={!hasFiles || isProcessing}\r\n              size=\"lg\"\r\n              className=\"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-3 text-lg\"\r\n            >\r\n              {isProcessing ? (\r\n                <>\r\n                  <Zap className=\"h-5 w-5 mr-3 animate-pulse\" />\r\n                  Enhancing...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Zap className=\"h-5 w-5 mr-3\" />\r\n                  Enhance Audio\r\n                </>\r\n              )}\r\n            </Button>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Quick Presets */}\r\n      <Card className=\"bg-slate-800/50 border-slate-700\">\r\n        <CardHeader className=\"pb-3\">\r\n          <CardTitle className=\"flex items-center gap-2 text-white\">\r\n            <Settings className=\"h-5 w-5\" />\r\n            Quick Enhancement Presets\r\n          </CardTitle>\r\n          <p className=\"text-slate-400 text-sm\">Choose a preset that matches your audio type</p>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n            {presets.map((preset) => (\r\n              <Button\r\n                key={preset.id}\r\n                variant={activePreset === preset.id ? \"default\" : \"outline\"}\r\n                className={`h-auto p-4 flex flex-col items-start space-y-2 ${\r\n                  activePreset === preset.id \r\n                    ? \"bg-blue-600 border-blue-500 text-white\" \r\n                    : \"bg-slate-700 border-slate-600 hover:bg-slate-600 text-white\"\r\n                }`}\r\n                onClick={() => applyPreset(preset)}\r\n              >\r\n                <div className=\"flex items-center gap-2 w-full\">\r\n                  <span className=\"text-2xl\">{preset.icon}</span>\r\n                  <span className=\"font-medium\">{preset.name}</span>\r\n                  {activePreset === preset.id && (\r\n                    <Badge variant=\"secondary\" className=\"ml-auto\">Active</Badge>\r\n                  )}\r\n                </div>\r\n                <p className=\"text-xs text-left opacity-80\">\r\n                  {preset.description}\r\n                </p>\r\n              </Button>\r\n            ))}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Interactive Audio Controls */}\r\n      <Card className=\"bg-slate-800/50 border-slate-700\">\r\n        <CardHeader className=\"pb-3\">\r\n          <CardTitle className=\"flex items-center gap-2 text-white\">\r\n            <Filter className=\"h-5 w-5\" />\r\n            Audio Enhancement Controls\r\n          </CardTitle>\r\n          <p className=\"text-slate-400 text-sm\">Fine-tune your audio enhancement settings</p>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-6\">\r\n          {/* Noise Reduction */}\r\n          <div className=\"space-y-3\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <ParameterTooltip content=\"Removes background noise, hiss, and unwanted sounds from your audio\">\r\n                  <div className=\"flex items-center gap-2 cursor-help\">\r\n                    <span className=\"text-sm font-medium text-white\"> Noise Reduction</span>\r\n                    <HelpCircle className=\"h-4 w-4 text-slate-400\" />\r\n                  </div>\r\n                </ParameterTooltip>\r\n              </div>\r\n              <Switch\r\n                checked={settings.noiseReduction}\r\n                onCheckedChange={(checked) => onSettingChange('noiseReduction', checked)}\r\n              />\r\n            </div>\r\n            {settings.noiseReduction && (\r\n              <div className=\"space-y-2 pl-6\">\r\n                <div className=\"flex justify-between text-xs\">\r\n                  <span className=\"text-slate-400\">Intensity</span>\r\n                  <span className=\"text-blue-400 font-medium\">\r\n                    {settings.noiseReductionLevel <= 30 ? 'Light' : \r\n                     settings.noiseReductionLevel <= 60 ? 'Medium' : 'Heavy'}\r\n                  </span>\r\n                </div>\r\n                <Slider\r\n                  value={[settings.noiseReductionLevel]}\r\n                  onValueChange={([value]) => onSettingChange('noiseReductionLevel', value)}\r\n                  min={10}\r\n                  max={90}\r\n                  step={5}\r\n                  className=\"w-full\"\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Volume Normalization */}\r\n          <div className=\"space-y-3\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <ParameterTooltip content=\"Automatically adjusts volume levels for consistent loudness across your audio\">\r\n                <div className=\"flex items-center gap-2 cursor-help\">\r\n                  <span className=\"text-sm font-medium text-white\"> Volume Normalization</span>\r\n                  <HelpCircle className=\"h-4 w-4 text-slate-400\" />\r\n                </div>\r\n              </ParameterTooltip>\r\n              <Switch\r\n                checked={settings.normalization}\r\n                onCheckedChange={(checked) => onSettingChange('normalization', checked)}\r\n              />\r\n            </div>\r\n            {settings.normalization && (\r\n              <div className=\"space-y-2 pl-6\">\r\n                <div className=\"flex justify-between text-xs\">\r\n                  <span className=\"text-slate-400\">Target Level</span>\r\n                  <span className=\"text-blue-400 font-medium\">{settings.normalizationLevel} dB</span>\r\n                </div>\r\n                <Slider\r\n                  value={[settings.normalizationLevel]}\r\n                  onValueChange={([value]) => onSettingChange('normalizationLevel', value)}\r\n                  min={-12}\r\n                  max={0}\r\n                  step={1}\r\n                  className=\"w-full\"\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Bass Boost */}\r\n          <div className=\"space-y-3\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <ParameterTooltip content=\"Enhances low-frequency sounds to add warmth and depth to your audio\">\r\n                <div className=\"flex items-center gap-2 cursor-help\">\r\n                  <span className=\"text-sm font-medium text-white\"> Bass Boost</span>\r\n                  <HelpCircle className=\"h-4 w-4 text-slate-400\" />\r\n                </div>\r\n              </ParameterTooltip>\r\n              <Switch\r\n                checked={settings.bassBoost}\r\n                onCheckedChange={(checked) => onSettingChange('bassBoost', checked)}\r\n              />\r\n            </div>\r\n            {settings.bassBoost && (\r\n              <div className=\"space-y-2 pl-6\">\r\n                <div className=\"flex justify-between text-xs\">\r\n                  <span className=\"text-slate-400\">Boost Level</span>\r\n                  <span className=\"text-blue-400 font-medium\">{settings.bassBoostLevel}%</span>\r\n                </div>\r\n                <Slider\r\n                  value={[settings.bassBoostLevel]}\r\n                  onValueChange={([value]) => onSettingChange('bassBoostLevel', value)}\r\n                  min={0}\r\n                  max={100}\r\n                  step={5}\r\n                  className=\"w-full\"\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Treble Enhancement */}\r\n          <div className=\"space-y-3\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <ParameterTooltip content=\"Brightens high-frequency sounds to improve clarity and detail\">\r\n                <div className=\"flex items-center gap-2 cursor-help\">\r\n                  <span className=\"text-sm font-medium text-white\"> Treble Enhancement</span>\r\n                  <HelpCircle className=\"h-4 w-4 text-slate-400\" />\r\n                </div>\r\n              </ParameterTooltip>\r\n              <Switch\r\n                checked={settings.trebleEnhancement}\r\n                onCheckedChange={(checked) => onSettingChange('trebleEnhancement', checked)}\r\n              />\r\n            </div>\r\n            {settings.trebleEnhancement && (\r\n              <div className=\"space-y-2 pl-6\">\r\n                <div className=\"flex justify-between text-xs\">\r\n                  <span className=\"text-slate-400\">Enhancement Level</span>\r\n                  <span className=\"text-blue-400 font-medium\">{settings.trebleLevel}%</span>\r\n                </div>\r\n                <Slider\r\n                  value={[settings.trebleLevel]}\r\n                  onValueChange={([value]) => onSettingChange('trebleLevel', value)}\r\n                  min={0}\r\n                  max={50}\r\n                  step={5}\r\n                  className=\"w-full\"\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Dynamic Compression */}\r\n          <div className=\"space-y-3\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <ParameterTooltip content=\"Balances loud and quiet parts of your audio for more consistent volume\">\r\n                <div className=\"flex items-center gap-2 cursor-help\">\r\n                  <span className=\"text-sm font-medium text-white\"> Dynamic Compression</span>\r\n                  <HelpCircle className=\"h-4 w-4 text-slate-400\" />\r\n                </div>\r\n              </ParameterTooltip>\r\n              <Switch\r\n                checked={settings.compression}\r\n                onCheckedChange={(checked) => onSettingChange('compression', checked)}\r\n              />\r\n            </div>\r\n            {settings.compression && (\r\n              <div className=\"space-y-2 pl-6\">\r\n                <div className=\"flex justify-between text-xs\">\r\n                  <span className=\"text-slate-400\">Compression Ratio</span>\r\n                  <span className=\"text-blue-400 font-medium\">\r\n                    {settings.compressionRatio <= 2 ? '2:1 (Light)' : \r\n                     settings.compressionRatio <= 4 ? '4:1 (Medium)' : '8:1 (Heavy)'}\r\n                  </span>\r\n                </div>\r\n                <Slider\r\n                  value={[settings.compressionRatio]}\r\n                  onValueChange={([value]) => onSettingChange('compressionRatio', value)}\r\n                  min={1}\r\n                  max={8}\r\n                  step={0.5}\r\n                  className=\"w-full\"\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Installation Guide (Collapsible) */}\r\n      <Collapsible open={showInstallGuide} onOpenChange={setShowInstallGuide}>\r\n        <Card className=\"bg-slate-800/50 border-slate-700\">\r\n          <CollapsibleTrigger asChild>\r\n            <CardHeader className=\"pb-3 cursor-pointer hover:bg-slate-700/50 transition-colors\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <CardTitle className=\"flex items-center gap-2 text-white\">\r\n                  <Download className=\"h-5 w-5\" />\r\n                  Advanced: FFmpeg Installation Guide\r\n                </CardTitle>\r\n                {showInstallGuide ? <ChevronUp className=\"h-5 w-5\" /> : <ChevronDown className=\"h-5 w-5\" />}\r\n              </div>\r\n              <p className=\"text-slate-400 text-sm\">\r\n                For advanced users who want to use FFmpeg directly on their computer\r\n              </p>\r\n            </CardHeader>\r\n          </CollapsibleTrigger>\r\n          <CollapsibleContent>\r\n            <CardContent className=\"pt-0\">\r\n              <div className=\"space-y-4\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                  <div className=\"bg-slate-900/50 rounded-lg p-4\">\r\n                    <h4 className=\"font-medium text-white mb-2 flex items-center gap-2\">\r\n                       Windows\r\n                    </h4>\r\n                    <div className=\"space-y-2 text-sm text-slate-300\">\r\n                      <p>Option 1: Download from <code className=\"bg-slate-700 px-1 rounded\">ffmpeg.org</code></p>\r\n                      <p>Option 2: <code className=\"bg-slate-700 px-1 rounded\">winget install FFmpeg</code></p>\r\n                      <p>Option 3: <code className=\"bg-slate-700 px-1 rounded\">choco install ffmpeg</code></p>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"bg-slate-900/50 rounded-lg p-4\">\r\n                    <h4 className=\"font-medium text-white mb-2 flex items-center gap-2\">\r\n                       macOS\r\n                    </h4>\r\n                    <div className=\"space-y-2 text-sm text-slate-300\">\r\n                      <p><code className=\"bg-slate-700 px-1 rounded\">brew install ffmpeg</code></p>\r\n                      <p>Or download from <code className=\"bg-slate-700 px-1 rounded\">ffmpeg.org</code></p>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"bg-slate-900/50 rounded-lg p-4\">\r\n                    <h4 className=\"font-medium text-white mb-2 flex items-center gap-2\">\r\n                       Linux\r\n                    </h4>\r\n                    <div className=\"space-y-2 text-sm text-slate-300\">\r\n                      <p>Ubuntu/Debian: <code className=\"bg-slate-700 px-1 rounded\">sudo apt install ffmpeg</code></p>\r\n                      <p>CentOS/RHEL: <code className=\"bg-slate-700 px-1 rounded\">sudo yum install ffmpeg</code></p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"bg-blue-900/20 border border-blue-700/30 rounded-lg p-4\">\r\n                  <h4 className=\"text-sm font-medium text-blue-300 mb-2\"> Pro Tip</h4>\r\n                  <p className=\"text-xs text-slate-300\">\r\n                    This web application handles all the processing for you - no need to install FFmpeg unless you want to use command-line tools directly.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </CollapsibleContent>\r\n        </Card>\r\n      </Collapsible>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\StatsCards.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ThemeToggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\TrackList.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The ref value 'audioRefs.current' will likely have changed by the time this effect cleanup function runs. If this ref points to a node rendered by React, copy 'audioRefs.current' to a variable inside the effect, and use that variable in the cleanup function.","line":92,"column":17,"nodeType":"Identifier","endLine":92,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect } from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Music, Download, Trash2, Clock, CheckCircle, Loader2, AlertTriangle, Play, Pause } from 'lucide-react';\r\nimport { useAudioContext } from '@/hooks/useAudioContext';\r\n\r\ninterface Track {\r\n  id: string;\r\n  name: string;\r\n  originalFile: File;\r\n  audioBuffer?: AudioBuffer;\r\n  status: 'loading' | 'ready' | 'processing' | 'error';\r\n  metadata?: {\r\n    duration: number;\r\n    sampleRate: number;\r\n    channels: number;\r\n  };\r\n}\r\n\r\ninterface TrackListProps {\r\n  tracks: Track[];\r\n  selectedTrackId?: string;\r\n  onTrackSelect: (trackId: string) => void;\r\n  onTrackRemove: (trackId: string) => void;\r\n  onTrackExport: (trackId: string) => void;\r\n}\r\n\r\nexport const TrackList: React.FC<TrackListProps> = ({\r\n  tracks,\r\n  selectedTrackId,\r\n  onTrackSelect,\r\n  onTrackRemove,\r\n  onTrackExport\r\n}) => {\r\n  const [playingTrackId, setPlayingTrackId] = useState<string | null>(null);\r\n  const audioRefs = useRef<Map<string, HTMLAudioElement>>(new Map());\r\n  const { ensureContextRunning } = useAudioContext();\r\n\r\n  const formatDuration = (seconds: number): string => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = Math.floor(seconds % 60);\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  const handlePlayPause = async (track: Track, e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    \r\n    try {\r\n      // Ensure AudioContext is running\r\n      await ensureContextRunning();\r\n\r\n      if (playingTrackId === track.id) {\r\n        // Pause current track\r\n        const audio = audioRefs.current.get(track.id);\r\n        audio?.pause();\r\n        setPlayingTrackId(null);\r\n      } else {\r\n        // Stop any currently playing track\r\n        if (playingTrackId) {\r\n          const prevAudio = audioRefs.current.get(playingTrackId);\r\n          prevAudio?.pause();\r\n        }\r\n\r\n        // Create or get audio element\r\n        let audio = audioRefs.current.get(track.id);\r\n        if (!audio) {\r\n          audio = new Audio(URL.createObjectURL(track.originalFile));\r\n          audioRefs.current.set(track.id, audio);\r\n          \r\n          audio.onended = () => {\r\n            setPlayingTrackId(null);\r\n          };\r\n        }\r\n\r\n        await audio.play();\r\n        setPlayingTrackId(track.id);\r\n      }\r\n    } catch (error) {\r\n      console.error('Playback failed:', error);\r\n      setPlayingTrackId(null);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Cleanup audio elements on unmount\r\n    return () => {\r\n      audioRefs.current.forEach(audio => {\r\n        audio.pause();\r\n        audio.src = '';\r\n      });\r\n      audioRefs.current.clear();\r\n    };\r\n  }, []);\r\n\r\n  const formatFileSize = (bytes: number): string => {\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    if (bytes === 0) return '0 Bytes';\r\n    const i = Math.floor(Math.log(bytes) / Math.log(1024));\r\n    return Math.round(bytes / Math.pow(1024, i) * 100) / 100 + ' ' + sizes[i];\r\n  };\r\n\r\n  const getStatusBadge = (status: Track['status']) => {\r\n    switch (status) {\r\n      case 'loading':\r\n        return (\r\n          <Badge variant=\"secondary\" className=\"bg-blue-600 text-white\">\r\n            <Loader2 className=\"w-3 h-3 mr-1 animate-spin\" />\r\n            Loading\r\n          </Badge>\r\n        );\r\n      case 'ready':\r\n        return (\r\n          <Badge variant=\"secondary\" className=\"bg-green-600 text-white\">\r\n            <CheckCircle className=\"w-3 h-3 mr-1\" />\r\n            Ready\r\n          </Badge>\r\n        );\r\n      case 'processing':\r\n        return (\r\n          <Badge variant=\"secondary\" className=\"bg-orange-600 text-white\">\r\n            <Loader2 className=\"w-3 h-3 mr-1 animate-spin\" />\r\n            Processing\r\n          </Badge>\r\n        );\r\n      case 'error':\r\n        return (\r\n          <Badge variant=\"destructive\">\r\n            <AlertTriangle className=\"w-3 h-3 mr-1\" />\r\n            Error\r\n          </Badge>\r\n        );\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card className=\"bg-slate-900/90 dark:bg-black/90 border-slate-700 dark:border-slate-700\">\r\n      <CardHeader>\r\n        <CardTitle className=\"flex items-center gap-2 text-cyan-400\">\r\n          <Music className=\"h-5 w-5\" />\r\n          Track List ({tracks.length} tracks)\r\n        </CardTitle>\r\n      </CardHeader>\r\n      <CardContent>\r\n        {tracks.length === 0 ? (\r\n          <div className=\"text-center py-8\">\r\n            <Music className=\"h-12 w-12 text-slate-500 mx-auto mb-4\" />\r\n            <p className=\"text-slate-400\">No tracks uploaded yet</p>\r\n            <p className=\"text-sm text-slate-500 mt-2\">\r\n              Upload audio files to get started\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-2\">\r\n            {/* Header Row */}\r\n            <div className=\"grid grid-cols-7 gap-4 p-3 bg-slate-700/50 rounded-lg text-sm font-medium text-slate-300\">\r\n              <div>Play</div>\r\n              <div className=\"col-span-2\">Track Name</div>\r\n              <div>Duration</div>\r\n              <div>Size</div>\r\n              <div>Status</div>\r\n              <div>Actions</div>\r\n            </div>\r\n\r\n            {/* Track Rows */}\r\n            {tracks.map((track) => (\r\n              <div\r\n                key={track.id}\r\n                className={`\r\n                  grid grid-cols-7 gap-4 p-3 rounded-lg border transition-all duration-200 cursor-pointer\r\n                  ${selectedTrackId === track.id \r\n                    ? 'bg-blue-900/30 border-blue-500/50 shadow-lg' \r\n                    : 'bg-slate-800/50 border-slate-600 hover:bg-slate-700/50 hover:border-slate-500'\r\n                  }\r\n                `}\r\n                onClick={() => onTrackSelect(track.id)}\r\n              >\r\n                {/* Play/Pause Button */}\r\n                <div className=\"flex items-center\">\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"icon\"\r\n                    onClick={(e) => handlePlayPause(track, e)}\r\n                    disabled={track.status !== 'ready'}\r\n                    className=\"h-8 w-8 text-cyan-400 hover:text-cyan-300 hover:bg-cyan-500/20\"\r\n                  >\r\n                    {playingTrackId === track.id ? (\r\n                      <Pause className=\"h-4 w-4\" />\r\n                    ) : (\r\n                      <Play className=\"h-4 w-4\" />\r\n                    )}\r\n                  </Button>\r\n                </div>\r\n\r\n                {/* Track Name */}\r\n                <div className=\"col-span-2 flex flex-col min-w-0\">\r\n                  <span className=\"text-white font-medium truncate\">\r\n                    {track.name}\r\n                  </span>\r\n                  {track.metadata && (\r\n                    <span className=\"text-slate-400 text-xs\">\r\n                      {track.metadata.sampleRate}Hz  {track.metadata.channels}ch\r\n                    </span>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Duration */}\r\n                <div className=\"flex items-center\">\r\n                  <span className=\"text-white text-sm\">\r\n                    {track.metadata \r\n                      ? formatDuration(track.metadata.duration)\r\n                      : '--:--'\r\n                    }\r\n                  </span>\r\n                </div>\r\n\r\n                {/* Size */}\r\n                <div className=\"flex items-center\">\r\n                  <span className=\"text-cyan-300 text-sm font-semibold\">\r\n                    {formatFileSize(track.originalFile.size)}\r\n                  </span>\r\n                </div>\r\n\r\n                {/* Status */}\r\n                <div className=\"flex items-center\">\r\n                  {getStatusBadge(track.status)}\r\n                </div>\r\n\r\n                {/* Actions */}\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      onTrackExport(track.id);\r\n                    }}\r\n                    disabled={track.status !== 'ready'}\r\n                    className=\"text-xs bg-green-700 border-green-500 hover:bg-green-600 text-white disabled:bg-slate-700 disabled:border-slate-500 disabled:text-slate-400\"\r\n                  >\r\n                    <Download className=\"w-3 h-3\" />\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      onTrackRemove(track.id);\r\n                    }}\r\n                    className=\"text-xs bg-red-700 border-red-500 hover:bg-red-600 text-white\"\r\n                  >\r\n                    <Trash2 className=\"w-3 h-3\" />\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\TrackListFilters.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\TrackManagementRow.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\UploadWithConsent.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'processFiles'. Either include it or remove the dependency array.","line":32,"column":6,"nodeType":"ArrayExpression","endLine":32,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [hasConsented, processFiles]","fix":{"range":[1291,1305],"text":"[hasConsented, processFiles]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useCallback } from 'react';\r\nimport { useDropzone } from 'react-dropzone';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Checkbox } from '@/components/ui/checkbox';\r\nimport { Upload, FileAudio, AlertCircle, ExternalLink } from 'lucide-react';\r\nimport { AudioFile } from '@/types/audio';\r\nimport { Link } from 'react-router-dom';\r\ninterface UploadWithConsentProps {\r\n  onFilesUploaded: (files: AudioFile[]) => void;\r\n  supportedFormats?: string[];\r\n  maxFileSize?: number;\r\n  maxFiles?: number;\r\n}\r\nexport const UploadWithConsent = ({\r\n  onFilesUploaded,\r\n  supportedFormats = ['.mp3', '.wav', '.flac'],\r\n  maxFileSize = 100 * 1024 * 1024,\r\n  maxFiles = 20\r\n}: UploadWithConsentProps) => {\r\n  const [errorMessage, setErrorMessage] = useState<string | null>(null);\r\n  const [hasConsented, setHasConsented] = useState(false);\r\n  const [pendingFiles, setPendingFiles] = useState<File[]>([]);\r\n  const onDrop = useCallback((acceptedFiles: File[]) => {\r\n    setErrorMessage(null);\r\n    if (!hasConsented) {\r\n      setPendingFiles(acceptedFiles);\r\n      setErrorMessage('Please accept the Terms and Conditions before uploading files.');\r\n      return;\r\n    }\r\n    processFiles(acceptedFiles);\r\n  }, [hasConsented]);\r\n  const processFiles = (files: File[]) => {\r\n    const audioFiles: AudioFile[] = files.map(file => {\r\n      const id = Math.random().toString(36).substring(7);\r\n      return {\r\n        id,\r\n        name: file.name,\r\n        size: file.size,\r\n        type: file.type,\r\n        status: 'uploaded' as const,\r\n        originalFile: file,\r\n        progress: 0,\r\n        processingStage: 'Ready for enhancement'\r\n      };\r\n    });\r\n    onFilesUploaded(audioFiles);\r\n    setPendingFiles([]);\r\n  };\r\n  const {\r\n    getRootProps,\r\n    getInputProps,\r\n    isDragActive\r\n  } = useDropzone({\r\n    onDrop,\r\n    accept: {\r\n      'audio/*': supportedFormats\r\n    },\r\n    maxSize: maxFileSize,\r\n    multiple: true,\r\n    onDropRejected: rejectedFiles => {\r\n      const file = rejectedFiles[0];\r\n      if (file) {\r\n        if (file.errors && file.errors.length > 0) {\r\n          const error = file.errors[0];\r\n          if (error.code === 'file-too-large') {\r\n            setErrorMessage(`File \"${file.file.name}\" is too large. Maximum size is ${Math.round(maxFileSize / 1024 / 1024)}MB for optimal processing.`);\r\n          } else if (error.code === 'file-invalid-type') {\r\n            setErrorMessage(`File \"${file.file.name}\" format not supported. Supported formats: ${supportedFormats.join(', ')}.`);\r\n          } else {\r\n            setErrorMessage(`Error uploading \"${file.file.name}\": ${error.message}`);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  });\r\n  const handleConsentChange = (checked: boolean) => {\r\n    setHasConsented(checked);\r\n    setErrorMessage(null);\r\n    if (checked && pendingFiles.length > 0) {\r\n      processFiles(pendingFiles);\r\n    }\r\n  };\r\n  const handleUploadClick = (e: React.MouseEvent) => {\r\n    if (!hasConsented) {\r\n      e.stopPropagation();\r\n      setErrorMessage('Please accept the Terms and Conditions before uploading files.');\r\n      return;\r\n    }\r\n  };\r\n  return <div className=\"space-y-4\">\r\n    {/* Upload Zone */}\r\n    <Card className=\"bg-gradient-to-br from-slate-800 to-slate-900 border-slate-600 shadow-lg\">\r\n      <CardContent className=\"p-6\">\r\n        <div {...getRootProps()} className=\"flex flex-col items-center justify-center h-24 border-2 border-dashed rounded-lg cursor-pointer bg-slate-700/20 border-slate-500/50 hover:bg-slate-700/40 hover:border-cyan-400/50 transition-all duration-200\">\r\n          <input {...getInputProps()} disabled={!hasConsented} />\r\n          {isDragActive && hasConsented ? <p className=\"text-cyan-300 text-sm font-medium\">Drop your audio files here...</p> : <div className=\"flex flex-col items-center\">\r\n            <Upload className=\"h-6 w-6 text-cyan-400 mb-1.5\" />\r\n            <p className=\"text-sm text-center font-medium mb-0.5 text-zinc-50\">\r\n              {hasConsented ? 'Drag audio files here or click to select' : 'Accept Terms and Conditions to upload'}\r\n            </p>\r\n            <p className=\"text-xs text-cyan-300\">{supportedFormats.join(', ').toUpperCase()} (Max {Math.round(maxFileSize / 1024 / 1024)}MB each, {maxFiles} files)</p>\r\n          </div>}\r\n        </div>\r\n\r\n        {/* Consent Checkbox */}\r\n        <div className=\"mt-6 pt-4 border-t border-slate-600\">\r\n          <div className=\"flex items-start gap-3\">\r\n            <Checkbox id=\"consent\" checked={hasConsented} onCheckedChange={handleConsentChange} className=\"mt-1 bg-gray-50 text-blue-950\" />\r\n            <div className=\"flex-1\">\r\n              <label htmlFor=\"consent\" className=\"text-sm cursor-pointer leading-relaxed bg-gradient-to-r from-blue-200 via-cyan-200 to-purple-200 bg-clip-text text-transparent font-semibold animate-pulse\" style={{\r\n                textShadow: '0 0 20px rgba(96, 165, 250, 0.4), 0 0 30px rgba(165, 180, 252, 0.3)'\r\n              }}>\r\n                I agree to the{' '}\r\n                <Link to=\"/terms\" className=\"text-blue-300 hover:text-blue-200 underline inline-flex items-center gap-1 font-bold\" target=\"_blank\">\r\n                  Terms and Conditions\r\n                  <ExternalLink className=\"h-3 w-3\" />\r\n                </Link>\r\n                {' '}and acknowledge the Copyright Disclaimer. I confirm that I own or have proper authorization\r\n                for all audio files I upload and process through this service.\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Error Messages */}\r\n        {errorMessage && <div className=\"mt-4 p-3 rounded-md bg-red-900/50 border border-red-600/50 text-red-200 flex items-center text-sm\">\r\n          <AlertCircle className=\"h-4 w-4 mr-2 flex-shrink-0\" />\r\n          {errorMessage}\r\n        </div>}\r\n\r\n        {/* Upload Status */}\r\n        {!hasConsented && <div className=\"mt-4 p-3 rounded-md bg-yellow-900/50 border border-yellow-600/50 text-yellow-200 flex items-center text-sm\">\r\n          <AlertCircle className=\"h-4 w-4 mr-2 flex-shrink-0\" />\r\n          Please accept the Terms and Conditions to enable file uploads.\r\n        </div>}\r\n      </CardContent>\r\n    </Card>\r\n  </div>;\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\UploadZone.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\UserHeader.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[892,895],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[892,895],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[946,949],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[946,949],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":96,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":96,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2888,2891],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2888,2891],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":116,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":116,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3482,3485],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3482,3485],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Avatar, AvatarFallback } from '@/components/ui/avatar';\r\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from '@/components/ui/dropdown-menu';\r\nimport { LogOut, User as UserIcon, Shield, Trash2 } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { ProfileModal } from '@/components/ProfileModal';\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from '@/components/ui/alert-dialog';\r\n\r\nexport const UserHeader = () => {\r\n  const navigate = useNavigate();\r\n  const [user, setUser] = useState<any>(null);\r\n  const [profile, setProfile] = useState<any>(null);\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n  const [showProfile, setShowProfile] = useState(false);\r\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Check for dev bypass\r\n    if (localStorage.getItem(\"dev_bypass\") === \"true\") {\r\n      setUser({ email: \"dev@local.test\" });\r\n      setProfile({ full_name: \"Dev User\" });\r\n      setIsAdmin(true);\r\n      return;\r\n    }\r\n\r\n    // Get current session\r\n    supabase.auth.getSession().then(({ data: { session } }) => {\r\n      if (session) {\r\n        setUser(session.user);\r\n        fetchProfile(session.user.id);\r\n        checkAdmin(session.user.id);\r\n      } else {\r\n        navigate('/auth');\r\n      }\r\n    });\r\n\r\n    // Listen for auth changes\r\n    const {\r\n      data: { subscription },\r\n    } = supabase.auth.onAuthStateChange((event, session) => {\r\n      if (session) {\r\n        setUser(session.user);\r\n        fetchProfile(session.user.id);\r\n        checkAdmin(session.user.id);\r\n      } else if (localStorage.getItem(\"dev_bypass\") !== \"true\") {\r\n        navigate('/auth');\r\n      }\r\n    });\r\n\r\n    return () => subscription.unsubscribe();\r\n  }, [navigate]);\r\n\r\n  const fetchProfile = async (userId: string) => {\r\n    const { data, error } = await supabase\r\n      .from('profiles')\r\n      .select('*')\r\n      .eq('id', userId)\r\n      .single();\r\n\r\n    if (data) {\r\n      setProfile(data);\r\n    }\r\n  };\r\n\r\n  const checkAdmin = async (userId: string) => {\r\n    const { data, error } = await supabase\r\n      .from('user_roles')\r\n      .select('role')\r\n      .eq('user_id', userId)\r\n      .eq('role', 'admin')\r\n      .single();\r\n\r\n    setIsAdmin(!!data);\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      // Clear dev bypass flag\r\n      localStorage.removeItem(\"dev_bypass\");\r\n\r\n      await supabase.auth.signOut();\r\n      toast.success('Signed out successfully');\r\n      navigate('/auth');\r\n    } catch (error: any) {\r\n      toast.error('Error signing out');\r\n    }\r\n  };\r\n\r\n  const handleDeleteAccount = async () => {\r\n    try {\r\n      // Send password reset email with instructions\r\n      const { error } = await supabase.auth.updateUser({\r\n        data: { account_deletion_requested: true }\r\n      });\r\n\r\n      if (error) throw error;\r\n\r\n      toast.success('Account deletion request sent. Please check your email for confirmation.');\r\n      setShowDeleteDialog(false);\r\n\r\n      // Sign out after requesting deletion\r\n      await supabase.auth.signOut();\r\n      navigate('/auth');\r\n    } catch (error: any) {\r\n      toast.error('Error requesting account deletion: ' + error.message);\r\n    }\r\n  };\r\n\r\n  if (!user) {\r\n    return null;\r\n  }\r\n\r\n  const initials = profile?.full_name\r\n    ? profile.full_name.split(' ').map((n: string) => n[0]).join('').toUpperCase()\r\n    : user.email?.[0].toUpperCase() || 'U';\r\n\r\n  return (\r\n    <>\r\n      <div className=\"flex items-center gap-4\">\r\n        <div className=\"text-right hidden md:block\">\r\n          <p className=\"text-sm font-medium text-cyan-300 brightness-125\">\r\n            {profile?.full_name || user.email}\r\n          </p>\r\n          {isAdmin && (\r\n            <p className=\"text-xs text-yellow-400 flex items-center gap-1 justify-end\">\r\n              <Shield className=\"h-3 w-3\" />\r\n              Admin\r\n            </p>\r\n          )}\r\n        </div>\r\n        <DropdownMenu>\r\n          <DropdownMenuTrigger asChild>\r\n            <Button variant=\"ghost\" className=\"relative h-10 w-10 rounded-full\">\r\n              <Avatar className=\"h-10 w-10 border-2 border-cyan-500\">\r\n                <AvatarFallback className=\"bg-gradient-to-r from-cyan-500 to-purple-500 text-white font-bold\">\r\n                  {initials}\r\n                </AvatarFallback>\r\n              </Avatar>\r\n            </Button>\r\n          </DropdownMenuTrigger>\r\n          <DropdownMenuContent align=\"end\" className=\"w-56 bg-slate-900 border-slate-700 z-[9999]\">\r\n            <DropdownMenuItem\r\n              onClick={() => setShowProfile(true)}\r\n              className=\"text-white hover:bg-slate-800 cursor-pointer\"\r\n            >\r\n              <UserIcon className=\"mr-2 h-4 w-4\" />\r\n              <span>Profile</span>\r\n            </DropdownMenuItem>\r\n            {isAdmin && (\r\n              <DropdownMenuItem className=\"text-yellow-400 hover:bg-slate-800 cursor-pointer\">\r\n                <Shield className=\"mr-2 h-4 w-4\" />\r\n                <span>Admin Panel</span>\r\n              </DropdownMenuItem>\r\n            )}\r\n            <DropdownMenuItem\r\n              onClick={() => setShowDeleteDialog(true)}\r\n              className=\"text-red-400 hover:bg-slate-800 cursor-pointer\"\r\n            >\r\n              <Trash2 className=\"mr-2 h-4 w-4\" />\r\n              <span>Delete Account</span>\r\n            </DropdownMenuItem>\r\n            <DropdownMenuItem\r\n              onClick={handleLogout}\r\n              className=\"text-orange-400 hover:bg-slate-800 cursor-pointer\"\r\n            >\r\n              <LogOut className=\"mr-2 h-4 w-4\" />\r\n              <span>Logout</span>\r\n            </DropdownMenuItem>\r\n          </DropdownMenuContent>\r\n        </DropdownMenu>\r\n      </div>\r\n\r\n      <ProfileModal\r\n        open={showProfile}\r\n        onOpenChange={setShowProfile}\r\n        user={user}\r\n        profile={profile}\r\n        isAdmin={isAdmin}\r\n      />\r\n\r\n      <AlertDialog open={showDeleteDialog} onOpenChange={setShowDeleteDialog}>\r\n        <AlertDialogContent className=\"bg-slate-900 border-slate-700 text-white\">\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle className=\"text-red-400\">Delete Account</AlertDialogTitle>\r\n            <AlertDialogDescription className=\"text-slate-300\">\r\n              Are you sure you want to delete your account? This action cannot be undone.\r\n              You will receive an email confirmation to proceed with the deletion.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel className=\"bg-slate-800 border-slate-700 text-white hover:bg-slate-700\">\r\n              Cancel\r\n            </AlertDialogCancel>\r\n            <AlertDialogAction\r\n              onClick={handleDeleteAccount}\r\n              className=\"bg-red-600 hover:bg-red-700 text-white\"\r\n            >\r\n              Request Deletion\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </>\r\n  );\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ai-mastering\\AIMasteringGuide.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ai-mastering\\AIMasteringSetupChecker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ai-mastering\\AIMasteringTab.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'checkPresetStatuses'. Either include it or remove the dependency array.","line":134,"column":6,"nodeType":"ArrayExpression","endLine":134,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [checkPresetStatuses]","fix":{"range":[4588,4590],"text":"[checkPresetStatuses]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":187,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":187,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6478,6481],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6478,6481],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect } from \"react\";\r\nimport {\r\n  Music,\r\n  Upload,\r\n  Crown,\r\n  Lock,\r\n  Loader2,\r\n  Settings,\r\n  BookOpen,\r\n  Plus,\r\n  Download,\r\n  TrendingUp,\r\n  Sparkles,\r\n  X,\r\n  CheckCircle,\r\n  Zap,\r\n  FileAudio\r\n} from \"lucide-react\";\r\nimport { useUserSubscription } from \"@/hooks/useUserSubscription\";\r\nimport { useLanguage } from \"@/contexts/LanguageContext\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Progress } from \"@/components/ui/progress\";\r\nimport { toast } from \"sonner\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport {\r\n  MasteringAdvancedSettings,\r\n  MasteringSettings,\r\n} from \"./MasteringAdvancedSettings\";\r\nimport {\r\n  mapSettingsToEnhancedBackend,\r\n  validateBackendParams,\r\n} from \"./AdvancedSettingsBackend\";\r\nimport { AIMasteringGuide } from \"./AIMasteringGuide\";\r\nimport { saveReferenceTrack, getReferenceTrack } from \"@/utils/referenceTrackStorage\";\r\nimport { masteringService } from \"@/services/masteringService\";\r\nimport { LUFSDisplay, AudioAnalysisData } from \"./LUFSDisplay\";\r\n\r\nexport const AIMasteringTab = () => {\r\n  const { t } = useLanguage();\r\n  const { isPremium, isAdmin, loading } = useUserSubscription();\r\n  const navigate = useNavigate();\r\n\r\n  // State with sessionStorage persistence for file metadata\r\n  const [targetFile, setTargetFile] = useState<File | null>(null);\r\n  const [targetFileInfo, setTargetFileInfo] = useState<{\r\n    name: string;\r\n    size: number;\r\n  } | null>(() => {\r\n    try {\r\n      const saved = sessionStorage.getItem(\"aiMastering_targetFile\");\r\n      return saved ? JSON.parse(saved) : null;\r\n    } catch {\r\n      return null;\r\n    }\r\n  });\r\n  const [referenceFile, setReferenceFile] = useState<File | null>(null);\r\n  const [referenceFileInfo, setReferenceFileInfo] = useState<{\r\n    name: string;\r\n    size: number;\r\n  } | null>(() => {\r\n    try {\r\n      const saved = sessionStorage.getItem(\"aiMastering_referenceFile\");\r\n      return saved ? JSON.parse(saved) : null;\r\n    } catch {\r\n      return null;\r\n    }\r\n  });\r\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\r\n  const [audioAnalysis, setAudioAnalysis] = useState<AudioAnalysisData | null>(null);\r\n\r\n  const handleAnalyze = async (type: 'target' | 'reference') => {\r\n    const file = type === 'target' ? targetFile : referenceFile;\r\n    if (!file) return;\r\n\r\n    setIsAnalyzing(true);\r\n    try {\r\n      const analysis = await masteringService.analyzeAudio(file);\r\n      setAudioAnalysis(prev => ({\r\n        ...prev,\r\n        [type]: analysis\r\n      } as AudioAnalysisData));\r\n      toast.success(`${type === 'target' ? 'Target' : 'Reference'} analyzed successfully`);\r\n    } catch (error) {\r\n      console.error(\"Analysis failed:\", error);\r\n      toast.error(\"Analysis failed\");\r\n    } finally {\r\n      setIsAnalyzing(false);\r\n    }\r\n  };\r\n\r\n  const [selectedPreset, setSelectedPreset] = useState<string | null>(() => {\r\n    try {\r\n      const saved = sessionStorage.getItem(\"aiMastering_selectedPreset\");\r\n      return saved ? JSON.parse(saved) : null;\r\n    } catch {\r\n      return null;\r\n    }\r\n  });\r\n  const [activeMode, setActiveMode] = useState<\"preset\" | \"custom\">(() => {\r\n    try {\r\n      const saved = sessionStorage.getItem(\"aiMastering_activeMode\");\r\n      return saved ? JSON.parse(saved) : \"preset\";\r\n    } catch {\r\n      return \"preset\";\r\n    }\r\n  });\r\n  const [error, setError] = useState<string>(\"\");\r\n  const [showAdvancedSettings, setShowAdvancedSettings] = useState(false);\r\n  const [showGuide, setShowGuide] = useState(false);\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [progress, setProgress] = useState(0);\r\n  const [masteredBlob, setMasteredBlob] = useState<Blob | null>(null);\r\n  const [masteredFileName, setMasteredFileName] = useState<string>(\"mastered_track.wav\");\r\n\r\n  // Admin state\r\n  const [presetStatuses, setPresetStatuses] = useState<Record<string, boolean>>({});\r\n  const adminInputRef = useRef<HTMLInputElement>(null);\r\n  const [adminTargetPreset, setAdminTargetPreset] = useState<string | null>(null);\r\n\r\n  const checkPresetStatuses = async () => {\r\n    const statuses: Record<string, boolean> = {};\r\n    for (const preset of MASTERING_PRESETS) {\r\n      const track = await getReferenceTrack(preset.id);\r\n      statuses[preset.id] = !!track;\r\n    }\r\n    setPresetStatuses(statuses);\r\n  };\r\n\r\n  useEffect(() => {\r\n    checkPresetStatuses();\r\n  }, []);\r\n\r\n  const handleAdminUploadClick = (e: React.MouseEvent, presetId: string) => {\r\n    e.stopPropagation();\r\n    setAdminTargetPreset(presetId);\r\n    adminInputRef.current?.click();\r\n  };\r\n\r\n  const handleAdminFileSelect = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file && adminTargetPreset) {\r\n      try {\r\n        await saveReferenceTrack(adminTargetPreset, file);\r\n        toast.success(`Reference saved for ${adminTargetPreset}`);\r\n        checkPresetStatuses();\r\n      } catch (error) {\r\n        console.error(\"Failed to save reference:\", error);\r\n        toast.error(\"Failed to save reference track\");\r\n      }\r\n    }\r\n    if (e.target) e.target.value = \"\";\r\n    setAdminTargetPreset(null);\r\n  };\r\n\r\n  // Helper function to trigger file download using native anchor tag\r\n  const downloadMasteredFile = (blob: Blob, fileName: string) => {\r\n    console.log(` Downloading file: ${fileName}, size: ${blob.size}, type: ${blob.type}`);\r\n\r\n    // Force audio/wav type if missing or incorrect\r\n    const wavBlob = blob.type === 'audio/wav' ? blob : new Blob([blob], { type: 'audio/wav' });\r\n\r\n    // Create a URL for the blob\r\n    const url = URL.createObjectURL(wavBlob);\r\n\r\n    // Create a temporary anchor element\r\n    const link = document.createElement(\"a\");\r\n    link.href = url;\r\n    link.download = fileName; // This attribute forces download\r\n    link.style.display = \"none\";\r\n\r\n    // Append to body, click, and remove\r\n    document.body.appendChild(link);\r\n    link.click();\r\n\r\n    // Cleanup\r\n    setTimeout(() => {\r\n      document.body.removeChild(link);\r\n      URL.revokeObjectURL(url);\r\n      console.log(\" Download triggered and cleanup complete\");\r\n    }, 100);\r\n  };\r\n\r\n  // Helper function to convert MasteringSettings to MasteringSettingsData\r\n  const convertSettingsFormat = (settings: MasteringSettings): any => {\r\n    return {\r\n      threshold: settings.threshold,\r\n      epsilon: settings.epsilon,\r\n      maxPieceLength: settings.max_piece_length,\r\n      bpm: settings.bpm,\r\n      timeSignatureNumerator: settings.time_signature_numerator,\r\n      timeSignatureDenominator: settings.time_signature_denominator,\r\n      pieceLengthBars: settings.piece_length_bars,\r\n      resamplingMethod: settings.resampling_method,\r\n      spectrumCompensation: settings.spectrum_compensation,\r\n      loudnessCompensation: settings.loudness_compensation,\r\n      analyzeFullSpectrum: settings.analyze_full_spectrum,\r\n      spectrumSmoothingWidth: settings.spectrum_smoothing_width,\r\n      smoothingSteps: settings.smoothing_steps,\r\n      spectrumCorrectionHops: settings.spectrum_correction_hops,\r\n      loudnessSteps: settings.loudness_steps,\r\n      spectrumBands: settings.spectrum_bands,\r\n      fftSize: settings.fft_size,\r\n      normalizeReference: settings.normalize_reference,\r\n      normalize: settings.normalize,\r\n      limiterMethod: settings.limiter_method,\r\n      limiterThreshold: settings.limiter_threshold_db,\r\n      loudnessCorrectionLimiting: settings.loudness_correction_limiting,\r\n      amplify: settings.amplify,\r\n      clipping: settings.clipping,\r\n      outputBits: settings.output_bits,\r\n      outputChannels: settings.output_channels,\r\n      ditheringMethod: settings.dithering_method,\r\n    };\r\n  };\r\n\r\n  const [advancedSettings, setAdvancedSettings] = useState<MasteringSettings>(\r\n    () => {\r\n      try {\r\n        const saved = sessionStorage.getItem(\"aiMastering_advancedSettings\");\r\n        return saved\r\n          ? JSON.parse(saved)\r\n          : {\r\n            threshold: 0.998138,\r\n            epsilon: 0.000001,\r\n            max_piece_length: 30.0,\r\n            bpm: 0.0,\r\n            time_signature_numerator: 4,\r\n            time_signature_denominator: 4,\r\n            piece_length_bars: 8.0,\r\n            resampling_method: \"FastSinc\",\r\n            spectrum_compensation: \"Frequency-Domain (Gain Envelope)\",\r\n            loudness_compensation: \"LUFS (Whole Signal)\",\r\n            analyze_full_spectrum: false,\r\n            spectrum_smoothing_width: 3,\r\n            smoothing_steps: 1,\r\n            spectrum_correction_hops: 2,\r\n            loudness_steps: 10,\r\n            spectrum_bands: 32,\r\n            fft_size: 4096,\r\n            normalize_reference: false,\r\n            normalize: false,\r\n            limiter_method: \"True Peak\",\r\n            limiter_threshold_db: -1.0,\r\n            loudness_correction_limiting: false,\r\n            amplify: false,\r\n            clipping: false,\r\n            output_bits: \"32 (IEEE float)\",\r\n            output_channels: 2,\r\n            dithering_method: \"TPDF\",\r\n          };\r\n      } catch {\r\n        return {\r\n          threshold: 0.998138,\r\n          epsilon: 0.000001,\r\n          max_piece_length: 30.0,\r\n          bpm: 0.0,\r\n          time_signature_numerator: 4,\r\n          time_signature_denominator: 4,\r\n          piece_length_bars: 8.0,\r\n          resampling_method: \"FastSinc\",\r\n          spectrum_compensation: \"Frequency-Domain (Gain Envelope)\",\r\n          loudness_compensation: \"LUFS (Whole Signal)\",\r\n          analyze_full_spectrum: false,\r\n          spectrum_smoothing_width: 3,\r\n          smoothing_steps: 1,\r\n          spectrum_correction_hops: 2,\r\n          loudness_steps: 10,\r\n          spectrum_bands: 32,\r\n          fft_size: 4096,\r\n          normalize_reference: false,\r\n          normalize: false,\r\n          limiter_method: \"True Peak\",\r\n          limiter_threshold_db: -1.0,\r\n          loudness_correction_limiting: false,\r\n          amplify: false,\r\n          clipping: false,\r\n          output_bits: \"32 (IEEE float)\",\r\n          output_channels: 2,\r\n          dithering_method: \"TPDF\",\r\n          output_format: \"wav\"\r\n        };\r\n      }\r\n    }\r\n  );\r\n  const targetInputRef = useRef<HTMLInputElement>(null);\r\n  const referenceInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  // Save state to sessionStorage whenever it changes\r\n  useEffect(() => {\r\n    try {\r\n      if (targetFileInfo) {\r\n        sessionStorage.setItem(\"aiMastering_targetFile\", JSON.stringify(targetFileInfo));\r\n      } else {\r\n        sessionStorage.removeItem(\"aiMastering_targetFile\");\r\n      }\r\n    } catch (e) { console.error(e); }\r\n  }, [targetFileInfo]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      if (referenceFileInfo) {\r\n        sessionStorage.setItem(\"aiMastering_referenceFile\", JSON.stringify(referenceFileInfo));\r\n      } else {\r\n        sessionStorage.removeItem(\"aiMastering_referenceFile\");\r\n      }\r\n    } catch (e) { console.error(e); }\r\n  }, [referenceFileInfo]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      if (selectedPreset) {\r\n        sessionStorage.setItem(\"aiMastering_selectedPreset\", JSON.stringify(selectedPreset));\r\n      } else {\r\n        sessionStorage.removeItem(\"aiMastering_selectedPreset\");\r\n      }\r\n    } catch (e) { console.error(e); }\r\n  }, [selectedPreset]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      sessionStorage.setItem(\"aiMastering_activeMode\", JSON.stringify(activeMode));\r\n    } catch (e) { console.error(e); }\r\n  }, [activeMode]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      sessionStorage.setItem(\"aiMastering_advancedSettings\", JSON.stringify(advancedSettings));\r\n    } catch (e) { console.error(e); }\r\n  }, [advancedSettings]);\r\n\r\n  const MASTERING_PRESETS = [\r\n    { id: \"rock\", displayName: \"Rock\", icon: \"\", gradient: \"from-red-500 to-orange-600\" },\r\n    { id: \"indie-rock\", displayName: \"Indie Rock\", icon: \"\", gradient: \"from-orange-500 to-red-500\" },\r\n    { id: \"punk-rock\", displayName: \"Punk Rock\", icon: \"\", gradient: \"from-red-600 to-black\" },\r\n    { id: \"metal\", displayName: \"Metal\", icon: \"\", gradient: \"from-gray-600 to-black\" },\r\n    { id: \"dance-pop\", displayName: \"Dance Pop\", icon: \"\", gradient: \"from-pink-500 to-purple-500\" },\r\n    { id: \"drum-bass\", displayName: \"Drum & Bass\", icon: \"\", gradient: \"from-blue-600 to-purple-600\" },\r\n    { id: \"dubstep\", displayName: \"Dubstep\", icon: \"\", gradient: \"from-green-600 to-blue-600\" },\r\n    { id: \"edm\", displayName: \"EDM\", icon: \"\", gradient: \"from-cyan-500 to-blue-600\" },\r\n    { id: \"house\", displayName: \"House\", icon: \"\", gradient: \"from-purple-500 to-pink-500\" },\r\n    { id: \"techno\", displayName: \"Techno\", icon: \"\", gradient: \"from-gray-500 to-blue-600\" },\r\n    { id: \"hip-hop\", displayName: \"Hip-Hop\", icon: \"\", gradient: \"from-yellow-600 to-red-600\" },\r\n    { id: \"reggae\", displayName: \"Reggae\", icon: \"\", gradient: \"from-green-500 to-yellow-500\" },\r\n    { id: \"reggaeton\", displayName: \"Reggaeton\", icon: \"\", gradient: \"from-red-500 to-yellow-500\" },\r\n    { id: \"rnb-soul\", displayName: \"Rnb/Soul\", icon: \"\", gradient: \"from-purple-600 to-pink-600\" },\r\n    { id: \"trap\", displayName: \"Trap\", icon: \"\", gradient: \"from-black to-red-600\" },\r\n    { id: \"pop\", displayName: \"Pop\", icon: \"\", gradient: \"from-pink-400 to-purple-400\" },\r\n    { id: \"kpop-jpop\", displayName: \"K-pop/J-pop\", icon: \"\", gradient: \"from-pink-300 to-blue-300\" },\r\n    { id: \"latin-pop\", displayName: \"Latin Pop\", icon: \"\", gradient: \"from-yellow-500 to-red-600\" },\r\n    { id: \"country\", displayName: \"Country\", icon: \"\", gradient: \"from-amber-600 to-yellow-500\" },\r\n    { id: \"jazz\", displayName: \"Jazz\", icon: \"\", gradient: \"from-purple-500 to-indigo-600\" },\r\n  ] as const;\r\n\r\n  const handleFileChange = (\r\n    e: React.ChangeEvent<HTMLInputElement>,\r\n    type: \"target\" | \"reference\"\r\n  ) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      if (type === \"target\") {\r\n        setTargetFile(file);\r\n        setTargetFileInfo({ name: file.name, size: file.size });\r\n      } else {\r\n        setReferenceFile(file);\r\n        setReferenceFileInfo({ name: file.name, size: file.size });\r\n      }\r\n    }\r\n    if (e.target) e.target.value = \"\";\r\n  };\r\n\r\n  const handlePresetClick = async (presetId: string) => {\r\n    setSelectedPreset(presetId);\r\n    setActiveMode(\"preset\");\r\n    setReferenceFile(null);\r\n    setReferenceFileInfo(null);\r\n\r\n    try {\r\n      const track = await getReferenceTrack(presetId);\r\n      if (track) {\r\n        setReferenceFile(track.file);\r\n        setReferenceFileInfo({ name: track.name, size: track.size });\r\n        toast.success(\"Reference track loaded\", { description: `Using saved reference for ${presetId}` });\r\n      }\r\n    } catch (e) {\r\n      console.error(\"Failed to load reference track:\", e);\r\n    }\r\n  };\r\n\r\n  const handleCustomReferenceClick = () => {\r\n    setActiveMode(\"custom\");\r\n    setSelectedPreset(null);\r\n    referenceInputRef.current?.click();\r\n  };\r\n\r\n  const handleMastering = async () => {\r\n    if (!targetFile) {\r\n      setError(\"Please select a target audio file.\");\r\n      toast.error(\"Please select a target audio file.\");\r\n      return;\r\n    }\r\n\r\n    let referenceFileToUse: File | null = null;\r\n\r\n    if (activeMode === \"preset\" && selectedPreset) {\r\n      if (!referenceFile) {\r\n        setError(`Please upload a reference file for the ${selectedPreset} preset first.`);\r\n        toast.error(\"Reference track required for mastering\");\r\n        return;\r\n      }\r\n      referenceFileToUse = referenceFile;\r\n    } else if (activeMode === \"custom\" && referenceFile) {\r\n      referenceFileToUse = referenceFile;\r\n    }\r\n\r\n    if (!referenceFileToUse) {\r\n      setError(\"Please select a reference: Choose a genre preset or upload custom reference.\");\r\n      toast.error(\"Reference track required for mastering\");\r\n      return;\r\n    }\r\n\r\n    setError(\"\");\r\n    setIsProcessing(true);\r\n    setProgress(0);\r\n\r\n    try {\r\n      console.log(\" Starting Matchering AI Mastering...\");\r\n      const backendParams = mapSettingsToEnhancedBackend(advancedSettings);\r\n      const validationErrors = validateBackendParams(backendParams);\r\n      if (validationErrors.length > 0) console.warn(' Settings validation warnings:', validationErrors);\r\n\r\n      const convertedSettings = convertSettingsFormat(advancedSettings);\r\n      const result = await masteringService.masterAudio(\r\n        targetFile,\r\n        referenceFileToUse,\r\n        convertedSettings,\r\n        (stage, percent) => {\r\n          setProgress(percent);\r\n          console.log(`Progress: ${stage} - ${percent.toFixed(0)}%`);\r\n        }\r\n      );\r\n\r\n      const { blob: resultBlob, analysis } = result;\r\n      if (analysis) setAudioAnalysis(analysis);\r\n\r\n      // Sanitize filename: ensure .wav extension\r\n      const originalName = targetFile.name;\r\n      const nameWithoutExt = originalName.substring(0, originalName.lastIndexOf('.')) || originalName;\r\n      const fileName = `mastered_${nameWithoutExt}.wav`;\r\n\r\n      setMasteredFileName(fileName);\r\n      setMasteredBlob(resultBlob);\r\n\r\n      downloadMasteredFile(resultBlob, fileName);\r\n      toast.success(\" Your track has been mastered with Matchering!\");\r\n\r\n      setTargetFile(null);\r\n      setTargetFileInfo(null);\r\n      setReferenceFile(null);\r\n      setReferenceFileInfo(null);\r\n      sessionStorage.removeItem(\"aiMastering_targetFile\");\r\n      sessionStorage.removeItem(\"aiMastering_referenceFile\");\r\n    } catch (err) {\r\n      let errorMsg = \"An error occurred during mastering\";\r\n      if (err instanceof Error) errorMsg = err.message;\r\n      else if (typeof err === \"string\") errorMsg = err;\r\n      console.error(\"Mastering error:\", err);\r\n      setError(errorMsg);\r\n      toast.error(errorMsg);\r\n    } finally {\r\n      setIsProcessing(false);\r\n      setProgress(0);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Card className=\"bg-slate-950 border-slate-800\">\r\n        <CardContent className=\"p-12 text-center\">\r\n          <Loader2 className=\"h-12 w-12 animate-spin mx-auto mb-4 text-cyan-500\" />\r\n          <p className=\"text-slate-400\">{t(\"status.loading\")}...</p>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  if (!isPremium) {\r\n    return (\r\n      <Card className=\"bg-gradient-to-br from-purple-900/30 to-blue-900/30 border-purple-500/30 shadow-2xl backdrop-blur-sm\">\r\n        <CardContent className=\"p-12 text-center space-y-6\">\r\n          <div className=\"flex justify-center\">\r\n            <div className=\"relative\">\r\n              <Lock className=\"h-24 w-24 text-purple-400 animate-pulse\" />\r\n              <Crown className=\"h-12 w-12 text-yellow-400 absolute -top-2 -right-2 animate-bounce\" />\r\n            </div>\r\n          </div>\r\n          <div className=\"space-y-2\">\r\n            <h2 className=\"text-3xl font-bold bg-gradient-to-r from-purple-200 via-pink-200 to-blue-200 bg-clip-text text-transparent\">\r\n              {t(\"aiMastering.premiumFeature\")}\r\n            </h2>\r\n            <p className=\"text-slate-300 text-lg\">{t(\"aiMastering.unlockMessage\")}</p>\r\n          </div>\r\n          <Button\r\n            onClick={() => navigate(\"/auth\")}\r\n            className=\"bg-gradient-to-r from-purple-600 via-pink-600 to-blue-600 hover:from-purple-700 hover:via-pink-700 hover:to-blue-700 text-white font-bold py-6 px-12 rounded-xl shadow-[0_0_30px_rgba(168,85,247,0.5)] text-lg transition-all hover:scale-105\"\r\n            size=\"lg\"\r\n          >\r\n            <Crown className=\"h-6 w-6 mr-2\" />\r\n            {t(\"aiMastering.upgradeToPremium\")}\r\n          </Button>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen p-4 sm:p-6 md:p-8 bg-transparent text-slate-200\">\r\n      <div className=\"max-w-7xl mx-auto space-y-8\">\r\n        {/* Header */}\r\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n          <div>\r\n            <h1 className=\"text-4xl font-black tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-600 drop-shadow-[0_0_10px_rgba(6,182,212,0.5)]\">\r\n              AI Audio Mastering\r\n            </h1>\r\n            <p className=\"text-slate-400 mt-1 font-light tracking-wide\">\r\n              Professional mastering powered by neural networks\r\n            </p>\r\n          </div>\r\n          <div className=\"flex items-center gap-3\">\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={() => setShowGuide(true)}\r\n              className=\"border-slate-700 hover:border-cyan-500/50 text-slate-400 hover:text-cyan-400 hover:bg-cyan-950/30 transition-all\"\r\n            >\r\n              <BookOpen className=\"h-4 w-4 mr-2\" />\r\n              Guide\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={() => setShowAdvancedSettings(true)}\r\n              className=\"border-slate-700 hover:border-purple-500/50 text-slate-400 hover:text-purple-400 hover:bg-purple-950/30 transition-all\"\r\n            >\r\n              <Settings className=\"h-4 w-4 mr-2\" />\r\n              Settings\r\n            </Button>\r\n            <Badge className=\"bg-gradient-to-r from-amber-500 to-orange-600 text-white border-0 shadow-[0_0_15px_rgba(245,158,11,0.4)] px-3 py-1\">\r\n               PRO\r\n            </Badge>\r\n          </div>\r\n        </div>\r\n\r\n        <MasteringAdvancedSettings\r\n          open={showAdvancedSettings}\r\n          onOpenChange={setShowAdvancedSettings}\r\n          settings={advancedSettings}\r\n          onSettingsChange={setAdvancedSettings}\r\n        />\r\n        <AIMasteringGuide open={showGuide} onOpenChange={setShowGuide} />\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n          {/* Left Column: Target & Presets */}\r\n          <div className=\"space-y-8\">\r\n            {/* Target Upload Card */}\r\n            <Card className=\"bg-slate-900/80 border-slate-800 shadow-xl backdrop-blur-sm overflow-hidden group\">\r\n              <div className=\"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-cyan-500 to-blue-600 opacity-50 group-hover:opacity-100 transition-opacity\" />\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2 text-xl text-slate-100\">\r\n                  <div className=\"p-2 rounded-lg bg-cyan-500/10 text-cyan-400\">\r\n                    <Music className=\"h-5 w-5\" />\r\n                  </div>\r\n                  1. Upload Target Track\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4\">\r\n                <div\r\n                  className={`border-2 border-dashed rounded-2xl p-8 text-center cursor-pointer transition-all duration-300 ${targetFile\r\n                    ? \"border-cyan-500/50 bg-cyan-500/5\"\r\n                    : \"border-slate-700 hover:border-cyan-500/50 hover:bg-slate-800/50\"\r\n                    }`}\r\n                  onClick={() => targetInputRef.current?.click()}\r\n                >\r\n                  {targetFile ? (\r\n                    <div className=\"space-y-4\">\r\n                      <div className=\"mx-auto w-16 h-16 rounded-full bg-cyan-500/20 flex items-center justify-center animate-pulse\">\r\n                        <FileAudio className=\"h-8 w-8 text-cyan-400\" />\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"text-lg font-medium text-cyan-100\">{targetFile.name}</p>\r\n                        <p className=\"text-sm text-cyan-400/60\">{(targetFile.size / 1024 / 1024).toFixed(2)} MB</p>\r\n                      </div>\r\n                      <div className=\"flex justify-center gap-3 pt-2\">\r\n                        <Button\r\n                          size=\"sm\"\r\n                          onClick={(e) => { e.stopPropagation(); handleAnalyze('target'); }}\r\n                          disabled={isAnalyzing}\r\n                          className=\"bg-cyan-500/20 hover:bg-cyan-500/30 text-cyan-300 border border-cyan-500/30\"\r\n                        >\r\n                          {isAnalyzing ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : <Sparkles className=\"h-4 w-4 mr-2\" />}\r\n                          Analyze\r\n                        </Button>\r\n                        <Button\r\n                          size=\"sm\"\r\n                          variant=\"ghost\"\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            setTargetFile(null);\r\n                            setTargetFileInfo(null);\r\n                            if (targetInputRef.current) targetInputRef.current.value = \"\";\r\n                          }}\r\n                          className=\"text-red-400 hover:text-red-300 hover:bg-red-500/10\"\r\n                        >\r\n                          Remove\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    <>\r\n                      <div className=\"mx-auto w-16 h-16 rounded-full bg-slate-800 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300\">\r\n                        <Upload className=\"h-8 w-8 text-slate-400 group-hover:text-cyan-400 transition-colors\" />\r\n                      </div>\r\n                      <p className=\"text-slate-300 font-medium text-lg\">Drop your mix here</p>\r\n                      <p className=\"text-slate-500 text-sm mt-1\">WAV, MP3, FLAC (Max 150MB)</p>\r\n                    </>\r\n                  )}\r\n                  <input\r\n                    type=\"file\"\r\n                    ref={targetInputRef}\r\n                    onChange={(e) => handleFileChange(e, \"target\")}\r\n                    className=\"hidden\"\r\n                    accept=\".wav,.mp3,.flac\"\r\n                  />\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Presets Grid */}\r\n            <Card className=\"bg-slate-900/80 border-slate-800 shadow-xl backdrop-blur-sm\">\r\n              <CardHeader className=\"flex flex-row items-center justify-between\">\r\n                <CardTitle className=\"flex items-center gap-2 text-xl text-slate-100\">\r\n                  <div className=\"p-2 rounded-lg bg-purple-500/10 text-purple-400\">\r\n                    <Zap className=\"h-5 w-5\" />\r\n                  </div>\r\n                  2. Choose Style\r\n                </CardTitle>\r\n                {isAdmin && <Badge variant=\"outline\" className=\"border-purple-500/30 text-purple-400\">Admin</Badge>}\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar\">\r\n                  {MASTERING_PRESETS.map((preset) => {\r\n                    const isSelected = selectedPreset === preset.id && activeMode === \"preset\";\r\n                    return (\r\n                      <button\r\n                        key={preset.id}\r\n                        onClick={() => handlePresetClick(preset.id)}\r\n                        className={`relative group p-4 rounded-xl transition-all duration-300 border ${isSelected\r\n                          ? \"bg-slate-800 border-purple-500 shadow-[0_0_15px_rgba(168,85,247,0.3)] scale-105\"\r\n                          : \"bg-slate-950/50 border-slate-800 hover:border-slate-600 hover:bg-slate-900\"\r\n                          }`}\r\n                      >\r\n                        <div className={`absolute inset-0 rounded-xl bg-gradient-to-br ${preset.gradient} opacity-0 group-hover:opacity-10 transition-opacity`} />\r\n                        <div className=\"text-2xl mb-2 transform group-hover:scale-110 transition-transform\">{preset.icon}</div>\r\n                        <div className={`text-sm font-medium ${isSelected ? \"text-purple-300\" : \"text-slate-400 group-hover:text-slate-200\"}`}>\r\n                          {preset.displayName}\r\n                        </div>\r\n                        {isSelected && (\r\n                          <div className=\"absolute top-2 right-2\">\r\n                            <CheckCircle className=\"h-4 w-4 text-purple-500\" />\r\n                          </div>\r\n                        )}\r\n                        {isAdmin && (\r\n                          <div className=\"absolute top-2 right-2 z-20 flex gap-1\">\r\n                            <Button\r\n                              size=\"icon\"\r\n                              variant=\"ghost\"\r\n                              className=\"h-6 w-6 rounded-full bg-slate-900/50 hover:bg-purple-500 hover:text-white\"\r\n                              onClick={(e) => handleAdminUploadClick(e, preset.id)}\r\n                            >\r\n                              <Upload className=\"h-3 w-3\" />\r\n                            </Button>\r\n                          </div>\r\n                        )}\r\n                        {presetStatuses[preset.id] && (\r\n                          <div className={`absolute ${isAdmin ? 'top-2 left-2' : 'top-2 right-2'} z-10`}>\r\n                            <div className=\"h-2 w-2 rounded-full bg-emerald-500 shadow-[0_0_5px_rgba(16,185,129,0.5)]\" />\r\n                          </div>\r\n                        )}\r\n                      </button>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n\r\n          {/* Right Column: Reference & Actions */}\r\n          <div className=\"space-y-8\">\r\n            {/* Custom Reference Card */}\r\n            <Card className=\"bg-slate-900/80 border-slate-800 shadow-xl backdrop-blur-sm relative overflow-hidden\">\r\n              <div className=\"absolute top-0 right-0 w-1 h-full bg-gradient-to-b from-purple-500 to-pink-600 opacity-50\" />\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2 text-xl text-slate-100\">\r\n                  <div className=\"p-2 rounded-lg bg-pink-500/10 text-pink-400\">\r\n                    <Upload className=\"h-5 w-5\" />\r\n                  </div>\r\n                  ...Or Custom Reference\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div\r\n                  className={`border-2 border-dashed rounded-2xl p-6 text-center cursor-pointer transition-all duration-300 ${activeMode === \"custom\" && referenceFile\r\n                    ? \"border-pink-500/50 bg-pink-500/5\"\r\n                    : \"border-slate-700 hover:border-pink-500/50 hover:bg-slate-800/50\"\r\n                    }`}\r\n                  onClick={handleCustomReferenceClick}\r\n                >\r\n                  {activeMode === \"custom\" && referenceFile ? (\r\n                    <div className=\"space-y-4\">\r\n                      <div className=\"mx-auto w-16 h-16 rounded-full bg-pink-500/20 flex items-center justify-center animate-pulse\">\r\n                        <Music className=\"h-8 w-8 text-pink-400\" />\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"text-lg font-medium text-pink-100\">{referenceFile.name}</p>\r\n                        <p className=\"text-sm text-pink-400/60\">{(referenceFile.size / 1024 / 1024).toFixed(2)} MB</p>\r\n                      </div>\r\n                      <div className=\"flex justify-center gap-3 pt-2\">\r\n                        <Button\r\n                          size=\"sm\"\r\n                          onClick={(e) => { e.stopPropagation(); handleAnalyze('reference'); }}\r\n                          disabled={isAnalyzing}\r\n                          className=\"bg-pink-500/20 hover:bg-pink-500/30 text-pink-300 border border-pink-500/30\"\r\n                        >\r\n                          {isAnalyzing ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : <Sparkles className=\"h-4 w-4 mr-2\" />}\r\n                          Analyze\r\n                        </Button>\r\n                        <Button\r\n                          size=\"sm\"\r\n                          variant=\"ghost\"\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            setReferenceFile(null);\r\n                            setReferenceFileInfo(null);\r\n                            if (referenceInputRef.current) referenceInputRef.current.value = \"\";\r\n                          }}\r\n                          className=\"text-red-400 hover:text-red-300 hover:bg-red-500/10\"\r\n                        >\r\n                          Remove\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"flex flex-col items-center gap-2 py-2\">\r\n                      <Upload className=\"h-8 w-8 text-slate-500\" />\r\n                      <p className=\"text-slate-400 font-medium\">Upload Reference Track</p>\r\n                    </div>\r\n                  )}\r\n                  <input\r\n                    type=\"file\"\r\n                    ref={referenceInputRef}\r\n                    onChange={(e) => handleFileChange(e, \"reference\")}\r\n                    className=\"hidden\"\r\n                    accept=\".wav,.mp3,.flac\"\r\n                  />\r\n                  <input\r\n                    type=\"file\"\r\n                    ref={adminInputRef}\r\n                    onChange={handleAdminFileSelect}\r\n                    className=\"hidden\"\r\n                    accept=\".wav,.mp3,.flac\"\r\n                  />\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Action Area */}\r\n            <div className=\"space-y-6\">\r\n              <Button\r\n                onClick={handleMastering}\r\n                disabled={isProcessing || !targetFile || (!selectedPreset && !referenceFile)}\r\n                className=\"w-full h-24 text-2xl font-black tracking-widest uppercase bg-gradient-to-r from-cyan-600 via-blue-600 to-purple-600 hover:from-cyan-500 hover:via-blue-500 hover:to-purple-500 shadow-[0_0_30px_rgba(6,182,212,0.4)] hover:shadow-[0_0_50px_rgba(6,182,212,0.6)] transition-all duration-300 rounded-2xl border-2 border-white/10 relative overflow-hidden group\"\r\n              >\r\n                <div className=\"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20\" />\r\n                <div className=\"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent\" />\r\n                <span className=\"relative z-10 flex items-center justify-center gap-4 group-hover:scale-105 transition-transform\">\r\n                  {isProcessing ? (\r\n                    <>\r\n                      <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n                      Processing...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <Sparkles className=\"h-8 w-8 fill-yellow-300 text-yellow-300 animate-pulse\" />\r\n                      Master My Track\r\n                    </>\r\n                  )}\r\n                </span>\r\n              </Button>\r\n\r\n              {/* Progress & Status */}\r\n              {isProcessing && (\r\n                <Card className=\"bg-slate-900/90 border-slate-800 animate-in fade-in slide-in-from-bottom-4\">\r\n                  <CardContent className=\"p-6 space-y-4\">\r\n                    <div className=\"flex justify-between text-sm font-medium text-cyan-400\">\r\n                      <span>Processing...</span>\r\n                      <span>{progress.toFixed(0)}%</span>\r\n                    </div>\r\n                    <Progress value={progress} className=\"h-3 bg-slate-800\" indicatorClassName=\"bg-gradient-to-r from-cyan-500 to-purple-500\" />\r\n                    <p className=\"text-xs text-center text-slate-500 font-mono\">\r\n                      {progress < 30 && \"Uploading to secure cloud...\"}\r\n                      {progress >= 30 && progress < 50 && \"Analyzing audio spectrum...\"}\r\n                      {progress >= 50 && progress < 80 && \"Applying AI mastering chain...\"}\r\n                      {progress >= 80 && \"Finalizing and downloading...\"}\r\n                    </p>\r\n                  </CardContent>\r\n                </Card>\r\n              )}\r\n\r\n              {/* Analysis & Results */}\r\n              {(audioAnalysis || masteredBlob) && (\r\n                <Card className=\"bg-slate-900/90 border-slate-800\">\r\n                  <CardHeader>\r\n                    <CardTitle className=\"flex items-center gap-2 text-lg text-slate-200\">\r\n                      <ActivityIcon className=\"h-5 w-5 text-emerald-400\" />\r\n                      Analysis Results\r\n                    </CardTitle>\r\n                  </CardHeader>\r\n                  <CardContent className=\"space-y-6\">\r\n                    <LUFSDisplay analysis={audioAnalysis || { target: null, reference: null, output: null }} />\r\n\r\n                    {masteredBlob && (\r\n                      <Button\r\n                        onClick={() => downloadMasteredFile(masteredBlob, masteredFileName)}\r\n                        className=\"w-full bg-emerald-600 hover:bg-emerald-500 text-white shadow-[0_0_20px_rgba(16,185,129,0.3)]\"\r\n                        size=\"lg\"\r\n                      >\r\n                        <Download className=\"mr-2 h-5 w-5\" />\r\n                        Download Mastered Track Again\r\n                      </Button>\r\n                    )}\r\n                  </CardContent>\r\n                </Card>\r\n              )}\r\n\r\n              {error && (\r\n                <div className=\"p-4 bg-red-950/30 border border-red-500/30 rounded-xl text-red-400 text-sm text-center animate-in fade-in\">\r\n                  {error}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Helper component for icon\r\nconst ActivityIcon = ({ className }: { className?: string }) => (\r\n  <svg\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    viewBox=\"0 0 24 24\"\r\n    fill=\"none\"\r\n    stroke=\"currentColor\"\r\n    strokeWidth=\"2\"\r\n    strokeLinecap=\"round\"\r\n    strokeLinejoin=\"round\"\r\n    className={className}\r\n  >\r\n    <path d=\"M22 12h-4l-3 9L9 3l-3 9H2\" />\r\n  </svg>\r\n);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ai-mastering\\AdminReferenceManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ai-mastering\\AdvancedSettingsBackend.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ai-mastering\\CustomReferenceMastering.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":109,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":109,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3767,3770],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3767,3770],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef } from 'react';\r\nimport { Card } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Upload, Download, Loader2, Settings } from 'lucide-react';\r\nimport { useLanguage } from '@/contexts/LanguageContext';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { MasteringSettings, MasteringSettingsData } from './MasteringSettings';\r\nimport { masteringService } from '@/services/masteringService';\r\nimport { Progress } from '@/components/ui/progress';\r\n\r\nconst defaultSettings: MasteringSettingsData = {\r\n  threshold: 0.998138,\r\n  epsilon: 0.000001,\r\n  maxPieceLength: 30.0,\r\n  bpm: 0.0,\r\n  timeSignatureNumerator: 4,\r\n  timeSignatureDenominator: 4,\r\n  pieceLengthBars: 8.0,\r\n  resamplingMethod: 'FastSinc',\r\n  spectrumCompensation: 'Frequency-Domain (Gain Envelope)',\r\n  loudnessCompensation: 'LUFS (Whole Signal)',\r\n  analyzeFullSpectrum: false,\r\n  spectrumSmoothingWidth: 3,\r\n  smoothingSteps: 1,\r\n  spectrumCorrectionHops: 2,\r\n  loudnessSteps: 10,\r\n  spectrumBands: 32,\r\n  fftSize: 4096,\r\n  normalizeReference: false,\r\n  normalize: false,\r\n  limiterMethod: 'True Peak',\r\n  limiterThreshold: -1.0,\r\n  loudnessCorrectionLimiting: false,\r\n  amplify: false,\r\n  clipping: false,\r\n  outputBits: '32 (IEEE float)',\r\n  outputChannels: 2,\r\n  ditheringMethod: 'TPDF',\r\n};\r\n\r\nexport const CustomReferenceMastering = () => {\r\n  const { t } = useLanguage();\r\n  const { toast } = useToast();\r\n  const [targetFile, setTargetFile] = useState<File | null>(null);\r\n  const [referenceFile, setReferenceFile] = useState<File | null>(null);\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [masteredUrl, setMasteredUrl] = useState<string | null>(null);\r\n  const [settingsOpen, setSettingsOpen] = useState(false);\r\n  const [settings, setSettings] = useState<MasteringSettingsData>(defaultSettings);\r\n  const [progressMessage, setProgressMessage] = useState<string>('');\r\n  const [progressPercent, setProgressPercent] = useState<number>(0);\r\n\r\n  const targetInputRef = useRef<HTMLInputElement>(null);\r\n  const referenceInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const handleTargetDrop = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    const file = e.dataTransfer.files[0];\r\n    if (file && (file.type.includes('audio') || file.name.match(/\\.(wav|mp3|flac)$/i))) {\r\n      setTargetFile(file);\r\n    }\r\n  };\r\n\r\n  const handleReferenceDrop = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    const file = e.dataTransfer.files[0];\r\n    if (file && (file.type.includes('audio') || file.name.match(/\\.(wav|mp3|flac)$/i))) {\r\n      setReferenceFile(file);\r\n    }\r\n  };\r\n\r\n  const handleMaster = async () => {\r\n    if (!targetFile || !referenceFile) {\r\n      toast({\r\n        title: t('error'),\r\n        description: 'Please select both target and reference files',\r\n        variant: 'destructive',\r\n      });\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    setProgressMessage('Starting mastering...');\r\n    setProgressPercent(0);\r\n    \r\n    try {\r\n      console.log(' Starting real Matchering mastering...');\r\n      \r\n      // Use the new mastering service with job-based flow\r\n      const resultBlob = await masteringService.masterAudio(\r\n        targetFile,\r\n        referenceFile,\r\n        settings,\r\n        (stage, percent) => {\r\n          setProgressMessage(stage);\r\n          setProgressPercent(percent);\r\n          console.log(`Progress: ${stage} - ${percent.toFixed(0)}%`);\r\n        }\r\n      );\r\n\r\n      // Create download URL\r\n      const url = URL.createObjectURL(resultBlob);\r\n      setMasteredUrl(url);\r\n      \r\n      toast({\r\n        title: t('success'),\r\n        description: 'Mastering complete! Download your mastered track.',\r\n      });\r\n    } catch (error: any) {\r\n      console.error(' Mastering error:', error);\r\n      toast({\r\n        title: t('error'),\r\n        description: error.message || 'Mastering failed. Please try again.',\r\n        variant: 'destructive',\r\n      });\r\n    } finally {\r\n      setIsProcessing(false);\r\n      setProgressMessage('');\r\n      setProgressPercent(0);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Card className=\"bg-card border-border p-6\">\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n          {/* Target File Upload */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"text-lg font-semibold text-foreground\">{t('aiMastering.targetTrack')}</h3>\r\n            <div\r\n              onDrop={handleTargetDrop}\r\n              onDragOver={(e) => e.preventDefault()}\r\n              className=\"border-2 border-dashed border-cyan-500/50 rounded-lg p-8 text-center hover:border-cyan-500 transition-colors cursor-pointer bg-cyan-500/5\"\r\n              onClick={() => targetInputRef.current?.click()}\r\n            >\r\n              <Upload className=\"h-12 w-12 text-cyan-400 mx-auto mb-4\" />\r\n              <p className=\"text-foreground font-medium mb-2\">\r\n                {targetFile ? targetFile.name : 'Drag and drop your WAV target file here, or use the file chooser below.'}\r\n              </p>\r\n              <p className=\"text-sm text-muted-foreground\">Target File: {targetFile ? 'File chosen' : 'No file chosen'}</p>\r\n              <input\r\n                ref={targetInputRef}\r\n                type=\"file\"\r\n                accept=\".wav,.mp3,.flac\"\r\n                className=\"hidden\"\r\n                onChange={(e) => setTargetFile(e.target.files?.[0] || null)}\r\n              />\r\n            </div>\r\n            {targetFile && (\r\n              <Button\r\n                onClick={() => targetInputRef.current?.click()}\r\n                className=\"w-full bg-cyan-500 hover:bg-cyan-600 text-white\"\r\n              >\r\n                Choose Target File\r\n              </Button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Reference File Upload */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"text-lg font-semibold text-foreground\">{t('aiMastering.referenceTrack')}</h3>\r\n            <div\r\n              onDrop={handleReferenceDrop}\r\n              onDragOver={(e) => e.preventDefault()}\r\n              className=\"border-2 border-dashed border-cyan-500/50 rounded-lg p-8 text-center hover:border-cyan-500 transition-colors cursor-pointer bg-cyan-500/5\"\r\n              onClick={() => referenceInputRef.current?.click()}\r\n            >\r\n              <Upload className=\"h-12 w-12 text-cyan-400 mx-auto mb-4\" />\r\n              <p className=\"text-foreground font-medium mb-2\">\r\n                {referenceFile ? referenceFile.name : 'Drag and drop your WAV reference file here, or use the file chooser below.'}\r\n              </p>\r\n              <p className=\"text-sm text-muted-foreground\">Reference File: {referenceFile ? 'File chosen' : 'No file chosen'}</p>\r\n              <input\r\n                ref={referenceInputRef}\r\n                type=\"file\"\r\n                accept=\".wav,.mp3,.flac\"\r\n                className=\"hidden\"\r\n                onChange={(e) => setReferenceFile(e.target.files?.[0] || null)}\r\n              />\r\n            </div>\r\n            {referenceFile && (\r\n              <Button\r\n                onClick={() => referenceInputRef.current?.click()}\r\n                className=\"w-full bg-cyan-500 hover:bg-cyan-600 text-white\"\r\n              >\r\n                Choose Reference File\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"space-y-4 mt-8\">\r\n          <div className=\"flex flex-wrap gap-4 justify-center\">\r\n            <Button\r\n              onClick={handleMaster}\r\n              disabled={!targetFile || !referenceFile || isProcessing}\r\n              className=\"bg-cyan-500 hover:bg-cyan-600 text-white px-8 py-6 text-lg font-semibold\"\r\n            >\r\n              {isProcessing ? (\r\n                <>\r\n                  <Loader2 className=\"h-5 w-5 mr-2 animate-spin\" />\r\n                  Processing...\r\n                </>\r\n              ) : (\r\n                'Master with AI'\r\n              )}\r\n            </Button>\r\n\r\n            <Button\r\n              onClick={() => setSettingsOpen(true)}\r\n              className=\"bg-cyan-500 hover:bg-cyan-600 text-white px-8 py-6 text-lg font-semibold\"\r\n            >\r\n              <Settings className=\"h-5 w-5 mr-2\" />\r\n              Settings\r\n            </Button>\r\n          </div>\r\n\r\n          {/* Progress Display */}\r\n          {isProcessing && (\r\n            <div className=\"space-y-2 max-w-md mx-auto\">\r\n              <Progress value={progressPercent} className=\"w-full\" />\r\n              <p className=\"text-sm text-muted-foreground text-center\">\r\n                {progressMessage} ({progressPercent.toFixed(0)}%)\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {masteredUrl && (\r\n            <Button\r\n              onClick={() => {\r\n                const a = document.createElement('a');\r\n                a.href = masteredUrl;\r\n                a.download = `mastered_${targetFile?.name || 'audio'}.wav`;\r\n                a.click();\r\n              }}\r\n              className=\"bg-green-500 hover:bg-green-600 text-white px-8 py-6 text-lg font-semibold\"\r\n            >\r\n              <Download className=\"h-5 w-5 mr-2\" />\r\n              Download\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </Card>\r\n\r\n      <MasteringSettings\r\n        open={settingsOpen}\r\n        onOpenChange={setSettingsOpen}\r\n        settings={settings}\r\n        onSettingsChange={setSettings}\r\n      />\r\n    </>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ai-mastering\\GenrePresetsMastering.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":122,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":122,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4577,4580],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4577,4580],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef } from 'react';\r\nimport { Card } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Upload, Music, Headphones, Mic, Radio, Download, Loader2, Settings } from 'lucide-react';\r\nimport { useLanguage } from '@/contexts/LanguageContext';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { MasteringSettings, MasteringSettingsData } from './MasteringSettings';\r\nimport { masteringService } from '@/services/masteringService';\r\nimport { loadPresetReferenceFile } from '@/utils/presetReferences';\r\nimport { Progress } from '@/components/ui/progress';\r\n\r\nconst defaultSettings: MasteringSettingsData = {\r\n  threshold: 0.998138,\r\n  epsilon: 0.000001,\r\n  maxPieceLength: 30.0,\r\n  bpm: 0.0,\r\n  timeSignatureNumerator: 4,\r\n  timeSignatureDenominator: 4,\r\n  pieceLengthBars: 8.0,\r\n  resamplingMethod: 'FastSinc',\r\n  spectrumCompensation: 'Frequency-Domain (Gain Envelope)',\r\n  loudnessCompensation: 'LUFS (Whole Signal)',\r\n  analyzeFullSpectrum: false,\r\n  spectrumSmoothingWidth: 3,\r\n  smoothingSteps: 1,\r\n  spectrumCorrectionHops: 2,\r\n  loudnessSteps: 10,\r\n  spectrumBands: 32,\r\n  fftSize: 4096,\r\n  normalizeReference: false,\r\n  normalize: false,\r\n  limiterMethod: 'True Peak',\r\n  limiterThreshold: -1.0,\r\n  loudnessCorrectionLimiting: false,\r\n  amplify: false,\r\n  clipping: false,\r\n  outputBits: '32 (IEEE float)',\r\n  outputChannels: 2,\r\n  ditheringMethod: 'TPDF',\r\n};\r\n\r\nconst genrePresets = [\r\n  { id: 'flat', name: 'Flat', icon: Music },\r\n  { id: 'bass-boost', name: 'Bass Boost', icon: Headphones },\r\n  { id: 'treble-boost', name: 'Treble Boost', icon: Headphones },\r\n  { id: 'jazz', name: 'Jazz', icon: Music },\r\n  { id: 'classical', name: 'Classical', icon: Music },\r\n  { id: 'electronic', name: 'Electronic', icon: Headphones },\r\n  { id: 'v-shape', name: 'V-Shape', icon: Music },\r\n  { id: 'vocal', name: 'Vocal', icon: Mic },\r\n  { id: 'rock', name: 'Rock', icon: Music },\r\n  { id: 'hip-hop', name: 'Hip-Hop', icon: Headphones },\r\n  { id: 'podcast', name: 'Podcast', icon: Mic },\r\n  { id: 'live', name: 'Live', icon: Radio },\r\n];\r\n\r\nexport const GenrePresetsMastering = () => {\r\n  const { t } = useLanguage();\r\n  const { toast } = useToast();\r\n  const [targetFile, setTargetFile] = useState<File | null>(null);\r\n  const [selectedPreset, setSelectedPreset] = useState<string | null>(null);\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [masteredUrl, setMasteredUrl] = useState<string | null>(null);\r\n  const [settingsOpen, setSettingsOpen] = useState(false);\r\n  const [settings, setSettings] = useState<MasteringSettingsData>(defaultSettings);\r\n  const [progressMessage, setProgressMessage] = useState<string>('');\r\n  const [progressPercent, setProgressPercent] = useState<number>(0);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const handleDrop = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    const file = e.dataTransfer.files[0];\r\n    if (file && (file.type.includes('audio') || file.name.match(/\\.(wav|mp3|flac)$/i))) {\r\n      setTargetFile(file);\r\n    }\r\n  };\r\n\r\n  const handleMaster = async () => {\r\n    if (!targetFile || !selectedPreset) {\r\n      toast({\r\n        title: t('error'),\r\n        description: 'Please select a target file and a genre preset',\r\n        variant: 'destructive',\r\n      });\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    setProgressMessage(`Loading ${selectedPreset} reference...`);\r\n    setProgressPercent(0);\r\n    \r\n    try {\r\n      console.log(` Starting preset mastering: ${selectedPreset}`);\r\n      \r\n      // Load the preset reference file\r\n      setProgressMessage(`Loading ${selectedPreset} reference...`);\r\n      const referenceFile = await loadPresetReferenceFile(selectedPreset);\r\n      \r\n      setProgressMessage('Starting mastering...');\r\n      setProgressPercent(10);\r\n      \r\n      // Use the mastering service with job-based flow\r\n      const resultBlob = await masteringService.masterAudio(\r\n        targetFile,\r\n        referenceFile,\r\n        settings,\r\n        (stage, percent) => {\r\n          setProgressMessage(stage);\r\n          setProgressPercent(10 + percent * 0.9); // Reserve first 10% for reference loading\r\n          console.log(`Progress: ${stage} - ${(10 + percent * 0.9).toFixed(0)}%`);\r\n        }\r\n      );\r\n\r\n      // Create download URL\r\n      const url = URL.createObjectURL(resultBlob);\r\n      setMasteredUrl(url);\r\n      \r\n      toast({\r\n        title: t('success'),\r\n        description: 'Mastering complete! Download your mastered track.',\r\n      });\r\n    } catch (error: any) {\r\n      console.error(' Mastering error:', error);\r\n      toast({\r\n        title: t('error'),\r\n        description: error.message || 'Mastering failed. Please try again.',\r\n        variant: 'destructive',\r\n      });\r\n    } finally {\r\n      setIsProcessing(false);\r\n      setProgressMessage('');\r\n      setProgressPercent(0);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {/* Left: Target File Upload */}\r\n        <Card className=\"bg-card border-border p-6\">\r\n          <h3 className=\"text-lg font-semibold text-foreground mb-4\">{t('aiMastering.targetTrack')}</h3>\r\n          <div\r\n            onDrop={handleDrop}\r\n            onDragOver={(e) => e.preventDefault()}\r\n            className=\"border-2 border-dashed border-cyan-500/50 rounded-lg p-8 text-center hover:border-cyan-500 transition-colors cursor-pointer bg-cyan-500/5\"\r\n            onClick={() => fileInputRef.current?.click()}\r\n          >\r\n            <Upload className=\"h-12 w-12 text-cyan-400 mx-auto mb-4\" />\r\n            <p className=\"text-foreground font-medium mb-2\">\r\n              {targetFile ? targetFile.name : 'Drag and drop your WAV reference file here, or use the file chooser below.'}\r\n            </p>\r\n            <p className=\"text-sm text-muted-foreground\">Reference File: {targetFile ? 'File chosen' : 'No file chosen'}</p>\r\n            <input\r\n              ref={fileInputRef}\r\n              type=\"file\"\r\n              accept=\".wav,.mp3,.flac\"\r\n              className=\"hidden\"\r\n              onChange={(e) => setTargetFile(e.target.files?.[0] || null)}\r\n            />\r\n          </div>\r\n          {targetFile && (\r\n            <Button\r\n              onClick={() => fileInputRef.current?.click()}\r\n              className=\"w-full mt-4 bg-cyan-500 hover:bg-cyan-600 text-white\"\r\n            >\r\n              Choose Reference File\r\n            </Button>\r\n          )}\r\n        </Card>\r\n\r\n        {/* Right: Genre Presets */}\r\n        <Card className=\"bg-card border-border p-6\">\r\n          <h3 className=\"text-lg font-semibold text-foreground mb-4\">Select Genre Preset</h3>\r\n          <div className=\"grid grid-cols-3 gap-3\">\r\n            {genrePresets.map((preset) => {\r\n              const Icon = preset.icon;\r\n              const isSelected = selectedPreset === preset.id;\r\n              return (\r\n                <button\r\n                  key={preset.id}\r\n                  onClick={() => setSelectedPreset(preset.id)}\r\n                  className={`flex flex-col items-center justify-center p-4 rounded-lg border-2 transition-all ${\r\n                    isSelected\r\n                      ? 'border-cyan-500 bg-cyan-500/20 text-cyan-400'\r\n                      : 'border-border hover:border-cyan-500/50 hover:bg-cyan-500/5'\r\n                  }`}\r\n                >\r\n                  <Icon className={`h-6 w-6 mb-2 ${isSelected ? 'text-cyan-400' : 'text-muted-foreground'}`} />\r\n                  <span className={`text-sm font-medium ${isSelected ? 'text-cyan-400' : 'text-foreground'}`}>\r\n                    {preset.name}\r\n                  </span>\r\n                </button>\r\n              );\r\n            })}\r\n          </div>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Action Buttons */}\r\n      <div className=\"space-y-4 mt-6\">\r\n        <div className=\"flex flex-wrap gap-4 justify-center\">\r\n          <Button\r\n            onClick={handleMaster}\r\n            disabled={!targetFile || !selectedPreset || isProcessing}\r\n            className=\"bg-cyan-500 hover:bg-cyan-600 text-white px-8 py-6 text-lg font-semibold\"\r\n          >\r\n            {isProcessing ? (\r\n              <>\r\n                <Loader2 className=\"h-5 w-5 mr-2 animate-spin\" />\r\n                Processing...\r\n              </>\r\n            ) : (\r\n              'Master with AI Preset'\r\n            )}\r\n          </Button>\r\n\r\n          <Button\r\n            onClick={() => setSettingsOpen(true)}\r\n            className=\"bg-cyan-500 hover:bg-cyan-600 text-white px-8 py-6 text-lg font-semibold\"\r\n          >\r\n            <Settings className=\"h-5 w-5 mr-2\" />\r\n            Settings\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Progress Display */}\r\n        {isProcessing && (\r\n          <div className=\"space-y-2 max-w-md mx-auto\">\r\n            <Progress value={progressPercent} className=\"w-full\" />\r\n            <p className=\"text-sm text-muted-foreground text-center\">\r\n              {progressMessage} ({progressPercent.toFixed(0)}%)\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {masteredUrl && (\r\n          <Button\r\n            onClick={() => {\r\n              const a = document.createElement('a');\r\n              a.href = masteredUrl;\r\n              a.download = `mastered_${targetFile?.name || 'audio'}.wav`;\r\n              a.click();\r\n            }}\r\n            className=\"bg-green-500 hover:bg-green-600 text-white px-8 py-6 text-lg font-semibold\"\r\n          >\r\n            <Download className=\"h-5 w-5 mr-2\" />\r\n            Download\r\n          </Button>\r\n        )}\r\n      </div>\r\n\r\n      <MasteringSettings\r\n        open={settingsOpen}\r\n        onOpenChange={setSettingsOpen}\r\n        settings={settings}\r\n        onSettingsChange={setSettings}\r\n      />\r\n    </>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ai-mastering\\GenreReferenceSelector.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":13,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":13,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { \r\n  Music, Headphones, Mic, Radio, Guitar, Piano, Disc3, Waves, \r\n  Volume2, CheckCircle, XCircle, Loader2, Play\r\n} from 'lucide-react';\r\nimport { useLanguage } from '@/contexts/LanguageContext';\r\nimport { getReferenceTrack, hasReferenceTrack, type ReferenceTrack } from '@/utils/referenceTrackStorage';\r\nimport { toast } from 'sonner';\r\n\r\n// Genre definitions matching AdminReferenceManager\r\nexport const GENRE_PRESETS = [\r\n  { id: 'jazz', name: 'Jazz', nameES: 'Jazz', icon: Music },\r\n  { id: 'electronic', name: 'Electronic', nameES: 'Electrnica', icon: Disc3 },\r\n  { id: 'podcast', name: 'Podcast', nameES: 'Podcast', icon: Mic },\r\n  { id: 'reggae', name: 'Reggae', nameES: 'Reggae', icon: Waves },\r\n  { id: 'latin', name: 'Latin', nameES: 'Latina', icon: Music },\r\n  { id: 'rock', name: 'Rock', nameES: 'Rock', icon: Guitar },\r\n  { id: 'classical', name: 'Classical', nameES: 'Clsica', icon: Piano },\r\n  { id: 'vocal', name: 'Vocal', nameES: 'Vocal', icon: Mic },\r\n  { id: 'bass-boost', name: 'Bass Boost', nameES: 'Graves Potentes', icon: Volume2 },\r\n  { id: 'live', name: 'Live', nameES: 'En Vivo', icon: Headphones },\r\n  { id: 'hip-hop', name: 'Hip-Hop', nameES: 'Hip-Hop', icon: Radio },\r\n  { id: 'flat', name: 'Flat', nameES: 'Plano', icon: Music },\r\n];\r\n\r\ninterface GenreReferenceSelectorProps {\r\n  onReferenceSelect: (file: File, genreName: string) => void;\r\n  selectedGenre: string | null;\r\n}\r\n\r\nexport const GenreReferenceSelector: React.FC<GenreReferenceSelectorProps> = ({ \r\n  onReferenceSelect, \r\n  selectedGenre \r\n}) => {\r\n  const { t, language } = useLanguage();\r\n  const [genreStatus, setGenreStatus] = useState<Record<string, boolean>>({});\r\n  const [loadingGenres, setLoadingGenres] = useState<Record<string, boolean>>({});\r\n  const [loadedTrack, setLoadedTrack] = useState<ReferenceTrack | null>(null);\r\n\r\n  // Check which genres have reference tracks on mount\r\n  useEffect(() => {\r\n    const checkGenreStatus = async () => {\r\n      const statusMap: Record<string, boolean> = {};\r\n      \r\n      for (const genre of GENRE_PRESETS) {\r\n        const exists = await hasReferenceTrack(genre.id);\r\n        statusMap[genre.id] = exists;\r\n      }\r\n      \r\n      setGenreStatus(statusMap);\r\n    };\r\n\r\n    checkGenreStatus();\r\n  }, []);\r\n\r\n  // Load selected genre's reference track\r\n  const handleGenreSelect = async (genreId: string) => {\r\n    if (!genreStatus[genreId]) {\r\n      toast.error('No reference track available for this genre');\r\n      return;\r\n    }\r\n\r\n    setLoadingGenres(prev => ({ ...prev, [genreId]: true }));\r\n\r\n    try {\r\n      const track = await getReferenceTrack(genreId);\r\n      \r\n      if (track) {\r\n        setLoadedTrack(track);\r\n        onReferenceSelect(track.file, track.genre);\r\n        toast.success(`Loaded ${track.name} (${(track.size / 1024 / 1024).toFixed(2)} MB)`);\r\n      } else {\r\n        toast.error('Failed to load reference track');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading reference track:', error);\r\n      toast.error('Error loading reference track');\r\n    } finally {\r\n      setLoadingGenres(prev => ({ ...prev, [genreId]: false }));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"bg-gradient-to-r from-cyan-900/20 to-purple-900/20 border border-cyan-500/30 rounded-lg p-4\">\r\n        <h3 className=\"text-lg font-semibold text-cyan-400 mb-2\">\r\n          {language === 'ES' ? ' Elige un Preset de Gnero' : ' Choose Genre Preset'}\r\n        </h3>\r\n        <p className=\"text-sm text-slate-300\">\r\n          {language === 'ES' \r\n            ? 'Selecciona un gnero para cargar la pista de referencia correspondiente' \r\n            : 'Select a genre to load the corresponding reference track'}\r\n        </p>\r\n      </div>\r\n\r\n      {/* Genre Cards Grid */}\r\n      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3\">\r\n        {GENRE_PRESETS.map((genre) => {\r\n          const Icon = genre.icon;\r\n          const hasTrack = genreStatus[genre.id];\r\n          const isLoading = loadingGenres[genre.id];\r\n          const isSelected = selectedGenre === genre.id;\r\n          const displayName = language === 'ES' ? genre.nameES : genre.name;\r\n\r\n          return (\r\n            <Card\r\n              key={genre.id}\r\n              className={`relative cursor-pointer transition-all duration-300 ${\r\n                isSelected\r\n                  ? 'border-2 border-cyan-500 bg-cyan-900/30 scale-105'\r\n                  : hasTrack\r\n                  ? 'border border-green-500/70 bg-gradient-to-br from-green-900/20 to-cyan-900/20 hover:border-green-400 hover:scale-102 animate-pulse'\r\n                  : 'border border-slate-700 bg-slate-900/30 opacity-60'\r\n              }`}\r\n              onClick={() => hasTrack && handleGenreSelect(genre.id)}\r\n            >\r\n              <CardContent className=\"p-4 flex flex-col items-center gap-2\">\r\n                {/* Status Indicator */}\r\n                <div className=\"absolute top-2 right-2\">\r\n                  {isLoading ? (\r\n                    <Loader2 className=\"h-4 w-4 animate-spin text-cyan-400\" />\r\n                  ) : hasTrack ? (\r\n                    <CheckCircle className=\"h-4 w-4 text-green-400\" />\r\n                  ) : (\r\n                    <XCircle className=\"h-4 w-4 text-slate-500\" />\r\n                  )}\r\n                </div>\r\n\r\n                {/* Genre Icon */}\r\n                <div className={`p-3 rounded-full ${\r\n                  hasTrack \r\n                    ? 'bg-cyan-500/20 text-cyan-400' \r\n                    : 'bg-slate-700/50 text-slate-500'\r\n                }`}>\r\n                  <Icon className=\"h-6 w-6\" />\r\n                </div>\r\n\r\n                {/* Genre Name */}\r\n                <span className={`text-sm font-medium text-center ${\r\n                  hasTrack ? 'text-white' : 'text-slate-500'\r\n                }`}>\r\n                  {displayName}\r\n                </span>\r\n\r\n                {/* Status Text */}\r\n                <span className=\"text-xs text-slate-400\">\r\n                  {hasTrack \r\n                    ? (language === 'ES' ? 'Disponible' : 'Available')\r\n                    : (language === 'ES' ? 'No disponible' : 'Unavailable')\r\n                  }\r\n                </span>\r\n              </CardContent>\r\n            </Card>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {/* Loaded Track Info */}\r\n      {loadedTrack && (\r\n        <Card className=\"bg-green-900/20 border-green-500/50\">\r\n          <CardContent className=\"p-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"p-2 bg-green-500/20 rounded-full\">\r\n                  <Music className=\"h-5 w-5 text-green-400\" />\r\n                </div>\r\n                <div>\r\n                  <p className=\"font-semibold text-green-400\">\r\n                    {language === 'ES' ? 'Pista de Referencia Cargada' : 'Reference Track Loaded'}\r\n                  </p>\r\n                  <p className=\"text-sm text-slate-300\">{loadedTrack.name}</p>\r\n                  <p className=\"text-xs text-slate-400\">\r\n                    {(loadedTrack.size / 1024 / 1024).toFixed(2)} MB\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ai-mastering\\LUFSDisplay.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ai-mastering\\MasteringAdvancedSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":107,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":107,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2836,2839],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2836,2839],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Advanced Settings Modal for AI Mastering\r\n * Provides fine-grained control over mastering parameters\r\n */\r\n\r\nimport React from 'react';\r\nimport { SimpleModal } from '@/components/ui/SimpleModal';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Slider } from '@/components/ui/slider';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Settings, RotateCcw } from 'lucide-react';\r\n\r\nexport interface MasteringSettings {\r\n  // Core Matchering settings\r\n  threshold: number;\r\n  epsilon: number;\r\n  max_piece_length: number;\r\n  bpm: number;\r\n  time_signature_numerator: number;\r\n  time_signature_denominator: number;\r\n  piece_length_bars: number;\r\n\r\n  // Method settings\r\n  resampling_method: string;\r\n  spectrum_compensation: string;\r\n  loudness_compensation: string;\r\n\r\n  // Spectrum analysis\r\n  analyze_full_spectrum: boolean;\r\n  spectrum_smoothing_width: number;\r\n  smoothing_steps: number;\r\n  spectrum_correction_hops: number;\r\n  loudness_steps: number;\r\n  spectrum_bands: number;\r\n  fft_size: number;\r\n\r\n  // Normalization\r\n  normalize_reference: boolean;\r\n  normalize: boolean;\r\n\r\n  // Limiter\r\n  limiter_method: string;\r\n  limiter_threshold_db: number;\r\n  loudness_correction_limiting: boolean;\r\n\r\n  // Output processing\r\n  amplify: boolean;\r\n  clipping: boolean;\r\n\r\n  // Output format\r\n  output_bits: string;\r\n  output_channels: number;\r\n  dithering_method: string;\r\n}\r\n\r\ninterface MasteringAdvancedSettingsProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  settings: MasteringSettings;\r\n  onSettingsChange: (settings: MasteringSettings) => void;\r\n}\r\n\r\nconst DEFAULT_SETTINGS: MasteringSettings = {\r\n  threshold: 0.998138,\r\n  epsilon: 0.000001,\r\n  max_piece_length: 30.0,\r\n  bpm: 0.0,\r\n  time_signature_numerator: 4,\r\n  time_signature_denominator: 4,\r\n  piece_length_bars: 8.0,\r\n  resampling_method: 'FastSinc',\r\n  spectrum_compensation: 'Frequency-Domain (Gain Envelope)',\r\n  loudness_compensation: 'LUFS (Whole Signal)',\r\n  analyze_full_spectrum: false,\r\n  spectrum_smoothing_width: 3,\r\n  smoothing_steps: 1,\r\n  spectrum_correction_hops: 2,\r\n  loudness_steps: 10,\r\n  spectrum_bands: 32,\r\n  fft_size: 4096,\r\n  normalize_reference: false,\r\n  normalize: false,\r\n  limiter_method: 'True Peak',\r\n  limiter_threshold_db: -1.0,\r\n  loudness_correction_limiting: false,\r\n  amplify: false,\r\n  clipping: false,\r\n  output_bits: '32 (IEEE float)',\r\n  output_channels: 2,\r\n  dithering_method: 'TPDF',\r\n};\r\n\r\nexport const MasteringAdvancedSettings: React.FC<MasteringAdvancedSettingsProps> = ({\r\n  open,\r\n  onOpenChange,\r\n  settings,\r\n  onSettingsChange,\r\n}) => {\r\n  const handleChange = (key: keyof MasteringSettings, value: any) => {\r\n    onSettingsChange({\r\n      ...settings,\r\n      [key]: value,\r\n    });\r\n  };\r\n\r\n  const handleReset = () => {\r\n    onSettingsChange(DEFAULT_SETTINGS);\r\n  };\r\n\r\n  return (\r\n    <SimpleModal\r\n      isOpen={open}\r\n      onClose={() => onOpenChange(false)}\r\n      title={\r\n        <div className=\"flex items-center gap-2\">\r\n          <Settings className=\"h-5 w-5\" />\r\n          <span>AI Mastering - Advanced Settings</span>\r\n        </div>\r\n      }\r\n      maxWidth=\"max-w-7xl\"\r\n    >\r\n      <div className=\"space-y-1 mb-6\">\r\n        <p className=\"text-slate-400 text-sm\">\r\n          Fine-tune mastering parameters for professional results\r\n        </p>\r\n      </div>\r\n\r\n      <div className=\"overflow-y-auto max-h-[calc(85vh-120px)] pr-2 -mr-2\">\r\n        <div className=\"space-y-6\">\r\n          {/* Core Settings */}\r\n          <div className=\"space-y-4 p-4 rounded-lg border border-slate-700 bg-slate-800/50\">\r\n            <h3 className=\"font-semibold flex items-center gap-2 text-white\">\r\n               Core Settings\r\n            </h3>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label className=\"text-slate-300\">Threshold</Label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={settings.threshold}\r\n                  onChange={(e) => handleChange('threshold', parseFloat(e.target.value))}\r\n                  step=\"0.000001\"\r\n                  className=\"w-full px-3 py-2 bg-slate-900 border border-slate-700 rounded-md text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label className=\"text-slate-300\">Epsilon</Label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={settings.epsilon}\r\n                  onChange={(e) => handleChange('epsilon', parseFloat(e.target.value))}\r\n                  step=\"0.000001\"\r\n                  className=\"w-full px-3 py-2 bg-slate-900 border border-slate-700 rounded-md text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label className=\"text-slate-300\">Max Piece Length (seconds)</Label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={settings.max_piece_length}\r\n                  onChange={(e) => handleChange('max_piece_length', parseFloat(e.target.value))}\r\n                  step=\"1\"\r\n                  className=\"w-full px-3 py-2 bg-slate-900 border border-slate-700 rounded-md text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label className=\"text-slate-300\">BPM</Label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={settings.bpm}\r\n                  onChange={(e) => handleChange('bpm', parseFloat(e.target.value))}\r\n                  step=\"0.1\"\r\n                  className=\"w-full px-3 py-2 bg-slate-900 border border-slate-700 rounded-md text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label className=\"text-slate-300\">Time Signature Numerator</Label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={settings.time_signature_numerator}\r\n                  onChange={(e) => handleChange('time_signature_numerator', parseInt(e.target.value))}\r\n                  className=\"w-full px-3 py-2 bg-slate-900 border border-slate-700 rounded-md text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label className=\"text-slate-300\">Time Signature Denominator</Label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={settings.time_signature_denominator}\r\n                  onChange={(e) => handleChange('time_signature_denominator', parseInt(e.target.value))}\r\n                  className=\"w-full px-3 py-2 bg-slate-900 border border-slate-700 rounded-md text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label className=\"text-slate-300\">Piece Length (bars)</Label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={settings.piece_length_bars}\r\n                  onChange={(e) => handleChange('piece_length_bars', parseFloat(e.target.value))}\r\n                  step=\"0.1\"\r\n                  className=\"w-full px-3 py-2 bg-slate-900 border border-slate-700 rounded-md text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Method Settings */}\r\n          <div className=\"space-y-4 p-4 rounded-lg border border-slate-700 bg-slate-800/50\">\r\n            <h3 className=\"font-semibold flex items-center gap-2 text-white\">\r\n               Method Settings\r\n            </h3>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label className=\"text-slate-300\">Resampling Method</Label>\r\n              <Select\r\n                value={settings.resampling_method}\r\n                onValueChange={(v) => handleChange('resampling_method', v)}\r\n              >\r\n                <SelectTrigger className=\"bg-slate-900 border-slate-700 text-white\">\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent className=\"bg-slate-900 border-slate-700 text-white\">\r\n                  <SelectItem value=\"FastSinc\">FastSinc</SelectItem>\r\n                  <SelectItem value=\"Sinc\">Sinc</SelectItem>\r\n                  <SelectItem value=\"Linear\">Linear</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label className=\"text-slate-300\">Spectrum Compensation</Label>\r\n              <Select\r\n                value={settings.spectrum_compensation}\r\n                onValueChange={(v) => handleChange('spectrum_compensation', v)}\r\n              >\r\n                <SelectTrigger className=\"bg-slate-900 border-slate-700 text-white\">\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent className=\"bg-slate-900 border-slate-700 text-white\">\r\n                  <SelectItem value=\"Frequency-Domain (Gain Envelope)\">Frequency-Domain (Gain Envelope)</SelectItem>\r\n                  <SelectItem value=\"Time-Domain\">Time-Domain</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label className=\"text-slate-300\">Loudness Compensation</Label>\r\n              <Select\r\n                value={settings.loudness_compensation}\r\n                onValueChange={(v) => handleChange('loudness_compensation', v)}\r\n              >\r\n                <SelectTrigger className=\"bg-slate-900 border-slate-700 text-white\">\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent className=\"bg-slate-900 border-slate-700 text-white\">\r\n                  <SelectItem value=\"LUFS (Whole Signal)\">LUFS (Whole Signal)</SelectItem>\r\n                  <SelectItem value=\"RMS\">RMS</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Spectrum Analysis */}\r\n          <div className=\"space-y-4 p-4 rounded-lg border border-slate-700 bg-slate-800/50\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h3 className=\"font-semibold flex items-center gap-2 text-white\">\r\n                 Spectrum Analysis\r\n              </h3>\r\n              <div className=\"flex items-center gap-2\">\r\n                <Label className=\"text-sm text-slate-300\">Analyze Full Spectrum</Label>\r\n                <Switch\r\n                  checked={settings.analyze_full_spectrum}\r\n                  onCheckedChange={(v) => handleChange('analyze_full_spectrum', v)}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label className=\"text-slate-300\">Spectrum Smoothing Width</Label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={settings.spectrum_smoothing_width}\r\n                  onChange={(e) => handleChange('spectrum_smoothing_width', parseInt(e.target.value))}\r\n                  className=\"w-full px-3 py-2 bg-slate-900 border border-slate-700 rounded-md text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label className=\"text-slate-300\">Smoothing Steps</Label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={settings.smoothing_steps}\r\n                  onChange={(e) => handleChange('smoothing_steps', parseInt(e.target.value))}\r\n                  className=\"w-full px-3 py-2 bg-slate-900 border border-slate-700 rounded-md text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label className=\"text-slate-300\">Spectrum Correction Hops</Label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={settings.spectrum_correction_hops}\r\n                  onChange={(e) => handleChange('spectrum_correction_hops', parseInt(e.target.value))}\r\n                  className=\"w-full px-3 py-2 bg-slate-900 border border-slate-700 rounded-md text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label className=\"text-slate-300\">Loudness Steps</Label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={settings.loudness_steps}\r\n                  onChange={(e) => handleChange('loudness_steps', parseInt(e.target.value))}\r\n                  className=\"w-full px-3 py-2 bg-slate-900 border border-slate-700 rounded-md text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label className=\"text-slate-300\">Spectrum Bands</Label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={settings.spectrum_bands}\r\n                  onChange={(e) => handleChange('spectrum_bands', parseInt(e.target.value))}\r\n                  className=\"w-full px-3 py-2 bg-slate-900 border border-slate-700 rounded-md text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label className=\"text-slate-300\">FFT Size</Label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={settings.fft_size}\r\n                  onChange={(e) => handleChange('fft_size', parseInt(e.target.value))}\r\n                  className=\"w-full px-3 py-2 bg-slate-900 border border-slate-700 rounded-md text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Normalization */}\r\n          <div className=\"space-y-4 p-4 rounded-lg border border-slate-700 bg-slate-800/50\">\r\n            <h3 className=\"font-semibold flex items-center gap-2 text-white\">\r\n               Normalization\r\n            </h3>\r\n\r\n            <div className=\"flex items-center justify-between\">\r\n              <Label className=\"text-slate-300\">Normalize Reference</Label>\r\n              <Switch\r\n                checked={settings.normalize_reference}\r\n                onCheckedChange={(v) => handleChange('normalize_reference', v)}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"flex items-center justify-between\">\r\n              <Label className=\"text-slate-300\">Normalize</Label>\r\n              <Switch\r\n                checked={settings.normalize}\r\n                onCheckedChange={(v) => handleChange('normalize', v)}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Limiter Settings */}\r\n          <div className=\"space-y-4 p-4 rounded-lg border border-slate-700 bg-slate-800/50\">\r\n            <h3 className=\"font-semibold flex items-center gap-2 text-white\">\r\n               Limiter Settings\r\n            </h3>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label className=\"text-slate-300\">Limiter Method</Label>\r\n              <Select\r\n                value={settings.limiter_method}\r\n                onValueChange={(v) => handleChange('limiter_method', v)}\r\n              >\r\n                <SelectTrigger className=\"bg-slate-900 border-slate-700 text-white\">\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent className=\"bg-slate-900 border-slate-700 text-white\">\r\n                  <SelectItem value=\"True Peak\">True Peak</SelectItem>\r\n                  <SelectItem value=\"Sample Peak\">Sample Peak</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label className=\"text-slate-300\">Limiter Threshold dB</Label>\r\n              <input\r\n                type=\"number\"\r\n                value={settings.limiter_threshold_db}\r\n                onChange={(e) => handleChange('limiter_threshold_db', parseFloat(e.target.value))}\r\n                step=\"0.1\"\r\n                className=\"w-full px-3 py-2 bg-slate-900 border border-slate-700 rounded-md text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"flex items-center justify-between\">\r\n              <Label className=\"text-slate-300\">Loudness Correction Limiting</Label>\r\n              <Switch\r\n                checked={settings.loudness_correction_limiting}\r\n                onCheckedChange={(v) => handleChange('loudness_correction_limiting', v)}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Output Processing */}\r\n          <div className=\"space-y-4 p-4 rounded-lg border border-slate-700 bg-slate-800/50\">\r\n            <h3 className=\"font-semibold flex items-center gap-2 text-white\">\r\n               Output Processing\r\n            </h3>\r\n\r\n            <div className=\"flex items-center justify-between\">\r\n              <Label className=\"text-slate-300\">Amplify</Label>\r\n              <Switch\r\n                checked={settings.amplify}\r\n                onCheckedChange={(v) => handleChange('amplify', v)}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"flex items-center justify-between\">\r\n              <Label className=\"text-slate-300\">Clipping</Label>\r\n              <Switch\r\n                checked={settings.clipping}\r\n                onCheckedChange={(v) => handleChange('clipping', v)}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Output Format */}\r\n          <div className=\"space-y-4 p-4 rounded-lg border border-slate-700 bg-slate-800/50\">\r\n            <h3 className=\"font-semibold flex items-center gap-2 text-white\">\r\n               Output Format\r\n            </h3>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label className=\"text-slate-300\">Output Bits</Label>\r\n              <Select\r\n                value={settings.output_bits || '32 (IEEE float)'}\r\n                onValueChange={(v) => handleChange('output_bits', v)}\r\n              >\r\n                <SelectTrigger className=\"bg-slate-900 border-slate-700 text-white\">\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent className=\"bg-slate-900 border-slate-700 text-white\">\r\n                  <SelectItem value=\"16\">16-bit</SelectItem>\r\n                  <SelectItem value=\"24\">24-bit</SelectItem>\r\n                  <SelectItem value=\"32\">32-bit</SelectItem>\r\n                  <SelectItem value=\"32 (IEEE float)\">32 (IEEE float)</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label className=\"text-slate-300\">Output Channels</Label>\r\n              <Select\r\n                value={settings.output_channels?.toString() || '2'}\r\n                onValueChange={(v) => handleChange('output_channels', parseInt(v))}\r\n              >\r\n                <SelectTrigger className=\"bg-slate-900 border-slate-700 text-white\">\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent className=\"bg-slate-900 border-slate-700 text-white\">\r\n                  <SelectItem value=\"1\">Mono (1)</SelectItem>\r\n                  <SelectItem value=\"2\">Stereo (2)</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label className=\"text-slate-300\">Dithering Method</Label>\r\n              <Select\r\n                value={settings.dithering_method}\r\n                onValueChange={(v) => handleChange('dithering_method', v)}\r\n              >\r\n                <SelectTrigger className=\"bg-slate-900 border-slate-700 text-white\">\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent className=\"bg-slate-900 border-slate-700 text-white\">\r\n                  <SelectItem value=\"None\">None</SelectItem>\r\n                  <SelectItem value=\"TPDF\">TPDF</SelectItem>\r\n                  <SelectItem value=\"RPDF\">RPDF</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"flex justify-between pt-4 border-t border-slate-700\">\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={handleReset}\r\n              className=\"flex items-center gap-2 border-slate-600 text-slate-300 hover:text-white hover:bg-slate-700\"\r\n            >\r\n              <RotateCcw className=\"h-4 w-4\" />\r\n              Reset to Defaults\r\n            </Button>\r\n            <Button\r\n              onClick={() => onOpenChange(false)}\r\n              className=\"bg-blue-600 hover:bg-blue-500 text-white\"\r\n            >\r\n              Save & Close\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </SimpleModal>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ai-mastering\\MasteringHistory.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":79,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":79,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2616,2619],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2616,2619],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Card, CardHeader, CardTitle, CardContent } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\nimport { Download, Trash2, Clock, CheckCircle, XCircle, AlertCircle } from 'lucide-react';\r\nimport { useMasteringHistory, MasteringHistoryEntry } from '@/hooks/useMasteringHistory';\r\nimport { useLanguage } from '@/contexts/LanguageContext';\r\nimport { useToast } from '@/hooks/use-toast';\r\n\r\nexport const MasteringHistory = () => {\r\n  const { history, clearHistory, removeEntry } = useMasteringHistory();\r\n  const { t } = useLanguage();\r\n  const { toast } = useToast();\r\n\r\n  const formatDate = (date: Date) => {\r\n    return new Intl.DateTimeFormat('en-US', {\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    }).format(date);\r\n  };\r\n\r\n  const formatDuration = (ms?: number) => {\r\n    if (!ms) return 'N/A';\r\n    const seconds = Math.floor(ms / 1000);\r\n    return `${seconds}s`;\r\n  };\r\n\r\n  const handleDownload = async (entry: MasteringHistoryEntry) => {\r\n    if (!entry.masteredUrl) return;\r\n    \r\n    try {\r\n      const response = await fetch(entry.masteredUrl);\r\n      const blob = await response.blob();\r\n      const url = URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = `mastered_${entry.targetFileName}`;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      document.body.removeChild(a);\r\n      URL.revokeObjectURL(url);\r\n      \r\n      toast({\r\n        title: 'Downloaded',\r\n        description: 'Mastered file downloaded successfully',\r\n      });\r\n    } catch (error) {\r\n      toast({\r\n        title: 'Download Failed',\r\n        description: 'Could not download the file',\r\n        variant: 'destructive',\r\n      });\r\n    }\r\n  };\r\n\r\n  const getStatusIcon = (status: string) => {\r\n    switch (status) {\r\n      case 'success':\r\n        return <CheckCircle className=\"w-4 h-4 text-green-500\" />;\r\n      case 'error':\r\n        return <XCircle className=\"w-4 h-4 text-red-500\" />;\r\n      case 'cancelled':\r\n        return <AlertCircle className=\"w-4 h-4 text-yellow-500\" />;\r\n      default:\r\n        return <Clock className=\"w-4 h-4 text-muted-foreground\" />;\r\n    }\r\n  };\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const variants = {\r\n      success: 'default',\r\n      error: 'destructive',\r\n      cancelled: 'secondary',\r\n    };\r\n    return (\r\n      <Badge variant={variants[status as keyof typeof variants] as any}>\r\n        {status}\r\n      </Badge>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Card className=\"bg-card border-border\">\r\n      <CardHeader className=\"flex flex-row items-center justify-between\">\r\n        <CardTitle className=\"text-foreground\">Mastering History</CardTitle>\r\n        {history.length > 0 && (\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={clearHistory}\r\n            className=\"text-destructive hover:text-destructive\"\r\n          >\r\n            Clear All\r\n          </Button>\r\n        )}\r\n      </CardHeader>\r\n      <CardContent>\r\n        {history.length === 0 ? (\r\n          <div className=\"text-center py-8 text-muted-foreground\">\r\n            No mastering history yet. Start by mastering your first track!\r\n          </div>\r\n        ) : (\r\n          <ScrollArea className=\"h-[400px] pr-4\">\r\n            <div className=\"space-y-3\">\r\n              {history.map((entry) => (\r\n                <Card key={entry.id} className=\"bg-background/50 border-border/50\">\r\n                  <CardContent className=\"p-4\">\r\n                    <div className=\"flex items-start justify-between gap-4\">\r\n                      <div className=\"flex-1 min-w-0\">\r\n                        <div className=\"flex items-center gap-2 mb-2\">\r\n                          {getStatusIcon(entry.status)}\r\n                          <p className=\"font-medium text-foreground truncate\">\r\n                            {entry.targetFileName}\r\n                          </p>\r\n                          {getStatusBadge(entry.status)}\r\n                        </div>\r\n                        <div className=\"text-sm text-muted-foreground space-y-1\">\r\n                          <p className=\"truncate\">\r\n                            Reference: {entry.referenceFileName}\r\n                          </p>\r\n                          <div className=\"flex items-center gap-4\">\r\n                            <span className=\"flex items-center gap-1\">\r\n                              <Clock className=\"w-3 h-3\" />\r\n                              {formatDate(entry.timestamp)}\r\n                            </span>\r\n                            {entry.processingTime && (\r\n                              <span>\r\n                                Duration: {formatDuration(entry.processingTime)}\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n                          {entry.errorMessage && (\r\n                            <p className=\"text-destructive text-xs mt-1\">\r\n                              {entry.errorMessage}\r\n                            </p>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        {entry.status === 'success' && entry.masteredUrl && (\r\n                          <Button\r\n                            size=\"sm\"\r\n                            variant=\"outline\"\r\n                            onClick={() => handleDownload(entry)}\r\n                            className=\"h-8 w-8 p-0\"\r\n                          >\r\n                            <Download className=\"w-4 h-4\" />\r\n                          </Button>\r\n                        )}\r\n                        <Button\r\n                          size=\"sm\"\r\n                          variant=\"ghost\"\r\n                          onClick={() => removeEntry(entry.id)}\r\n                          className=\"h-8 w-8 p-0 text-muted-foreground hover:text-destructive\"\r\n                        >\r\n                          <Trash2 className=\"w-4 h-4\" />\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              ))}\r\n            </div>\r\n          </ScrollArea>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ai-mastering\\MasteringSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1677,1680],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1677,1680],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Checkbox } from '@/components/ui/checkbox';\r\nimport { useLanguage } from '@/contexts/LanguageContext';\r\n\r\ninterface MasteringSettingsProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  settings: MasteringSettingsData;\r\n  onSettingsChange: (settings: MasteringSettingsData) => void;\r\n}\r\n\r\nexport interface MasteringSettingsData {\r\n  threshold: number;\r\n  epsilon: number;\r\n  maxPieceLength: number;\r\n  bpm: number;\r\n  timeSignatureNumerator: number;\r\n  timeSignatureDenominator: number;\r\n  pieceLengthBars: number;\r\n  resamplingMethod: string;\r\n  spectrumCompensation: string;\r\n  loudnessCompensation: string;\r\n  analyzeFullSpectrum: boolean;\r\n  spectrumSmoothingWidth: number;\r\n  smoothingSteps: number;\r\n  spectrumCorrectionHops: number;\r\n  loudnessSteps: number;\r\n  spectrumBands: number;\r\n  fftSize: number;\r\n  normalizeReference: boolean;\r\n  normalize: boolean;\r\n  limiterMethod: string;\r\n  limiterThreshold: number;\r\n  loudnessCorrectionLimiting: boolean;\r\n  amplify: boolean;\r\n  clipping: boolean;\r\n  outputBits: string;\r\n  outputChannels: number;\r\n  ditheringMethod: string;\r\n}\r\n\r\nexport const MasteringSettings: React.FC<MasteringSettingsProps> = ({\r\n  open,\r\n  onOpenChange,\r\n  settings,\r\n  onSettingsChange,\r\n}) => {\r\n  const { t } = useLanguage();\r\n\r\n  const updateSetting = (key: keyof MasteringSettingsData, value: any) => {\r\n    onSettingsChange({ ...settings, [key]: value });\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-6xl max-h-[80vh] overflow-y-auto bg-card border-border\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"text-2xl font-bold\">{t('aiMastering.settings')}</DialogTitle>\r\n        </DialogHeader>\r\n        \r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 py-6\">\r\n          {/* Threshold */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"threshold\">{t('aiMastering.threshold')}</Label>\r\n            <Input\r\n              id=\"threshold\"\r\n              type=\"number\"\r\n              step=\"0.000001\"\r\n              value={settings.threshold}\r\n              onChange={(e) => updateSetting('threshold', parseFloat(e.target.value))}\r\n              className=\"bg-background border-border\"\r\n            />\r\n          </div>\r\n\r\n          {/* Epsilon */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"epsilon\">{t('aiMastering.epsilon')}</Label>\r\n            <Input\r\n              id=\"epsilon\"\r\n              type=\"number\"\r\n              step=\"0.000001\"\r\n              value={settings.epsilon}\r\n              onChange={(e) => updateSetting('epsilon', parseFloat(e.target.value))}\r\n              className=\"bg-background border-border\"\r\n            />\r\n          </div>\r\n\r\n          {/* Max Piece Length */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"maxPieceLength\">{t('aiMastering.maxPieceLength')}</Label>\r\n            <Input\r\n              id=\"maxPieceLength\"\r\n              type=\"number\"\r\n              step=\"0.1\"\r\n              value={settings.maxPieceLength}\r\n              onChange={(e) => updateSetting('maxPieceLength', parseFloat(e.target.value))}\r\n              className=\"bg-background border-border\"\r\n            />\r\n          </div>\r\n\r\n          {/* BPM */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"bpm\">{t('aiMastering.bpm')}</Label>\r\n            <Input\r\n              id=\"bpm\"\r\n              type=\"number\"\r\n              value={settings.bpm}\r\n              onChange={(e) => updateSetting('bpm', parseFloat(e.target.value))}\r\n              className=\"bg-background border-border\"\r\n            />\r\n          </div>\r\n\r\n          {/* Time Signature Numerator */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"timeSignatureNumerator\">{t('aiMastering.timeSignatureNumerator')}</Label>\r\n            <Input\r\n              id=\"timeSignatureNumerator\"\r\n              type=\"number\"\r\n              value={settings.timeSignatureNumerator}\r\n              onChange={(e) => updateSetting('timeSignatureNumerator', parseInt(e.target.value))}\r\n              className=\"bg-background border-border\"\r\n            />\r\n          </div>\r\n\r\n          {/* Time Signature Denominator */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"timeSignatureDenominator\">{t('aiMastering.timeSignatureDenominator')}</Label>\r\n            <Input\r\n              id=\"timeSignatureDenominator\"\r\n              type=\"number\"\r\n              value={settings.timeSignatureDenominator}\r\n              onChange={(e) => updateSetting('timeSignatureDenominator', parseInt(e.target.value))}\r\n              className=\"bg-background border-border\"\r\n            />\r\n          </div>\r\n\r\n          {/* Piece Length (bars) */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"pieceLengthBars\">{t('aiMastering.pieceLengthBars')}</Label>\r\n            <Input\r\n              id=\"pieceLengthBars\"\r\n              type=\"number\"\r\n              step=\"0.1\"\r\n              value={settings.pieceLengthBars}\r\n              onChange={(e) => updateSetting('pieceLengthBars', parseFloat(e.target.value))}\r\n              className=\"bg-background border-border\"\r\n            />\r\n          </div>\r\n\r\n          {/* Resampling Method */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"resamplingMethod\">{t('aiMastering.resamplingMethod')}</Label>\r\n            <Select value={settings.resamplingMethod} onValueChange={(v) => updateSetting('resamplingMethod', v)}>\r\n              <SelectTrigger className=\"bg-background border-border\">\r\n                <SelectValue />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"FastSinc\">FastSinc</SelectItem>\r\n                <SelectItem value=\"MediumSinc\">MediumSinc</SelectItem>\r\n                <SelectItem value=\"BestSinc\">BestSinc</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n\r\n          {/* Spectrum Compensation */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"spectrumCompensation\">{t('aiMastering.spectrumCompensation')}</Label>\r\n            <Select value={settings.spectrumCompensation} onValueChange={(v) => updateSetting('spectrumCompensation', v)}>\r\n              <SelectTrigger className=\"bg-background border-border\">\r\n                <SelectValue />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"Frequency-Domain (Gain Envelope)\">Frequency-Domain (Gain Envelope)</SelectItem>\r\n                <SelectItem value=\"Time-Domain (Parametric EQ)\">Time-Domain (Parametric EQ)</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n\r\n          {/* Loudness Compensation */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"loudnessCompensation\">{t('aiMastering.loudnessCompensation')}</Label>\r\n            <Select value={settings.loudnessCompensation} onValueChange={(v) => updateSetting('loudnessCompensation', v)}>\r\n              <SelectTrigger className=\"bg-background border-border\">\r\n                <SelectValue />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"LUFS (Whole Signal)\">LUFS (Whole Signal)</SelectItem>\r\n                <SelectItem value=\"RMS (Whole Signal)\">RMS (Whole Signal)</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n\r\n          {/* Spectrum Smoothing Width */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"spectrumSmoothingWidth\">{t('aiMastering.spectrumSmoothingWidth')}</Label>\r\n            <Input\r\n              id=\"spectrumSmoothingWidth\"\r\n              type=\"number\"\r\n              value={settings.spectrumSmoothingWidth}\r\n              onChange={(e) => updateSetting('spectrumSmoothingWidth', parseInt(e.target.value))}\r\n              className=\"bg-background border-border\"\r\n            />\r\n          </div>\r\n\r\n          {/* Smoothing Steps */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"smoothingSteps\">{t('aiMastering.smoothingSteps')}</Label>\r\n            <Input\r\n              id=\"smoothingSteps\"\r\n              type=\"number\"\r\n              value={settings.smoothingSteps}\r\n              onChange={(e) => updateSetting('smoothingSteps', parseInt(e.target.value))}\r\n              className=\"bg-background border-border\"\r\n            />\r\n          </div>\r\n\r\n          {/* Spectrum Correction Hops */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"spectrumCorrectionHops\">{t('aiMastering.spectrumCorrectionHops')}</Label>\r\n            <Input\r\n              id=\"spectrumCorrectionHops\"\r\n              type=\"number\"\r\n              value={settings.spectrumCorrectionHops}\r\n              onChange={(e) => updateSetting('spectrumCorrectionHops', parseInt(e.target.value))}\r\n              className=\"bg-background border-border\"\r\n            />\r\n          </div>\r\n\r\n          {/* Loudness Steps */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"loudnessSteps\">{t('aiMastering.loudnessSteps')}</Label>\r\n            <Input\r\n              id=\"loudnessSteps\"\r\n              type=\"number\"\r\n              value={settings.loudnessSteps}\r\n              onChange={(e) => updateSetting('loudnessSteps', parseInt(e.target.value))}\r\n              className=\"bg-background border-border\"\r\n            />\r\n          </div>\r\n\r\n          {/* Spectrum Bands */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"spectrumBands\">{t('aiMastering.spectrumBands')}</Label>\r\n            <Input\r\n              id=\"spectrumBands\"\r\n              type=\"number\"\r\n              value={settings.spectrumBands}\r\n              onChange={(e) => updateSetting('spectrumBands', parseInt(e.target.value))}\r\n              className=\"bg-background border-border\"\r\n            />\r\n          </div>\r\n\r\n          {/* FFT Size */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"fftSize\">{t('aiMastering.fftSize')}</Label>\r\n            <Input\r\n              id=\"fftSize\"\r\n              type=\"number\"\r\n              value={settings.fftSize}\r\n              onChange={(e) => updateSetting('fftSize', parseInt(e.target.value))}\r\n              className=\"bg-background border-border\"\r\n            />\r\n          </div>\r\n\r\n          {/* Limiter Method */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"limiterMethod\">{t('aiMastering.limiterMethod')}</Label>\r\n            <Select value={settings.limiterMethod} onValueChange={(v) => updateSetting('limiterMethod', v)}>\r\n              <SelectTrigger className=\"bg-background border-border\">\r\n                <SelectValue />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"True Peak\">True Peak</SelectItem>\r\n                <SelectItem value=\"Sample Peak\">Sample Peak</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n\r\n          {/* Limiter Threshold dB */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"limiterThreshold\">{t('aiMastering.limiterThreshold')}</Label>\r\n            <Input\r\n              id=\"limiterThreshold\"\r\n              type=\"number\"\r\n              step=\"0.1\"\r\n              value={settings.limiterThreshold}\r\n              onChange={(e) => updateSetting('limiterThreshold', parseFloat(e.target.value))}\r\n              className=\"bg-background border-border\"\r\n            />\r\n          </div>\r\n\r\n          {/* Output Bits */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"outputBits\">{t('aiMastering.outputBits')}</Label>\r\n            <Select value={settings.outputBits} onValueChange={(v) => updateSetting('outputBits', v)}>\r\n              <SelectTrigger className=\"bg-background border-border\">\r\n                <SelectValue />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"32 (IEEE float)\">32 (IEEE float)</SelectItem>\r\n                <SelectItem value=\"24\">24</SelectItem>\r\n                <SelectItem value=\"16\">16</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n\r\n          {/* Output Channels */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"outputChannels\">{t('aiMastering.outputChannels')}</Label>\r\n            <Select value={settings.outputChannels.toString()} onValueChange={(v) => updateSetting('outputChannels', parseInt(v))}>\r\n              <SelectTrigger className=\"bg-background border-border\">\r\n                <SelectValue />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"1\">1</SelectItem>\r\n                <SelectItem value=\"2\">2</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n\r\n          {/* Dithering Method */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"ditheringMethod\">{t('aiMastering.ditheringMethod')}</Label>\r\n            <Select value={settings.ditheringMethod} onValueChange={(v) => updateSetting('ditheringMethod', v)}>\r\n              <SelectTrigger className=\"bg-background border-border\">\r\n                <SelectValue />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"TPDF\">TPDF</SelectItem>\r\n                <SelectItem value=\"RPDF\">RPDF</SelectItem>\r\n                <SelectItem value=\"None\">None</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n\r\n          {/* Checkboxes */}\r\n          <div className=\"space-y-4 col-span-full\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Checkbox\r\n                id=\"analyzeFullSpectrum\"\r\n                checked={settings.analyzeFullSpectrum}\r\n                onCheckedChange={(checked) => updateSetting('analyzeFullSpectrum', checked)}\r\n              />\r\n              <Label htmlFor=\"analyzeFullSpectrum\" className=\"cursor-pointer\">\r\n                {t('aiMastering.analyzeFullSpectrum')}\r\n              </Label>\r\n            </div>\r\n\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Checkbox\r\n                id=\"normalizeReference\"\r\n                checked={settings.normalizeReference}\r\n                onCheckedChange={(checked) => updateSetting('normalizeReference', checked)}\r\n              />\r\n              <Label htmlFor=\"normalizeReference\" className=\"cursor-pointer\">\r\n                {t('aiMastering.normalizeReference')}\r\n              </Label>\r\n            </div>\r\n\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Checkbox\r\n                id=\"normalize\"\r\n                checked={settings.normalize}\r\n                onCheckedChange={(checked) => updateSetting('normalize', checked)}\r\n              />\r\n              <Label htmlFor=\"normalize\" className=\"cursor-pointer\">\r\n                {t('aiMastering.normalize')}\r\n              </Label>\r\n            </div>\r\n\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Checkbox\r\n                id=\"loudnessCorrectionLimiting\"\r\n                checked={settings.loudnessCorrectionLimiting}\r\n                onCheckedChange={(checked) => updateSetting('loudnessCorrectionLimiting', checked)}\r\n              />\r\n              <Label htmlFor=\"loudnessCorrectionLimiting\" className=\"cursor-pointer\">\r\n                {t('aiMastering.loudnessCorrectionLimiting')}\r\n              </Label>\r\n            </div>\r\n\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Checkbox\r\n                id=\"amplify\"\r\n                checked={settings.amplify}\r\n                onCheckedChange={(checked) => updateSetting('amplify', checked)}\r\n              />\r\n              <Label htmlFor=\"amplify\" className=\"cursor-pointer\">\r\n                {t('aiMastering.amplify')}\r\n              </Label>\r\n            </div>\r\n\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Checkbox\r\n                id=\"clipping\"\r\n                checked={settings.clipping}\r\n                onCheckedChange={(checked) => updateSetting('clipping', checked)}\r\n              />\r\n              <Label htmlFor=\"clipping\" className=\"cursor-pointer\">\r\n                {t('aiMastering.clipping')}\r\n              </Label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ai-mastering\\PremiumMasteringUI.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\enhancement\\AdjustableFrequencyBand.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\enhancement\\AdvancedAudioEnhancement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\enhancement\\AdvancedEQPresetsWithCompensation.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\enhancement\\AudioProcessingSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":8,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[289,292],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[289,292],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[335,338],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[335,338],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { Switch } from '@/components/ui/switch';\r\nimport { Slider } from '@/components/ui/slider';\r\nimport { Separator } from '@/components/ui/separator';\r\nimport { AudioSettingsTooltip } from '@/components/AudioSettingsTooltip';\r\n\r\ninterface AudioProcessingSettingsProps {\r\n  settings: any;\r\n  onSettingChange: (key: string, value: any) => void;\r\n}\r\n\r\nexport const AudioProcessingSettings = ({ settings, onSettingChange }: AudioProcessingSettingsProps) => {\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"space-y-2\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center\">\r\n            <label className=\"text-sm font-medium text-white\">Noise Reduction</label>\r\n            <AudioSettingsTooltip setting=\"noiseReduction\" />\r\n          </div>\r\n          <Switch\r\n            checked={settings.noiseReductionEnabled}\r\n            onCheckedChange={(checked) => onSettingChange('noiseReductionEnabled', checked)}\r\n          />\r\n        </div>\r\n        {settings.noiseReductionEnabled && (\r\n          <div className=\"space-y-1\">\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-xs text-slate-400\">Intensity</span>\r\n              <span className=\"text-xs text-slate-400\">{settings.noiseReduction}%</span>\r\n            </div>\r\n            <Slider\r\n              value={[settings.noiseReduction]}\r\n              onValueChange={([value]) => onSettingChange('noiseReduction', value)}\r\n              min={0}\r\n              max={100}\r\n              step={5}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <Separator className=\"bg-slate-600\" />\r\n\r\n      <div className=\"space-y-2\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center\">\r\n            <label className=\"text-sm font-medium text-white\">Audio Normalization</label>\r\n            <AudioSettingsTooltip setting=\"normalization\" />\r\n          </div>\r\n          <Switch\r\n            checked={settings.normalize}\r\n            onCheckedChange={(checked) => onSettingChange('normalize', checked)}\r\n          />\r\n        </div>\r\n        {settings.normalize && (\r\n          <div className=\"space-y-1\">\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-xs text-slate-400\">Target Level</span>\r\n              <span className=\"text-xs text-slate-400\">{settings.normalizeLevel} dB</span>\r\n            </div>\r\n            <Slider\r\n              value={[settings.normalizeLevel]}\r\n              onValueChange={([value]) => onSettingChange('normalizeLevel', value)}\r\n              min={-12}\r\n              max={0}\r\n              step={1}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <Separator className=\"bg-slate-600\" />\r\n\r\n      <div className=\"space-y-2\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center\">\r\n            <label className=\"text-sm font-medium text-white\">Dynamic Compression</label>\r\n            <AudioSettingsTooltip setting=\"compression\" />\r\n          </div>\r\n          <Switch\r\n            checked={settings.compressionEnabled}\r\n            onCheckedChange={(checked) => onSettingChange('compressionEnabled', checked)}\r\n          />\r\n        </div>\r\n        {settings.compressionEnabled && (\r\n          <>\r\n            <div className=\"space-y-1\">\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-xs text-slate-400\">Ratio</span>\r\n                <span className=\"text-xs text-slate-400\">{settings.compression}:1</span>\r\n              </div>\r\n              <Slider\r\n                value={[settings.compression]}\r\n                onValueChange={([value]) => onSettingChange('compression', value)}\r\n                min={1}\r\n                max={10}\r\n                step={0.5}\r\n              />\r\n            </div>\r\n            <div className=\"space-y-1\">\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-xs text-slate-400\">Threshold</span>\r\n                <span className=\"text-xs text-slate-400\">{settings.threshold ?? -3} dB</span>\r\n              </div>\r\n              <Slider\r\n                value={[settings.threshold ?? -3]}\r\n                onValueChange={([value]) => onSettingChange('threshold', value)}\r\n                min={-24}\r\n                max={0}\r\n                step={0.5}\r\n              />\r\n              <p className=\"text-[10px] text-amber-400/80 mt-1\">\r\n                 Ideal range: 1-3 dB of compression to avoid over-compression\r\n              </p>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      <Separator className=\"bg-slate-600\" />\r\n\r\n      <div className=\"space-y-2\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center\">\r\n            <label className=\"text-sm font-medium text-white\">Stereo Widening</label>\r\n            <AudioSettingsTooltip setting=\"stereoWidening\" />\r\n          </div>\r\n          <Switch\r\n            checked={settings.stereoWideningEnabled}\r\n            onCheckedChange={(checked) => onSettingChange('stereoWideningEnabled', checked)}\r\n          />\r\n        </div>\r\n        {settings.stereoWideningEnabled && (\r\n          <div className=\"space-y-1\">\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-xs text-slate-400\">Width</span>\r\n              <span className=\"text-xs text-slate-400\">{settings.stereoWidening}%</span>\r\n            </div>\r\n            <Slider\r\n              value={[settings.stereoWidening]}\r\n              onValueChange={([value]) => onSettingChange('stereoWidening', value)}\r\n              min={0}\r\n              max={100}\r\n              step={5}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\enhancement\\BasicSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":8,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[353,356],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[353,356],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[399,402],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[399,402],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Slider } from '@/components/ui/slider';\r\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\r\nimport { AudioSettingsTooltip } from '@/components/AudioSettingsTooltip';\r\n\r\ninterface BasicSettingsProps {\r\n  settings: any;\r\n  onSettingChange: (key: string, value: any) => void;\r\n  estimatedFileSize: { size: string; quality: string; improvement: string };\r\n}\r\n\r\nexport const BasicSettings = ({ settings, onSettingChange, estimatedFileSize }: BasicSettingsProps) => {\r\n  const sampleRateOptions = [\r\n    { value: 44100, label: '44.1 kHz', description: 'CD Quality' },\r\n    { value: 48000, label: '48 kHz', description: 'Professional' },\r\n    { value: 96000, label: '96 kHz', description: 'Hi-Res Audio' }\r\n  ];\r\n\r\n  const getBitrateOptions = () => {\r\n    switch (settings.outputFormat) {\r\n      case 'mp3':\r\n        return { min: 128, max: 320, step: 32 };\r\n      case 'ogg':\r\n        return { min: 128, max: 500, step: 32 };\r\n      case 'flac':\r\n      case 'wav':\r\n        return { min: 500, max: 2000, step: 100 };\r\n      default:\r\n        return { min: 128, max: 320, step: 32 };\r\n    }\r\n  };\r\n\r\n  const bitrateOptions = getBitrateOptions();\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"space-y-2\">\r\n        <label className=\"text-sm font-medium text-white flex items-center\">\r\n          Output Format\r\n          <AudioSettingsTooltip setting=\"outputFormat\" />\r\n        </label>\r\n        <Select\r\n          value={settings.outputFormat}\r\n          onValueChange={(value) => onSettingChange('outputFormat', value)}\r\n        >\r\n          <SelectTrigger className=\"bg-slate-800 dark:bg-black border-slate-700 text-white h-8\">\r\n            <SelectValue />\r\n          </SelectTrigger>\r\n          <SelectContent className=\"bg-slate-800 dark:bg-black border-slate-700\">\r\n            <SelectItem value=\"mp3\">MP3</SelectItem>\r\n            <SelectItem value=\"flac\">FLAC (Lossless)</SelectItem>\r\n            <SelectItem value=\"wav\">WAV (Uncompressed)</SelectItem>\r\n            <SelectItem value=\"ogg\">OGG</SelectItem>\r\n          </SelectContent>\r\n        </Select>\r\n      </div>\r\n\r\n      <div className=\"space-y-2\">\r\n        <div className=\"flex justify-between\">\r\n          <label className=\"text-sm font-medium text-white flex items-center\">\r\n            Target Bitrate\r\n            <AudioSettingsTooltip setting=\"targetBitrate\" />\r\n          </label>\r\n          <span className=\"text-sm text-slate-400\">\r\n            {settings.outputFormat === 'flac' || settings.outputFormat === 'wav' \r\n              ? `${settings.targetBitrate} kbps (Lossless)`\r\n              : `${settings.targetBitrate} kbps`\r\n            }\r\n          </span>\r\n        </div>\r\n        <Slider\r\n          value={[settings.targetBitrate]}\r\n          onValueChange={([value]) => onSettingChange('targetBitrate', value)}\r\n          min={bitrateOptions.min}\r\n          max={bitrateOptions.max}\r\n          step={bitrateOptions.step}\r\n          className=\"w-full\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"space-y-3\">\r\n        <label className=\"text-sm font-medium text-white flex items-center\">\r\n          Sample Rate\r\n          <AudioSettingsTooltip setting=\"sampleRate\" />\r\n        </label>\r\n        <RadioGroup\r\n          value={settings.sampleRate.toString()}\r\n          onValueChange={(value) => onSettingChange('sampleRate', parseInt(value))}\r\n          className=\"grid grid-cols-1 gap-3\"\r\n        >\r\n          {sampleRateOptions.map((option) => (\r\n            <div key={option.value} className=\"flex items-center space-x-3 p-3 rounded-lg bg-slate-800/90 dark:bg-black/80 border border-slate-700 hover:bg-slate-700 dark:hover:bg-slate-900 transition-colors\">\r\n              <RadioGroupItem\r\n                value={option.value.toString()}\r\n                id={`rate-${option.value}`}\r\n                className=\"border-slate-400 text-blue-400\"\r\n              />\r\n              <label \r\n                htmlFor={`rate-${option.value}`} \r\n                className=\"flex-1 cursor-pointer\"\r\n              >\r\n                <div className=\"text-sm font-medium text-slate-200\">{option.label}</div>\r\n                <div className=\"text-xs text-slate-400\">{option.description}</div>\r\n              </label>\r\n            </div>\r\n          ))}\r\n        </RadioGroup>\r\n      </div>\r\n\r\n      <div className=\"p-4 bg-gradient-to-r from-blue-500/20 to-purple-500/20 border-2 border-blue-500/40 rounded-lg shadow-lg\">\r\n        <div className=\"grid grid-cols-3 gap-3\">\r\n          <div className=\"text-center\">\r\n            <div className=\"text-xs text-blue-300 mb-1\">Format</div>\r\n            <div className=\"text-sm font-bold text-blue-100\">{settings.outputFormat.toUpperCase()}</div>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <div className=\"text-xs text-purple-300 mb-1\">Quality</div>\r\n            <div className=\"text-sm font-bold text-purple-100\">{estimatedFileSize.quality}</div>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <div className=\"text-xs text-green-300 mb-1\">Est. Size</div>\r\n            <div className=\"text-sm font-bold text-green-100\">{estimatedFileSize.size} MB</div>\r\n          </div>\r\n        </div>\r\n        <div className=\"mt-2 pt-2 border-t border-white/10 text-center\">\r\n          <span className=\"text-xs text-slate-300\">Size increase: </span>\r\n          <span className=\"text-xs font-semibold text-green-300\">{estimatedFileSize.improvement}x</span>\r\n          <span className=\"text-xs text-slate-400\"> (per 4-min track)</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"space-y-2\">\r\n        <div className=\"flex justify-between\">\r\n          <label className=\"text-sm font-medium text-white flex items-center\">\r\n            Gain Adjustment\r\n            <AudioSettingsTooltip setting=\"gainAdjustment\" />\r\n          </label>\r\n          <span className=\"text-sm text-slate-400\">{settings.gainAdjustment > 0 ? '+' : ''}{settings.gainAdjustment} dB</span>\r\n        </div>\r\n        <Slider\r\n          value={[settings.gainAdjustment]}\r\n          onValueChange={([value]) => onSettingChange('gainAdjustment', value)}\r\n          min={-12}\r\n          max={12}\r\n          step={0.5}\r\n          className=\"w-full\"\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\enhancement\\CompactEqualizerWithPresets.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[532,535],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[532,535],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[578,581],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[578,581],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Switch } from '@/components/ui/switch';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Slider } from '@/components/ui/slider';\r\nimport { AudioSettingsTooltip } from '@/components/AudioSettingsTooltip';\r\nimport { Music2, Mic, Headphones, Guitar, Piano, Disc3, Radio, MessageSquare, Speaker, Volume2, Waves, Music, Lightbulb } from 'lucide-react';\r\nimport { useLanguage } from '@/contexts/LanguageContext';\r\nimport { memo, useCallback } from 'react';\r\n\r\ninterface CompactEqualizerWithPresetsProps {\r\n  settings: any;\r\n  onSettingChange: (key: string, value: any) => void;\r\n  onEQBandChange: (bandIndex: number, value: number) => void;\r\n  onResetEQ: () => void;\r\n}\r\n\r\n// 10 Professional EQ Presets with Real dB Values for Web Audio API\r\n// These values map directly to BiquadFilterNode gain parameters\r\nconst EQ_PRESETS = [\r\n  { name: 'Jazz', nameES: 'Jazz', icon: Music2, values: [2, 1, 0, 1, 2, 3, 2, 1, 2, 2] },\r\n  { name: 'Electronic', nameES: 'Electrnica', icon: Disc3, values: [5, 4, 2, 0, -2, 2, 3, 4, 5, 6] },\r\n  { name: 'Podcast', nameES: 'Podcast', icon: MessageSquare, values: [2, 3, 5, 4, 2, 0, -2, -3, -2, 0] },\r\n  { name: 'Reggae', nameES: 'Reggae', icon: Waves, values: [6, 4, 2, 0, -1, 0, 1, 2, 3, 2] },\r\n  { name: 'Latin', nameES: 'Latina', icon: Music, values: [3, 2, 1, 0, 1, 2, 3, 2, 1, 2] },\r\n  { name: 'Rock', nameES: 'Rock', icon: Guitar, values: [4, 3, 1, 0, -2, -1, 2, 3, 4, 3] },\r\n  { name: 'Acoustic Clarity', nameES: 'Claridad Acstica', icon: Lightbulb, values: [0, 0, 1, 2, 3, 4, 3, 2, 1, 0] },\r\n  { name: 'Vocal Warmth', nameES: 'Calidez Vocal', icon: Mic, values: [-1, 0, 2, 4, 5, 4, 2, 0, -1, -2] },\r\n  { name: 'Heavy Bass', nameES: 'Graves Potentes', icon: Volume2, values: [8, 7, 5, 3, 1, 0, 0, 0, 0, 0] },\r\n  { name: 'Live', nameES: 'En Vivo', icon: Headphones, values: [2, 2, 1, 0, 1, 2, 3, 3, 2, 2] },\r\n];\r\n\r\n// Memoized EQ Band component to prevent unnecessary re-renders\r\nconst EQBand = memo(({ \r\n  freq, \r\n  index, \r\n  value, \r\n  onChange \r\n}: { \r\n  freq: number; \r\n  index: number; \r\n  value: number; \r\n  onChange: (index: number, value: number) => void;\r\n}) => {\r\n  const handleChange = useCallback((newValue: number[]) => {\r\n    onChange(index, newValue[0]);\r\n  }, [index, onChange]);\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center\">\r\n      <div className=\"h-12 flex items-end justify-center mb-1 relative\">\r\n        <Slider\r\n          orientation=\"vertical\"\r\n          value={[value]}\r\n          onValueChange={handleChange}\r\n          min={-12}\r\n          max={12}\r\n          step={0.5}\r\n          className=\"h-11 w-2.5\"\r\n        />\r\n      </div>\r\n      <div className=\"text-[7px] font-medium text-blue-400 mb-0.5\">\r\n        {freq < 1000 ? freq : `${freq/1000}k`}\r\n      </div>\r\n      <div className=\"text-[6px] text-slate-400 font-mono\">\r\n        {value > 0 ? '+' : ''}{value}\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nEQBand.displayName = 'EQBand';\r\n\r\nexport const CompactEqualizerWithPresets = ({ \r\n  settings, \r\n  onSettingChange, \r\n  onEQBandChange, \r\n  onResetEQ \r\n}: CompactEqualizerWithPresetsProps) => {\r\n  const { t, language } = useLanguage();\r\n  const eqFrequencies = [31, 62, 125, 250, 500, 1000, 2000, 4000, 8000, 16000];\r\n\r\n  // Memoized preset application function with animated band movement\r\n  const applyPreset = useCallback((values: number[]) => {\r\n    // Apply each band change with staggered delay for visual effect\r\n    values.forEach((value, index) => {\r\n      setTimeout(() => {\r\n        onEQBandChange(index, value);\r\n      }, index * 50); // 50ms delay between each band\r\n    });\r\n  }, [onEQBandChange]);\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      {/* Header with Enable Toggle and Reset */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <Switch\r\n            checked={settings.enableEQ}\r\n            onCheckedChange={(checked) => onSettingChange('enableEQ', checked)}\r\n          />\r\n          <span className=\"text-sm font-medium text-white\">\r\n            {t('eq.enableEqualizer')}\r\n          </span>\r\n          <AudioSettingsTooltip setting=\"eq\" />\r\n        </div>\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          onClick={onResetEQ}\r\n          className=\"bg-slate-800 dark:bg-black border-slate-700 hover:bg-slate-700 dark:hover:bg-slate-900 text-white h-7 text-xs px-2\"\r\n        >\r\n          {t('eq.reset')}\r\n        </Button>\r\n      </div>\r\n      \r\n      {settings.enableEQ && (\r\n        <div className=\"space-y-3\">\r\n          {/* EQ Presets Strip - ON TOP */}\r\n          <div className=\"bg-gradient-to-br from-purple-900/40 to-blue-900/40 dark:from-purple-950/60 dark:to-blue-950/60 rounded-lg p-2.5 border border-purple-700/50 dark:border-purple-800/70\">\r\n            <h4 className=\"text-[9px] font-semibold text-purple-300 mb-2 tracking-wide flex items-center gap-1\">\r\n              {t('eq.eqPresets')}\r\n              <span className=\"text-[7px] text-purple-400/70\">(Real dB values)</span>\r\n            </h4>\r\n            <div className=\"grid grid-cols-5 gap-1.5\">\r\n              {EQ_PRESETS.map((preset) => {\r\n                const Icon = preset.icon;\r\n                const displayName = language === 'ES' ? preset.nameES : preset.name;\r\n                return (\r\n                  <Button\r\n                    key={preset.name}\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={() => applyPreset(preset.values)}\r\n                    className=\"bg-slate-800/90 dark:bg-black/80 border-slate-600 dark:border-slate-700 hover:bg-gradient-to-br hover:from-purple-600 hover:to-blue-600 hover:border-purple-500 text-white h-auto py-1.5 px-1 flex flex-col items-center gap-0.5 transition-all duration-300\"\r\n                    title={displayName}\r\n                  >\r\n                    <Icon className=\"h-3 w-3\" />\r\n                    <span className=\"text-[7px] leading-tight text-center\">\r\n                      {displayName}\r\n                    </span>\r\n                  </Button>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Compact Equalizer - 35% smaller, below presets */}\r\n          <div className=\"bg-gradient-to-br from-slate-900/80 to-slate-800/60 dark:from-black/90 dark:to-slate-950/80 rounded-lg p-2.5 border border-slate-700 dark:border-slate-800\">\r\n            <h4 className=\"text-[9px] font-semibold text-cyan-400 mb-2 tracking-wide\">\r\n              {t('eq.tenBandEqualizer')}\r\n            </h4>\r\n            <div className=\"flex justify-center items-end gap-1.5\">\r\n              {eqFrequencies.map((freq, index) => (\r\n                <EQBand\r\n                  key={freq}\r\n                  freq={freq}\r\n                  index={index}\r\n                  value={settings.eqBands[index]}\r\n                  onChange={onEQBandChange}\r\n                />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\enhancement\\DynamicOutputSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\enhancement\\EnhancedEQPresets.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[324,327],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[324,327],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[370,373],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[370,373],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useState } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Save, FolderOpen } from 'lucide-react';\r\nimport { useToast } from '@/hooks/use-toast';\r\n\r\ninterface EnhancedEQPresetsProps {\r\n  eqBands: number[];\r\n  onLoadPreset: (preset: number[]) => void;\r\n  processingSettings: any;\r\n  onLoadProcessingSettings?: (settings: any) => void;\r\n}\r\n\r\nexport const EnhancedEQPresets = ({ \r\n  eqBands, \r\n  onLoadPreset, \r\n  processingSettings,\r\n  onLoadProcessingSettings \r\n}: EnhancedEQPresetsProps) => {\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  const [isSaveActive, setIsSaveActive] = useState(false);\r\n  const [isLoadActive, setIsLoadActive] = useState(false);\r\n  const [loadedPresetName, setLoadedPresetName] = useState<string>('');\r\n  const { toast } = useToast();\r\n\r\n  const handleSavePreset = () => {\r\n    setIsSaveActive(true);\r\n    setTimeout(() => setIsSaveActive(false), 300);\r\n\r\n    // Create comprehensive preset data\r\n    const presetData = {\r\n      name: `Level Preset ${new Date().toLocaleDateString()}`,\r\n      version: \"2.0\",\r\n      timestamp: new Date().toISOString(),\r\n      eqBands: eqBands,\r\n      processingSettings: processingSettings,\r\n      metadata: {\r\n        createdBy: \"Level Audio Processor\",\r\n        description: \"Complete audio processing preset including EQ and effects\"\r\n      }\r\n    };\r\n\r\n    // Create and download file\r\n    const blob = new Blob([JSON.stringify(presetData, null, 2)], {\r\n      type: 'application/json'\r\n    });\r\n\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = `spectrum-preset-${Date.now()}.json`;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n    URL.revokeObjectURL(url);\r\n\r\n    toast({\r\n      title: \"Preset Saved\",\r\n      description: \"Audio settings preset has been saved to your computer.\",\r\n    });\r\n  };\r\n\r\n  const handleLoadPreset = () => {\r\n    fileInputRef.current?.click();\r\n  };\r\n\r\n  const handleFileLoad = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    if (!file.name.endsWith('.json')) {\r\n      toast({\r\n        title: \"Invalid File\",\r\n        description: \"Please select a valid JSON preset file.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    setIsLoadActive(true);\r\n    setTimeout(() => setIsLoadActive(false), 300);\r\n\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      try {\r\n        const result = e.target?.result as string;\r\n        const presetData = JSON.parse(result);\r\n        \r\n        if (presetData.eqBands && Array.isArray(presetData.eqBands)) {\r\n          onLoadPreset(presetData.eqBands);\r\n          \r\n          if (presetData.processingSettings && onLoadProcessingSettings) {\r\n            onLoadProcessingSettings(presetData.processingSettings);\r\n          }\r\n          \r\n          setLoadedPresetName(presetData.name || file.name);\r\n          \r\n          toast({\r\n            title: \"Preset Loaded\",\r\n            description: `Successfully loaded: ${presetData.name || file.name}`,\r\n          });\r\n        } else {\r\n          throw new Error('Invalid preset format - missing EQ bands');\r\n        }\r\n      } catch (error) {\r\n        toast({\r\n          title: \"Load Failed\",\r\n          description: \"Failed to parse preset file. Please check the file format.\",\r\n          variant: \"destructive\"\r\n        });\r\n        console.error('Preset load error:', error);\r\n      }\r\n    };\r\n    \r\n    reader.readAsText(file);\r\n    \r\n    // Reset input\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = '';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      <div className=\"flex flex-col gap-1\">\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          onClick={handleLoadPreset}\r\n          className={`transition-all duration-300 h-7 text-xs px-2 ${\r\n            isLoadActive \r\n              ? 'bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-500/50 scale-95' \r\n              : 'bg-slate-800 dark:bg-black border-slate-600 dark:border-slate-700 hover:bg-slate-700 dark:hover:bg-slate-900 text-white hover:border-blue-400'\r\n          }`}\r\n        >\r\n          <FolderOpen className=\"h-3 w-3 mr-1\" />\r\n          Load\r\n        </Button>\r\n        \r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          onClick={handleSavePreset}\r\n          className={`transition-all duration-300 h-7 text-xs px-2 ${\r\n            isSaveActive \r\n              ? 'bg-green-600 border-green-500 text-white shadow-lg shadow-green-500/50 scale-95' \r\n              : 'bg-slate-800 dark:bg-black border-slate-600 dark:border-slate-700 hover:bg-slate-700 dark:hover:bg-slate-900 text-white hover:border-green-400'\r\n          }`}\r\n        >\r\n          <Save className=\"h-3 w-3 mr-1\" />\r\n          Save\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Hidden file input for preset loading */}\r\n      <input\r\n        ref={fileInputRef}\r\n        type=\"file\"\r\n        accept=\".json\"\r\n        onChange={handleFileLoad}\r\n        className=\"hidden\"\r\n      />\r\n\r\n      {/* Show loaded preset name */}\r\n      {loadedPresetName && (\r\n        <div className=\"text-[10px] text-slate-300 dark:text-slate-400 bg-slate-800/50 dark:bg-black/70 px-2 py-1 rounded border border-slate-600 dark:border-slate-700\">\r\n          <span className=\"text-blue-400 dark:text-blue-300 font-medium\">Active:</span> {loadedPresetName}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\enhancement\\EnhancedTrackManagement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\enhancement\\EnhancedTrackManagementUpdated.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\enhancement\\EqualizerSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":8,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[277,280],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[277,280],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[323,326],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[323,326],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { Switch } from '@/components/ui/switch';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Slider } from '@/components/ui/slider';\r\nimport { AudioSettingsTooltip } from '@/components/AudioSettingsTooltip';\r\n\r\ninterface EqualizerSettingsProps {\r\n  settings: any;\r\n  onSettingChange: (key: string, value: any) => void;\r\n  onEQBandChange: (bandIndex: number, value: number) => void;\r\n  onResetEQ: () => void;\r\n}\r\n\r\nexport const EqualizerSettings = ({ settings, onSettingChange, onEQBandChange, onResetEQ }: EqualizerSettingsProps) => {\r\n  const eqFrequencies = [31, 62, 125, 250, 500, 1000, 2000, 4000, 8000, 16000];\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <Switch\r\n          checked={settings.enableEQ}\r\n          onCheckedChange={(checked) => onSettingChange('enableEQ', checked)}\r\n        />\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          onClick={onResetEQ}\r\n          className=\"bg-slate-700 border-slate-600 hover:bg-slate-600 text-white h-8\"\r\n        >\r\n          Reset EQ\r\n        </Button>\r\n      </div>\r\n      \r\n      {settings.enableEQ && (\r\n        <div className=\"relative bg-slate-900/50 rounded-lg p-6\">\r\n          <div className=\"flex justify-center items-end gap-3 py-4 relative z-10\">\r\n            {eqFrequencies.map((freq, index) => (\r\n              <div key={freq} className=\"flex flex-col items-center\">\r\n                <div className=\"h-32 flex items-end justify-center mb-2 relative\">\r\n                  <Slider\r\n                    orientation=\"vertical\"\r\n                    value={[settings.eqBands[index]]}\r\n                    onValueChange={([value]) => onEQBandChange(index, value)}\r\n                    min={-12}\r\n                    max={12}\r\n                    step={0.5}\r\n                    className=\"h-28 w-6 relative z-10\"\r\n                  />\r\n                </div>\r\n                <div className=\"text-xs font-medium text-blue-400 mb-1\">\r\n                  {freq < 1000 ? `${freq}Hz` : `${freq/1000}kHz`}\r\n                </div>\r\n                <div className=\"text-xs text-slate-300\">\r\n                  {settings.eqBands[index] > 0 ? '+' : ''}{settings.eqBands[index]}dB\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\enhancement\\FiveBandEqualizer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\enhancement\\IndividualModeQueue.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\enhancement\\InteractiveProcessingOptions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\enhancement\\ProfessionalEqualizer.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'frequencyRanges' array makes the dependencies of useCallback Hook (at line 84) change on every render. To fix this, wrap the initialization of 'frequencyRanges' in its own useMemo() Hook.","line":47,"column":9,"nodeType":"VariableDeclarator","endLine":58,"endColumn":4},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'defaultFrequencies'. Either include it or remove the dependency array.","line":93,"column":6,"nodeType":"ArrayExpression","endLine":93,"endColumn":17,"suggestions":[{"desc":"Update the dependencies array to be: [defaultFrequencies, onResetEQ]","fix":{"range":[4729,4740],"text":"[defaultFrequencies, onResetEQ]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { memo, useCallback, useState } from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport { Slider } from '@/components/ui/slider';\r\nimport { Input } from '@/components/ui/input';\r\nimport { RotateCcw, Music2, Mic, Headphones, Guitar, Disc3, Radio, MessageSquare, Volume2, Waves, Music, Lightbulb } from 'lucide-react';\r\nimport { useLanguage } from '@/contexts/LanguageContext';\r\nimport { toast } from 'sonner';\r\n\r\ninterface ProfessionalEqualizerProps {\r\n  eqBands: number[];\r\n  onEQBandChange: (bandIndex: number, value: number) => void;\r\n  onResetEQ: () => void;\r\n  enabled: boolean;\r\n  onEnabledChange: (enabled: boolean) => void;\r\n}\r\n\r\n// 10 Professional EQ Presets with Full 10-Band Values and Automatic Gain Compensation\r\n// Each preset now includes values for all 10 bands: 31Hz, 62Hz, 125Hz, 250Hz, 500Hz, 1kHz, 2kHz, 4kHz, 8kHz, 16kHz\r\nconst EQ_PRESETS = [\r\n  { name: 'Modern Punch', nameES: 'Punch Moderno', icon: Volume2, values: [+1.5, +1.0, +0.5, -2.0, +0.5, +2.0, +1.5, +1.0, +0.5, 0], compensation: -1.2 },\r\n  { name: 'Vocal Presence', nameES: 'Presencia Vocal', icon: Mic, values: [-1.5, -2.0, -1.0, +1.5, +2.0, +2.5, +2.0, +1.0, +0.5, 0], compensation: -0.6 },\r\n  { name: 'Bass Foundation', nameES: 'Base de Graves', icon: Waves, values: [+2.0, +1.5, +1.0, -1.0, -0.5, 0, 0, 0, 0, 0], compensation: -0.9 },\r\n  { name: 'Clarity & Air', nameES: 'Claridad y Aire', icon: Lightbulb, values: [-0.5, -0.5, 0, -1.0, +1.0, +1.5, +2.0, +2.5, +3.0, +2.5], compensation: -0.8 },\r\n  { name: 'De-Box / Clean Mid', nameES: 'Limpiar Medios', icon: Radio, values: [-1.0, -1.0, -1.5, -2.5, -2.0, +1.0, +1.5, +1.0, +0.5, 0], compensation: -0.5 },\r\n  { name: 'Warmth & Body', nameES: 'Calidez y Cuerpo', icon: Music2, values: [+0.5, +1.0, +1.5, +1.0, +0.5, -1.0, -1.5, -1.0, -0.5, 0], compensation: -0.4 },\r\n  { name: 'Live Energy (Subtle V)', nameES: 'Energa en Vivo (V Sutil)', icon: Headphones, values: [+1.0, +1.0, +0.5, -1.5, -1.0, +0.5, +1.0, +1.5, +2.0, +1.5], compensation: -0.7 },\r\n  { name: 'Acoustic / Orchestral', nameES: 'Acstico / Orquestal', icon: Guitar, values: [+0.5, +0.5, 0, -1.0, -0.5, +0.5, +1.0, +1.0, +0.5, 0], compensation: -0.3 },\r\n  { name: 'Digital De-Harsh', nameES: 'De-Harsh Digital', icon: Disc3, values: [0, 0, 0, +0.5, 0, -1.5, -2.0, -1.5, -1.0, -0.5], compensation: 0 },\r\n  { name: 'Voiceover / Podcast', nameES: 'Voz en Off / Podcast', icon: MessageSquare, values: [-6.0, -4.0, -2.5, +2.0, +2.5, +2.0, +1.0, -1.5, -2.0, -1.0], compensation: -1.5 },\r\n];\r\n\r\nexport const ProfessionalEqualizer = ({ \r\n  eqBands, \r\n  onEQBandChange, \r\n  onResetEQ,\r\n  enabled,\r\n  onEnabledChange\r\n}: ProfessionalEqualizerProps) => {\r\n  const { t, language } = useLanguage();\r\n  \r\n  // Default 10 band EQ frequencies\r\n  const defaultFrequencies = [31, 62, 125, 250, 500, 1000, 2000, 4000, 8000, 16000];\r\n  \r\n  // Frequency ranges for each band (min, max)\r\n  const frequencyRanges = [\r\n    [20, 50],      // Band 0: Sub Bass\r\n    [50, 100],     // Band 1: Bass\r\n    [100, 200],    // Band 2: Low Mid\r\n    [200, 400],    // Band 3: Mid\r\n    [400, 800],    // Band 4: Upper Mid\r\n    [800, 1500],   // Band 5: Presence\r\n    [1500, 3000],  // Band 6: Upper Presence\r\n    [3000, 6000],  // Band 7: Brilliance\r\n    [6000, 12000], // Band 8: Air\r\n    [12000, 20000] // Band 9: Ultra High\r\n  ];\r\n  \r\n  // State for custom frequencies\r\n  const [eqFrequencies, setEqFrequencies] = useState<number[]>(defaultFrequencies);\r\n  const [editingBand, setEditingBand] = useState<number | null>(null);\r\n  const [tempFreqValue, setTempFreqValue] = useState<string>('');\r\n  \r\n  const handleFrequencyClick = useCallback((index: number) => {\r\n    setEditingBand(index);\r\n    setTempFreqValue(eqFrequencies[index].toString());\r\n  }, [eqFrequencies]);\r\n  \r\n  const handleFrequencyChange = useCallback((value: string) => {\r\n    setTempFreqValue(value);\r\n  }, []);\r\n  \r\n  const handleFrequencySubmit = useCallback((index: number) => {\r\n    const newFreq = parseInt(tempFreqValue);\r\n    const [min, max] = frequencyRanges[index];\r\n    \r\n    if (!isNaN(newFreq) && newFreq >= min && newFreq <= max) {\r\n      const newFrequencies = [...eqFrequencies];\r\n      newFrequencies[index] = newFreq;\r\n      setEqFrequencies(newFrequencies);\r\n    }\r\n    setEditingBand(null);\r\n  }, [tempFreqValue, eqFrequencies, frequencyRanges]);\r\n  \r\n  const handleFrequencyBlur = useCallback((index: number) => {\r\n    handleFrequencySubmit(index);\r\n  }, [handleFrequencySubmit]);\r\n  \r\n  const handleResetWithFrequencies = useCallback(() => {\r\n    setEqFrequencies(defaultFrequencies);\r\n    onResetEQ();\r\n  }, [onResetEQ]);\r\n  \r\n  const applyPreset = useCallback((values: number[], compensation: number) => {\r\n    // Apply EQ values to all 10 bands in real-time\r\n    // This ensures ALL sliders move when a preset is selected\r\n    values.forEach((value, index) => {\r\n      if (index < 10) {\r\n        // Apply value to corresponding band with smooth transition\r\n        onEQBandChange(index, value);\r\n      }\r\n    });\r\n    \r\n    // Apply automatic gain compensation\r\n    console.log(` Applied preset with ${compensation} dB gain compensation for equal loudness`);\r\n    \r\n    toast.success('Preset Applied', {\r\n      description: `EQ preset applied with ${compensation >= 0 ? '+' : ''}${compensation} dB compensation`,\r\n    });\r\n  }, [onEQBandChange]);\r\n  \r\n  const getEQColor = (index: number) => {\r\n    const colors = [\r\n      '#ff1744', // Red for Bass\r\n      '#ff6d00', // Orange for Low Mid  \r\n      '#ffc400', // Yellow for Mid\r\n      '#3d5afe', // Blue for High Mid\r\n      '#651fff'  // Purple for Treble\r\n    ];\r\n    return colors[index];\r\n  };\r\n\r\n  const getTickMarks = () => {\r\n    const marks = [];\r\n    for (let i = -12; i <= 12; i += 3) {\r\n      marks.push(i);\r\n    }\r\n    return marks;\r\n  };\r\n\r\n  return (\r\n    <Card className=\"bg-slate-900/90 dark:bg-black/90 border-slate-700 dark:border-slate-800\">\r\n      <CardHeader className=\"pb-3\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <CardTitle className=\"flex items-center gap-2 text-white text-base\">\r\n            <div className=\"w-4 h-4 bg-gradient-to-r from-blue-400 to-purple-400 rounded\"></div>\r\n            Equalizer\r\n          </CardTitle>\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"text-xs text-slate-400\">Audio EQ</span>\r\n              <Switch\r\n                checked={enabled}\r\n                onCheckedChange={onEnabledChange}\r\n              />\r\n            </div>\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={handleResetWithFrequencies}\r\n              className=\"h-8 text-xs bg-slate-800 dark:bg-black border-slate-700 dark:border-slate-800 hover:bg-slate-700 dark:hover:bg-slate-900 text-white\"\r\n            >\r\n              <RotateCcw className=\"h-3 w-3 mr-1\" />\r\n              Reset\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </CardHeader>\r\n      <CardContent className=\"pt-0\">\r\n        {enabled ? (\r\n          <div className=\"relative space-y-4\">\r\n            {/* EQ Presets Strip - ON TOP */}\r\n            <div className=\"bg-gradient-to-br from-purple-900/40 to-blue-900/40 dark:from-purple-950/60 dark:to-blue-950/60 rounded-lg p-3 border border-purple-700/50 dark:border-purple-800/70\">\r\n              <h4 className=\"text-xs font-semibold text-purple-300 dark:text-purple-200 mb-2 tracking-wide flex items-center gap-2\">\r\n                Professional EQ Presets\r\n                <span className=\"text-[10px] text-purple-400/70 dark:text-purple-300/60\">(Real dB values)</span>\r\n              </h4>\r\n              <div className=\"grid grid-cols-5 gap-1.5\">\r\n                {EQ_PRESETS.map((preset) => {\r\n                  const Icon = preset.icon;\r\n                  const displayName = language === 'ES' ? preset.nameES : preset.name;\r\n                  return (\r\n                    <Button\r\n                      key={preset.name}\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      onClick={() => applyPreset(preset.values, preset.compensation)}\r\n                      className=\"bg-slate-800/90 dark:bg-black/80 border-slate-600 dark:border-slate-700 hover:bg-gradient-to-br hover:from-purple-600 hover:to-blue-600 hover:border-purple-500 text-white h-auto py-1.5 px-1.5 flex flex-col items-center gap-0.5 transition-all duration-300\"\r\n                      title={`${displayName} (Gain: ${preset.compensation > 0 ? '+' : ''}${preset.compensation} dB)`}\r\n                    >\r\n                      <Icon className=\"h-3.5 w-3.5\" />\r\n                      <span className=\"text-[8px] leading-tight text-center\">\r\n                        {displayName}\r\n                      </span>\r\n                    </Button>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Professional EQ with DJ Grid Background */}\r\n            <div className=\"relative bg-gradient-to-br from-slate-950 via-black to-slate-900 rounded-xl p-6 border-2 border-cyan-500/30 shadow-2xl overflow-hidden\">\r\n              \r\n              {/* Animated DJ Grid Background */}\r\n              <div className=\"absolute inset-0 opacity-30\">\r\n                <svg className=\"w-full h-full\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                  <defs>\r\n                    <linearGradient id=\"gridGradient\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\r\n                      <stop offset=\"0%\" stopColor=\"#06b6d4\" stopOpacity=\"0.6\" />\r\n                      <stop offset=\"20%\" stopColor=\"#3b82f6\" stopOpacity=\"0.4\" />\r\n                      <stop offset=\"40%\" stopColor=\"#8b5cf6\" stopOpacity=\"0.4\" />\r\n                      <stop offset=\"60%\" stopColor=\"#ec4899\" stopOpacity=\"0.4\" />\r\n                      <stop offset=\"100%\" stopColor=\"#ef4444\" stopOpacity=\"0.6\" />\r\n                    </linearGradient>\r\n                  </defs>\r\n                  \r\n                  {/* Frequency Zone Labels */}\r\n                  <text x=\"5%\" y=\"15%\" fill=\"#06b6d4\" fontSize=\"10\" opacity=\"0.5\" fontWeight=\"bold\">SUB</text>\r\n                  <text x=\"5%\" y=\"35%\" fill=\"#3b82f6\" fontSize=\"10\" opacity=\"0.5\" fontWeight=\"bold\">BASS</text>\r\n                  <text x=\"5%\" y=\"55%\" fill=\"#8b5cf6\" fontSize=\"10\" opacity=\"0.5\" fontWeight=\"bold\">MID</text>\r\n                  <text x=\"5%\" y=\"75%\" fill=\"#ec4899\" fontSize=\"10\" opacity=\"0.5\" fontWeight=\"bold\">HIGH</text>\r\n                  <text x=\"5%\" y=\"95%\" fill=\"#ef4444\" fontSize=\"10\" opacity=\"0.5\" fontWeight=\"bold\">AIR</text>\r\n                  \r\n                  {/* Horizontal grid lines */}\r\n                  {[...Array(13)].map((_, i) => (\r\n                    <line\r\n                      key={`h-${i}`}\r\n                      x1=\"0\"\r\n                      y1={`${(i / 12) * 100}%`}\r\n                      x2=\"100%\"\r\n                      y2={`${(i / 12) * 100}%`}\r\n                      stroke=\"url(#gridGradient)\"\r\n                      strokeWidth=\"0.5\"\r\n                      opacity=\"0.3\"\r\n                    />\r\n                  ))}\r\n                  \r\n                  {/* Vertical grid lines */}\r\n                  {[...Array(11)].map((_, i) => (\r\n                    <line\r\n                      key={`v-${i}`}\r\n                      x1={`${(i / 10) * 100}%`}\r\n                      y1=\"0\"\r\n                      x2={`${(i / 10) * 100}%`}\r\n                      y2=\"100%\"\r\n                      stroke=\"url(#gridGradient)\"\r\n                      strokeWidth=\"0.5\"\r\n                      opacity=\"0.2\"\r\n                    />\r\n                  ))}\r\n                </svg>\r\n              </div>\r\n              \r\n              {/* dB Scale */}\r\n              <div className=\"absolute left-2 top-6 bottom-6 flex flex-col justify-between\">\r\n                {getTickMarks().map((mark) => (\r\n                  <span \r\n                    key={mark}\r\n                    className=\"text-[10px] text-cyan-400/70 font-mono\"\r\n                  >\r\n                    {mark > 0 ? `+${mark}` : mark}\r\n                  </span>\r\n                ))}\r\n              </div>\r\n\r\n              <div className=\"flex justify-center items-end gap-3 py-4 relative z-10 pl-8\">\r\n                {eqFrequencies.map((freq, index) => {\r\n                  // Color coding by frequency zone\r\n                  const getFreqColor = () => {\r\n                    if (index <= 1) return 'from-cyan-400 to-cyan-600'; // SUB\r\n                    if (index <= 3) return 'from-blue-400 to-blue-600'; // BASS\r\n                    if (index <= 6) return 'from-purple-400 to-purple-600'; // MID\r\n                    if (index <= 8) return 'from-pink-400 to-pink-600'; // HIGH\r\n                    return 'from-red-400 to-red-600'; // AIR\r\n                  };\r\n                  \r\n                  return (\r\n                    <div key={index} className=\"flex flex-col items-center group\">\r\n                      \r\n                      {/* Frequency Label - Editable */}\r\n                      {editingBand === index ? (\r\n                        <Input\r\n                          type=\"number\"\r\n                          value={tempFreqValue}\r\n                          onChange={(e) => handleFrequencyChange(e.target.value)}\r\n                          onBlur={() => handleFrequencyBlur(index)}\r\n                          onKeyDown={(e) => {\r\n                            if (e.key === 'Enter') handleFrequencySubmit(index);\r\n                            if (e.key === 'Escape') setEditingBand(null);\r\n                          }}\r\n                          className=\"w-14 h-6 text-[9px] text-center p-0 bg-slate-800 border-cyan-500 text-cyan-300\"\r\n                          autoFocus\r\n                        />\r\n                      ) : (\r\n                        <div \r\n                          className={`text-[10px] text-center mb-2 font-mono bg-gradient-to-r ${getFreqColor()} bg-clip-text text-transparent font-bold cursor-pointer hover:opacity-80`}\r\n                          onClick={() => handleFrequencyClick(index)}\r\n                          title={`Click to edit (Range: ${frequencyRanges[index][0]}-${frequencyRanges[index][1]} Hz)`}\r\n                        >\r\n                          {eqFrequencies[index] < 1000 ? `${eqFrequencies[index]}Hz` : `${(eqFrequencies[index]/1000).toFixed(1)}k`}\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Professional Fader with Rails */}\r\n                      <div className=\"relative h-32 w-6 mb-2\">\r\n                        \r\n                        {/* Fader Rail Background with Gradient */}\r\n                        <div \r\n                          className={`absolute inset-x-1 inset-y-2 rounded-full border-2 shadow-inner bg-gradient-to-b ${getFreqColor()} opacity-20`}\r\n                          style={{\r\n                            boxShadow: 'inset 0 2px 4px rgba(0,0,0,0.6)'\r\n                          }}\r\n                        />\r\n\r\n                        {/* Professional Slider */}\r\n                        <div className=\"h-full flex items-center justify-center\">\r\n                          <Slider\r\n                            orientation=\"vertical\"\r\n                            value={[eqBands[index] || 0]}\r\n                            onValueChange={([value]) => onEQBandChange(index, value)}\r\n                            min={-12}\r\n                            max={12}\r\n                            step={0.5}\r\n                            className=\"h-28 w-5 group-hover:scale-110 transition-transform duration-200\"\r\n                          />\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Value Display with Color */}\r\n                      <div className={`text-[9px] text-center font-mono bg-gradient-to-r ${getFreqColor()} bg-clip-text text-transparent font-bold bg-black/80 rounded px-2 py-1`}>\r\n                        {eqBands[index] > 0 ? '+' : ''}{eqBands[index].toFixed(1)}\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n\r\n              {/* Professional EQ Branding */}\r\n              <div className=\"absolute bottom-2 right-3 text-[9px] font-mono bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent font-bold\">\r\n                SPECTRUM PRO EQ\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"text-center py-8 text-slate-400 dark:text-slate-300\">\r\n            <div className=\"text-lg mb-2\"></div>\r\n            <p className=\"text-white text-sm\">Enable Audio EQ to access the professional equalizer</p>\r\n          </div>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\enhancement\\RealtimeAudioPlayer.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":48,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1691,1694],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1691,1694],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'eqBands' and 'volume'. Either include them or remove the dependency array.","line":93,"column":6,"nodeType":"ArrayExpression","endLine":93,"endColumn":17,"suggestions":[{"desc":"Update the dependencies array to be: [audioFile, eqBands, volume]","fix":{"range":[3121,3132],"text":"[audioFile, eqBands, volume]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useState, useEffect } from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Slider } from '@/components/ui/slider';\r\nimport { Play, Pause, Volume2, VolumeX } from 'lucide-react';\r\nimport { useLanguage } from '@/contexts/LanguageContext';\r\n\r\ninterface RealtimeAudioPlayerProps {\r\n  audioFile: File | null;\r\n  eqBands: number[];\r\n  processingSettings: {\r\n    noiseReductionEnabled: boolean;\r\n    noiseReduction: number;\r\n    normalize: boolean;\r\n    normalizeLevel: number;\r\n    compressionEnabled: boolean;\r\n    compressionRatio: string;\r\n    compressionThreshold: number;\r\n    stereoWideningEnabled: boolean;\r\n    stereoWidening: number;\r\n  };\r\n}\r\n\r\nexport const RealtimeAudioPlayer: React.FC<RealtimeAudioPlayerProps> = ({\r\n  audioFile,\r\n  eqBands,\r\n  processingSettings\r\n}) => {\r\n  const { t } = useLanguage();\r\n  const audioContextRef = useRef<AudioContext | null>(null);\r\n  const sourceRef = useRef<AudioBufferSourceNode | null>(null);\r\n  const gainNodeRef = useRef<GainNode | null>(null);\r\n  const filtersRef = useRef<BiquadFilterNode[]>([]);\r\n  const analyserRef = useRef<AnalyserNode | null>(null);\r\n  \r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [volume, setVolume] = useState(80);\r\n  const [isMuted, setIsMuted] = useState(false);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [duration, setDuration] = useState(0);\r\n\r\n  // Initialize Web Audio API\r\n  useEffect(() => {\r\n    if (!audioFile) return;\r\n\r\n    const initAudio = async () => {\r\n      try {\r\n        const audioContext = new (window.AudioContext || (window as any).webkitAudioContext)();\r\n        audioContextRef.current = audioContext;\r\n\r\n        // Create audio nodes\r\n        const gainNode = audioContext.createGain();\r\n        gainNode.gain.value = volume / 100;\r\n        gainNodeRef.current = gainNode;\r\n\r\n        // Create 5-band EQ filters\r\n        const frequencies = [50, 145, 874, 5560, 17200]; // Hz\r\n        const filters: BiquadFilterNode[] = [];\r\n        \r\n        frequencies.forEach((freq, index) => {\r\n          const filter = audioContext.createBiquadFilter();\r\n          filter.type = 'peaking';\r\n          filter.frequency.value = freq;\r\n          filter.Q.value = 1.0;\r\n          filter.gain.value = eqBands[index] || 0;\r\n          filters.push(filter);\r\n        });\r\n        \r\n        filtersRef.current = filters;\r\n\r\n        // Create analyser for visualization\r\n        const analyser = audioContext.createAnalyser();\r\n        analyser.fftSize = 2048;\r\n        analyserRef.current = analyser;\r\n\r\n        // Load and decode audio file\r\n        const arrayBuffer = await audioFile.arrayBuffer();\r\n        const audioBuffer = await audioContext.decodeAudioData(arrayBuffer);\r\n        setDuration(audioBuffer.duration);\r\n\r\n      } catch (error) {\r\n        console.error('Error initializing audio:', error);\r\n      }\r\n    };\r\n\r\n    initAudio();\r\n\r\n    return () => {\r\n      if (audioContextRef.current) {\r\n        audioContextRef.current.close();\r\n      }\r\n    };\r\n  }, [audioFile]);\r\n\r\n  // Update EQ in real-time\r\n  useEffect(() => {\r\n    if (filtersRef.current.length > 0) {\r\n      filtersRef.current.forEach((filter, index) => {\r\n        filter.gain.value = eqBands[index] || 0;\r\n      });\r\n    }\r\n  }, [eqBands]);\r\n\r\n  // Update volume in real-time\r\n  useEffect(() => {\r\n    if (gainNodeRef.current) {\r\n      gainNodeRef.current.gain.value = isMuted ? 0 : volume / 100;\r\n    }\r\n  }, [volume, isMuted]);\r\n\r\n  const handlePlayPause = async () => {\r\n    if (!audioContextRef.current || !audioFile) return;\r\n\r\n    if (isPlaying) {\r\n      // Pause\r\n      if (sourceRef.current) {\r\n        sourceRef.current.stop();\r\n        sourceRef.current = null;\r\n      }\r\n      setIsPlaying(false);\r\n    } else {\r\n      // Play\r\n      try {\r\n        const audioContext = audioContextRef.current;\r\n        const arrayBuffer = await audioFile.arrayBuffer();\r\n        const audioBuffer = await audioContext.decodeAudioData(arrayBuffer);\r\n\r\n        const source = audioContext.createBufferSource();\r\n        source.buffer = audioBuffer;\r\n        sourceRef.current = source;\r\n\r\n        // Connect audio graph: source -> filters -> gain -> analyser -> destination\r\n        let previousNode: AudioNode = source;\r\n        \r\n        filtersRef.current.forEach(filter => {\r\n          previousNode.connect(filter);\r\n          previousNode = filter;\r\n        });\r\n        \r\n        if (gainNodeRef.current) {\r\n          previousNode.connect(gainNodeRef.current);\r\n          gainNodeRef.current.connect(audioContext.destination);\r\n          \r\n          if (analyserRef.current) {\r\n            gainNodeRef.current.connect(analyserRef.current);\r\n          }\r\n        }\r\n\r\n        source.start(0);\r\n        setIsPlaying(true);\r\n\r\n        source.onended = () => {\r\n          setIsPlaying(false);\r\n          setCurrentTime(0);\r\n        };\r\n\r\n      } catch (error) {\r\n        console.error('Error playing audio:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const formatTime = (seconds: number) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = Math.floor(seconds % 60);\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  if (!audioFile) {\r\n    return (\r\n      <Card className=\"bg-slate-900/90 dark:bg-black/90 border-slate-700 dark:border-slate-800\">\r\n        <CardHeader>\r\n          <CardTitle className=\"text-sm text-slate-400\">{t('player.noAudioLoaded')}</CardTitle>\r\n        </CardHeader>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Card className=\"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 border-2 border-cyan-600/50 shadow-xl\">\r\n      <CardHeader className=\"pb-3\">\r\n        <CardTitle className=\"flex items-center gap-2 text-white text-sm\">\r\n          <div className=\"w-3 h-3 bg-gradient-to-r from-cyan-400 to-blue-400 rounded-full animate-pulse\"></div>\r\n          {t('player.realtimePreview')}\r\n        </CardTitle>\r\n      </CardHeader>\r\n      <CardContent className=\"space-y-4\">\r\n        {/* Playback Controls */}\r\n        <div className=\"flex items-center gap-4\">\r\n          <Button\r\n            onClick={handlePlayPause}\r\n            size=\"sm\"\r\n            className=\"bg-cyan-600 hover:bg-cyan-700 text-white\"\r\n          >\r\n            {isPlaying ? <Pause className=\"h-4 w-4\" /> : <Play className=\"h-4 w-4\" />}\r\n          </Button>\r\n          \r\n          <div className=\"flex-1\">\r\n            <Slider\r\n              value={[currentTime]}\r\n              max={duration}\r\n              step={0.1}\r\n              className=\"w-full\"\r\n              disabled\r\n            />\r\n          </div>\r\n          \r\n          <span className=\"text-xs text-slate-300 font-mono min-w-[60px]\">\r\n            {formatTime(currentTime)} / {formatTime(duration)}\r\n          </span>\r\n        </div>\r\n\r\n        {/* Volume Control */}\r\n        <div className=\"flex items-center gap-3\">\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={() => setIsMuted(!isMuted)}\r\n            className=\"text-white\"\r\n          >\r\n            {isMuted ? <VolumeX className=\"h-4 w-4\" /> : <Volume2 className=\"h-4 w-4\" />}\r\n          </Button>\r\n          <Slider\r\n            value={[volume]}\r\n            onValueChange={([val]) => setVolume(val)}\r\n            max={100}\r\n            step={1}\r\n            className=\"w-full\"\r\n          />\r\n          <span className=\"text-xs text-slate-300 font-mono min-w-[40px]\">\r\n            {volume}%\r\n          </span>\r\n        </div>\r\n\r\n        {/* Real-time Status Indicator */}\r\n        <div className=\"text-[10px] text-cyan-400 text-center\">\r\n          {t('player.realtimeProcessing')}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\level\\LevelTrackList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\level\\LevelUpload.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\media-player\\AdvancedMediaPlayer.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'compressorSettings.attack', 'compressorSettings.ratio', 'compressorSettings.release', 'compressorSettings.threshold', 'delayTime', 'eqBands', and 'volume'. Either include them or remove the dependency array.","line":243,"column":6,"nodeType":"ArrayExpression","endLine":243,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [compressorSettings.attack, compressorSettings.ratio, compressorSettings.release, compressorSettings.threshold, delayTime, eqBands, volume]","fix":{"range":[7840,7842],"text":"[compressorSettings.attack, compressorSettings.ratio, compressorSettings.release, compressorSettings.threshold, delayTime, eqBands, volume]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'delayMix' and 'limiterEnabled'. Either include them or remove the dependency array.","line":335,"column":6,"nodeType":"ArrayExpression","endLine":335,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [currentFile, delayMix, limiterEnabled]","fix":{"range":[11138,11151],"text":"[currentFile, delayMix, limiterEnabled]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect, useCallback } from \"react\";\r\nimport { Card } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Slider } from \"@/components/ui/slider\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport {\r\n  Play,\r\n  Pause,\r\n  SkipBack,\r\n  SkipForward,\r\n  Volume2,\r\n  Repeat,\r\n  Upload,\r\n  Trash2,\r\n} from \"lucide-react\";\r\nimport WaveSurfer from \"wavesurfer.js\";\r\nimport {\r\n  getAudioContext,\r\n  resumeAudioContext,\r\n} from \"@/utils/audioContextManager\";\r\nimport { AudioFile } from \"@/types/audio\";\r\nimport { TenBandEqualizer, EQBand } from \"./TenBandEqualizer\";\r\nimport {\r\n  DynamicsCompressorControls,\r\n  CompressorSettings,\r\n} from \"./DynamicsCompressorControls\";\r\nimport { AudioVisualizer } from \"./AudioVisualizer\";\r\nimport { FunSpectrumVisualizer } from \"./FunSpectrumVisualizer\";\r\nimport { PlaylistPanel } from \"./PlaylistPanel\";\r\nimport { toast } from \"sonner\";\r\nimport { useDropzone } from \"react-dropzone\";\r\n\r\ninterface AdvancedMediaPlayerProps {\r\n  files: AudioFile[];\r\n  onFilesAdded?: (files: AudioFile[]) => void;\r\n  onFileDelete?: (fileId: string) => void;\r\n  autoPlayFile?: AudioFile | null;\r\n  onAutoPlayComplete?: () => void;\r\n}\r\n\r\nconst INITIAL_EQ_BANDS: EQBand[] = [\r\n  { frequency: 64, gain: 0 },\r\n  { frequency: 125, gain: 0 },\r\n  { frequency: 250, gain: 0 },\r\n  { frequency: 500, gain: 0 },\r\n  { frequency: 1000, gain: 0 },\r\n  { frequency: 2000, gain: 0 },\r\n  { frequency: 4000, gain: 0 },\r\n  { frequency: 8000, gain: 0 },\r\n]; // Removed 32Hz and 16000Hz as they don't affect audio\r\n\r\nconst INITIAL_COMPRESSOR: CompressorSettings = {\r\n  threshold: -1.5, // Within 0 to -3dB range\r\n  ratio: 2.5, // Within 1 to 4:1 range\r\n  attack: 0.001, // 1ms - within 0.1ms to 3ms range\r\n  release: 0.0015, // 1.5ms - within 0ms to 3ms range\r\n};\r\n\r\nexport const AdvancedMediaPlayer: React.FC<AdvancedMediaPlayerProps> = ({\r\n  files,\r\n  onFilesAdded,\r\n  onFileDelete,\r\n  autoPlayFile,\r\n  onAutoPlayComplete,\r\n}) => {\r\n  const [currentFile, setCurrentFile] = useState<AudioFile | null>(null);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [duration, setDuration] = useState(0);\r\n  const [volume, setVolume] = useState(0.8);\r\n  const [loop, setLoop] = useState(false);\r\n\r\n  // Advanced controls\r\n  const [pitchShift, setPitchShift] = useState(0); // -12 to +12 semitones\r\n  const [tempo, setTempo] = useState(100); // 50% to 150%\r\n  const [reverbMix, setReverbMix] = useState(0); // 0-100%\r\n  const [delayMix, setDelayMix] = useState(0); // 0-100%\r\n  const [delayTime, setDelayTime] = useState(0.5); // seconds\r\n  const [limiterEnabled, setLimiterEnabled] = useState(true);\r\n\r\n  // Real-time meters\r\n  const [lufsIntegrated, setLufsIntegrated] = useState(0);\r\n  const [lufsMomentary, setLufsMomentary] = useState(0);\r\n  const [truePeak, setTruePeak] = useState(0);\r\n  const [dynamicRange, setDynamicRange] = useState(0);\r\n  const [phaseCorrelation, setPhaseCorrelation] = useState(0);\r\n\r\n  const [eqBands, setEqBands] = useState<EQBand[]>(INITIAL_EQ_BANDS);\r\n  const [compressorSettings, setCompressorSettings] =\r\n    useState<CompressorSettings>(INITIAL_COMPRESSOR);\r\n  const [gainReduction, setGainReduction] = useState(0);\r\n\r\n  const waveformRef = useRef<HTMLDivElement>(null);\r\n  const wavesurferRef = useRef<WaveSurfer | null>(null);\r\n  const eqFiltersRef = useRef<BiquadFilterNode[]>([]);\r\n  const compressorNodeRef = useRef<DynamicsCompressorNode | null>(null);\r\n  const analyserNodeRef = useRef<AnalyserNode | null>(null);\r\n  const gainNodeRef = useRef<GainNode | null>(null);\r\n  const limiterNodeRef = useRef<DynamicsCompressorNode | null>(null);\r\n  const reverbNodeRef = useRef<ConvolverNode | null>(null);\r\n  const delayNodeRef = useRef<DelayNode | null>(null);\r\n  const audioSourceRef = useRef<MediaElementAudioSourceNode | null>(null);\r\n\r\n  // Initialize WaveSurfer\r\n  useEffect(() => {\r\n    if (!waveformRef.current) return;\r\n\r\n    const ws = WaveSurfer.create({\r\n      container: waveformRef.current,\r\n      waveColor: \"hsl(var(--primary))\",\r\n      progressColor: \"hsl(var(--accent))\",\r\n      cursorColor: \"hsl(var(--accent))\",\r\n      barWidth: 2,\r\n      barRadius: 3,\r\n      cursorWidth: 2,\r\n      height: 100,\r\n      barGap: 2,\r\n    });\r\n\r\n    wavesurferRef.current = ws;\r\n\r\n    ws.on(\"ready\", () => {\r\n      setDuration(ws.getDuration());\r\n    });\r\n\r\n    ws.on(\"audioprocess\", () => {\r\n      setCurrentTime(ws.getCurrentTime());\r\n    });\r\n\r\n    ws.on(\"finish\", () => {\r\n      if (loop) {\r\n        ws.play();\r\n      } else {\r\n        setIsPlaying(false);\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      ws.destroy();\r\n    };\r\n  }, [loop]);\r\n\r\n  // File upload handler\r\n  const onDrop = useCallback(\r\n    async (acceptedFiles: File[]) => {\r\n      const newAudioFiles: AudioFile[] = acceptedFiles.map((file) => ({\r\n        id: `${Date.now()}-${file.name}`,\r\n        name: file.name,\r\n        size: file.size,\r\n        type: file.type,\r\n        originalFile: file,\r\n        originalUrl: URL.createObjectURL(file),\r\n        status: \"uploaded\" as const,\r\n        fileType: file.name.split(\".\").pop()?.toLowerCase() as\r\n          | \"mp3\"\r\n          | \"wav\"\r\n          | \"flac\"\r\n          | \"unsupported\",\r\n      }));\r\n\r\n      if (onFilesAdded) {\r\n        onFilesAdded(newAudioFiles);\r\n      }\r\n\r\n      toast.success(`Added ${acceptedFiles.length} file(s) to player`);\r\n    },\r\n    [onFilesAdded]\r\n  );\r\n\r\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\r\n    onDrop,\r\n    accept: {\r\n      \"audio/*\": [\".mp3\", \".wav\", \".flac\", \".m4a\", \".ogg\"],\r\n    },\r\n    multiple: true,\r\n  });\r\n\r\n  // Initialize Web Audio API nodes\r\n  useEffect(() => {\r\n    const audioContext = getAudioContext();\r\n    if (!audioContext) return;\r\n\r\n    // Create analyser\r\n    if (!analyserNodeRef.current) {\r\n      const analyser = audioContext.createAnalyser();\r\n      analyser.fftSize = 2048;\r\n      analyserNodeRef.current = analyser;\r\n    }\r\n\r\n    // Create gain node\r\n    if (!gainNodeRef.current) {\r\n      const gain = audioContext.createGain();\r\n      gain.gain.value = volume;\r\n      gainNodeRef.current = gain;\r\n    }\r\n\r\n    // Create compressor with DRC constraints\r\n    if (!compressorNodeRef.current) {\r\n      const compressor = audioContext.createDynamicsCompressor();\r\n      compressor.threshold.value = compressorSettings.threshold;\r\n      compressor.ratio.value = compressorSettings.ratio;\r\n      compressor.attack.value = compressorSettings.attack;\r\n      compressor.release.value = compressorSettings.release;\r\n      compressor.knee.value = 0; // Knee removed - hard knee compression\r\n      compressorNodeRef.current = compressor;\r\n    }\r\n\r\n    // Create master limiter\r\n    if (!limiterNodeRef.current) {\r\n      const limiter = audioContext.createDynamicsCompressor();\r\n      limiter.threshold.value = -0.5;\r\n      limiter.ratio.value = 20;\r\n      limiter.attack.value = 0.001;\r\n      limiter.release.value = 0.1;\r\n      limiter.knee.value = 0;\r\n      limiterNodeRef.current = limiter;\r\n    }\r\n\r\n    // Create delay\r\n    if (!delayNodeRef.current) {\r\n      const delay = audioContext.createDelay(5);\r\n      delay.delayTime.value = delayTime;\r\n      delayNodeRef.current = delay;\r\n    }\r\n\r\n    // Create EQ filters\r\n    if (eqFiltersRef.current.length === 0) {\r\n      eqBands.forEach((band, index) => {\r\n        const filter = audioContext.createBiquadFilter();\r\n        if (index === 0) {\r\n          filter.type = \"lowshelf\";\r\n        } else if (index === eqBands.length - 1) {\r\n          filter.type = \"highshelf\";\r\n        } else {\r\n          filter.type = \"peaking\";\r\n        }\r\n        filter.frequency.value = band.frequency;\r\n        filter.gain.value = band.gain;\r\n        filter.Q.value = 1.0;\r\n        eqFiltersRef.current.push(filter);\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  // Auto-play file when passed from track list\r\n  useEffect(() => {\r\n    if (autoPlayFile && autoPlayFile.id !== currentFile?.id) {\r\n      setCurrentFile(autoPlayFile);\r\n      if (onAutoPlayComplete) {\r\n        onAutoPlayComplete();\r\n      }\r\n    }\r\n  }, [autoPlayFile, currentFile, onAutoPlayComplete]);\r\n\r\n  // Load file into WaveSurfer\r\n  useEffect(() => {\r\n    if (!currentFile || !wavesurferRef.current) return;\r\n\r\n    const loadAudio = async () => {\r\n      try {\r\n        const url = currentFile.enhancedUrl || currentFile.originalUrl;\r\n        if (!url && currentFile.originalFile) {\r\n          const blob = currentFile.originalFile;\r\n          const objectUrl = URL.createObjectURL(blob);\r\n          await wavesurferRef.current!.load(objectUrl);\r\n        } else if (url) {\r\n          await wavesurferRef.current!.load(url);\r\n        }\r\n\r\n        // Connect Web Audio API nodes\r\n        const audioContext = getAudioContext();\r\n        if (audioContext && wavesurferRef.current) {\r\n          const backend = wavesurferRef.current.getMediaElement();\r\n          if (backend && !audioSourceRef.current) {\r\n            try {\r\n              const source = audioContext.createMediaElementSource(backend);\r\n              audioSourceRef.current = source;\r\n\r\n              // Build audio graph: source -> EQ -> compressor -> delay -> gain -> limiter -> analyser -> destination\r\n              let currentNode: AudioNode = source;\r\n\r\n              // EQ chain\r\n              eqFiltersRef.current.forEach((filter) => {\r\n                currentNode.connect(filter);\r\n                currentNode = filter;\r\n              });\r\n\r\n              // Compressor\r\n              if (compressorNodeRef.current) {\r\n                currentNode.connect(compressorNodeRef.current);\r\n                currentNode = compressorNodeRef.current;\r\n              }\r\n\r\n              // Delay (with wet/dry mix would require more nodes)\r\n              if (delayNodeRef.current && delayMix > 0) {\r\n                currentNode.connect(delayNodeRef.current);\r\n                currentNode = delayNodeRef.current;\r\n              }\r\n\r\n              // Gain\r\n              if (gainNodeRef.current) {\r\n                currentNode.connect(gainNodeRef.current);\r\n                currentNode = gainNodeRef.current;\r\n              }\r\n\r\n              // Master Limiter\r\n              if (limiterNodeRef.current && limiterEnabled) {\r\n                gainNodeRef.current!.connect(limiterNodeRef.current);\r\n                currentNode = limiterNodeRef.current;\r\n              }\r\n\r\n              // Analyser\r\n              if (analyserNodeRef.current) {\r\n                currentNode.connect(analyserNodeRef.current);\r\n                analyserNodeRef.current.connect(audioContext.destination);\r\n              } else {\r\n                currentNode.connect(audioContext.destination);\r\n              }\r\n\r\n              console.log(\" Advanced audio graph connected\");\r\n            } catch (error) {\r\n              console.error(\"Error connecting audio graph:\", error);\r\n            }\r\n          }\r\n        }\r\n\r\n        toast.success(`Loaded: ${currentFile.name}`);\r\n      } catch (error) {\r\n        console.error(\"Failed to load audio:\", error);\r\n        toast.error(\"Failed to load audio file\");\r\n      }\r\n    };\r\n\r\n    loadAudio();\r\n  }, [currentFile]);\r\n\r\n  // Update EQ in real-time\r\n  useEffect(() => {\r\n    const audioContext = getAudioContext();\r\n    if (!audioContext) return;\r\n\r\n    eqFiltersRef.current.forEach((filter, index) => {\r\n      if (eqBands[index]) {\r\n        filter.gain.setValueAtTime(\r\n          eqBands[index].gain,\r\n          audioContext.currentTime\r\n        );\r\n      }\r\n    });\r\n  }, [eqBands]);\r\n\r\n  // Update compressor in real-time with DRC constraints\r\n  useEffect(() => {\r\n    if (!compressorNodeRef.current) return;\r\n    const audioContext = getAudioContext();\r\n    if (!audioContext) return;\r\n\r\n    const comp = compressorNodeRef.current;\r\n    comp.threshold.setValueAtTime(\r\n      compressorSettings.threshold,\r\n      audioContext.currentTime\r\n    );\r\n    comp.ratio.setValueAtTime(\r\n      compressorSettings.ratio,\r\n      audioContext.currentTime\r\n    );\r\n    comp.attack.setValueAtTime(\r\n      compressorSettings.attack,\r\n      audioContext.currentTime\r\n    );\r\n    comp.release.setValueAtTime(\r\n      compressorSettings.release,\r\n      audioContext.currentTime\r\n    );\r\n    comp.knee.setValueAtTime(0, audioContext.currentTime); // Always 0 - hard knee\r\n  }, [compressorSettings]);\r\n\r\n  // Update delay time\r\n  useEffect(() => {\r\n    if (!delayNodeRef.current) return;\r\n    const audioContext = getAudioContext();\r\n    if (!audioContext) return;\r\n\r\n    delayNodeRef.current.delayTime.setValueAtTime(\r\n      delayTime,\r\n      audioContext.currentTime\r\n    );\r\n  }, [delayTime]);\r\n\r\n  // Update volume\r\n  useEffect(() => {\r\n    if (!gainNodeRef.current) return;\r\n    const audioContext = getAudioContext();\r\n    if (!audioContext) return;\r\n\r\n    gainNodeRef.current.gain.setValueAtTime(volume, audioContext.currentTime);\r\n  }, [volume]);\r\n\r\n  // Monitor gain reduction and meters\r\n  useEffect(() => {\r\n    if (!compressorNodeRef.current || !isPlaying) return;\r\n\r\n    const interval = setInterval(() => {\r\n      if (compressorNodeRef.current) {\r\n        setGainReduction(compressorNodeRef.current.reduction);\r\n      }\r\n\r\n      // Update real-time meters (simplified - would need proper metering library for accurate LUFS)\r\n      if (analyserNodeRef.current) {\r\n        const bufferLength = analyserNodeRef.current.frequencyBinCount;\r\n        const dataArray = new Uint8Array(bufferLength);\r\n        analyserNodeRef.current.getByteTimeDomainData(dataArray);\r\n\r\n        // Calculate peak\r\n        let peak = 0;\r\n        for (let i = 0; i < bufferLength; i++) {\r\n          const value = Math.abs(dataArray[i] - 128) / 128;\r\n          if (value > peak) peak = value;\r\n        }\r\n        setTruePeak(20 * Math.log10(peak || 0.0001));\r\n\r\n        // Simplified loudness estimation (not true LUFS)\r\n        const rms = Math.sqrt(\r\n          dataArray.reduce(\r\n            (acc, val) => acc + Math.pow((val - 128) / 128, 2),\r\n            0\r\n          ) / bufferLength\r\n        );\r\n        setLufsMomentary(-23 + 20 * Math.log10(rms || 0.0001));\r\n      }\r\n    }, 100);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [isPlaying]);\r\n\r\n  const handlePlayPause = async () => {\r\n    if (!wavesurferRef.current) return;\r\n\r\n    try {\r\n      await resumeAudioContext();\r\n      if (isPlaying) {\r\n        wavesurferRef.current.pause();\r\n        setIsPlaying(false);\r\n      } else {\r\n        await wavesurferRef.current.play();\r\n        setIsPlaying(true);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Playback error:\", error);\r\n      toast.error(\"Playback failed\");\r\n    }\r\n  };\r\n\r\n  const handleDeleteFile = () => {\r\n    if (!currentFile) return;\r\n    if (onFileDelete) {\r\n      onFileDelete(currentFile.id);\r\n    }\r\n    setCurrentFile(null);\r\n    setIsPlaying(false);\r\n    toast.success(`Deleted: ${currentFile.name}`);\r\n  };\r\n\r\n  const handleSkipBackward = () => {\r\n    if (wavesurferRef.current) {\r\n      const newTime = Math.max(0, currentTime - 10);\r\n      wavesurferRef.current.seekTo(newTime / duration);\r\n    }\r\n  };\r\n\r\n  const handleSkipForward = () => {\r\n    if (wavesurferRef.current) {\r\n      const newTime = Math.min(duration, currentTime + 10);\r\n      wavesurferRef.current.seekTo(newTime / duration);\r\n    }\r\n  };\r\n\r\n  const handleEQBandChange = (index: number, gain: number) => {\r\n    const newBands = [...eqBands];\r\n    newBands[index] = { ...newBands[index], gain };\r\n    setEqBands(newBands);\r\n  };\r\n\r\n  const handleEQReset = () => {\r\n    setEqBands(INITIAL_EQ_BANDS);\r\n    toast.success(\"EQ reset to flat\");\r\n  };\r\n\r\n  const formatTime = (seconds: number) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = Math.floor(seconds % 60);\r\n    return `${mins}:${secs.toString().padStart(2, \"0\")}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6 p-6\">\r\n      {/* Upload Zone */}\r\n      <Card className=\"bg-gradient-to-br from-background to-muted border-border\">\r\n        <div\r\n          {...getRootProps()}\r\n          className={`p-8 border-2 border-dashed rounded-lg cursor-pointer transition-colors ${\r\n            isDragActive\r\n              ? \"border-primary bg-primary/10\"\r\n              : \"border-muted-foreground/20 hover:border-primary/50 hover:bg-muted/50\"\r\n          }`}\r\n        >\r\n          <input {...getInputProps()} />\r\n          <div className=\"flex flex-col items-center justify-center gap-4 text-center\">\r\n            <Upload className=\"h-12 w-12 text-primary\" />\r\n            <div>\r\n              <p className=\"text-lg font-semibold mb-2 text-primary\">\r\n                {isDragActive\r\n                  ? \"Drop files here...\"\r\n                  : \"Drop audio files here or click to browse\"}\r\n              </p>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                Supports MP3, WAV, FLAC, M4A, OGG\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        {/* Main Player Section */}\r\n        <div className=\"lg:col-span-2 space-y-6\">\r\n          {/* Waveform Player */}\r\n          <Card className=\"bg-card border-border p-6\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h3 className=\"text-xl font-bold flex items-center gap-2 text-primary\">\r\n                <span className=\"text-2xl\"></span>\r\n                {currentFile ? currentFile.name : \"No track loaded\"}\r\n              </h3>\r\n              {currentFile && (\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"icon\"\r\n                  onClick={handleDeleteFile}\r\n                  className=\"border-destructive text-destructive hover:bg-destructive/10\"\r\n                >\r\n                  <Trash2 className=\"h-4 w-4\" />\r\n                </Button>\r\n              )}\r\n            </div>\r\n\r\n            {/* Waveform */}\r\n            <div\r\n              ref={waveformRef}\r\n              className=\"mb-6 rounded-lg overflow-hidden border border-border\"\r\n            />\r\n\r\n            {/* Timeline */}\r\n            <div className=\"flex items-center justify-between text-sm text-muted-foreground mb-4\">\r\n              <span className=\"font-mono\">{formatTime(currentTime)}</span>\r\n              <span className=\"font-mono\">{formatTime(duration)}</span>\r\n            </div>\r\n\r\n            {/* Playback Controls */}\r\n            <div className=\"flex items-center justify-center gap-4 mb-6\">\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"icon\"\r\n                onClick={handleSkipBackward}\r\n                disabled={!currentFile}\r\n              >\r\n                <SkipBack className=\"h-5 w-5\" />\r\n              </Button>\r\n\r\n              <Button\r\n                variant=\"default\"\r\n                size=\"icon\"\r\n                onClick={handlePlayPause}\r\n                disabled={!currentFile}\r\n                className=\"h-14 w-14\"\r\n              >\r\n                {isPlaying ? (\r\n                  <Pause className=\"h-6 w-6\" />\r\n                ) : (\r\n                  <Play className=\"h-6 w-6 ml-1\" />\r\n                )}\r\n              </Button>\r\n\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"icon\"\r\n                onClick={handleSkipForward}\r\n                disabled={!currentFile}\r\n              >\r\n                <SkipForward className=\"h-5 w-5\" />\r\n              </Button>\r\n\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"icon\"\r\n                onClick={() => setLoop(!loop)}\r\n                className={loop ? \"bg-primary text-primary-foreground\" : \"\"}\r\n              >\r\n                <Repeat className=\"h-5 w-5\" />\r\n              </Button>\r\n            </div>\r\n\r\n            {/* Volume Control */}\r\n            <div className=\"flex items-center gap-4\">\r\n              <Volume2 className=\"h-5 w-5 text-primary\" />\r\n              <Slider\r\n                value={[volume]}\r\n                min={0}\r\n                max={1}\r\n                step={0.01}\r\n                onValueChange={(v) => setVolume(v[0])}\r\n                className=\"flex-1\"\r\n              />\r\n              <span className=\"text-sm text-muted-foreground font-mono min-w-[50px] text-right\">\r\n                {Math.round(volume * 100)}%\r\n              </span>\r\n            </div>\r\n          </Card>\r\n\r\n          {/* Advanced Controls */}\r\n          <Card className=\"bg-card border-border p-6\">\r\n            <h3 className=\"text-lg font-bold mb-4 text-primary\">\r\n              Advanced Controls\r\n            </h3>\r\n\r\n            <div className=\"space-y-4\">\r\n              {/* Pitch Shift */}\r\n              <div>\r\n                <div className=\"flex justify-between items-center mb-2\">\r\n                  <Label>Pitch Shift</Label>\r\n                  <span className=\"text-sm text-muted-foreground\">\r\n                    {pitchShift > 0 ? \"+\" : \"\"}\r\n                    {pitchShift} semitones\r\n                  </span>\r\n                </div>\r\n                <Slider\r\n                  value={[pitchShift]}\r\n                  min={-12}\r\n                  max={12}\r\n                  step={1}\r\n                  onValueChange={(v) => setPitchShift(v[0])}\r\n                />\r\n                <p className=\"text-xs text-muted-foreground mt-1\">\r\n                  Note: Requires additional processing library\r\n                </p>\r\n              </div>\r\n\r\n              {/* Tempo */}\r\n              <div>\r\n                <div className=\"flex justify-between items-center mb-2\">\r\n                  <Label>Tempo / Time-Stretch</Label>\r\n                  <span className=\"text-sm text-muted-foreground\">\r\n                    {tempo}%\r\n                  </span>\r\n                </div>\r\n                <Slider\r\n                  value={[tempo]}\r\n                  min={50}\r\n                  max={150}\r\n                  step={1}\r\n                  onValueChange={(v) => setTempo(v[0])}\r\n                />\r\n                <p className=\"text-xs text-muted-foreground mt-1\">\r\n                  Note: Requires additional processing library\r\n                </p>\r\n              </div>\r\n\r\n              {/* Reverb Mix */}\r\n              <div>\r\n                <div className=\"flex justify-between items-center mb-2\">\r\n                  <Label>Reverb Mix</Label>\r\n                  <span className=\"text-sm text-muted-foreground\">\r\n                    {reverbMix}%\r\n                  </span>\r\n                </div>\r\n                <Slider\r\n                  value={[reverbMix]}\r\n                  min={0}\r\n                  max={100}\r\n                  step={1}\r\n                  onValueChange={(v) => setReverbMix(v[0])}\r\n                />\r\n              </div>\r\n\r\n              {/* Delay Mix */}\r\n              <div>\r\n                <div className=\"flex justify-between items-center mb-2\">\r\n                  <Label>Delay Mix</Label>\r\n                  <span className=\"text-sm text-muted-foreground\">\r\n                    {delayMix}%\r\n                  </span>\r\n                </div>\r\n                <Slider\r\n                  value={[delayMix]}\r\n                  min={0}\r\n                  max={100}\r\n                  step={1}\r\n                  onValueChange={(v) => setDelayMix(v[0])}\r\n                />\r\n              </div>\r\n\r\n              {/* Delay Time */}\r\n              <div>\r\n                <div className=\"flex justify-between items-center mb-2\">\r\n                  <Label>Delay Time</Label>\r\n                  <span className=\"text-sm text-muted-foreground\">\r\n                    {delayTime.toFixed(2)}s\r\n                  </span>\r\n                </div>\r\n                <Slider\r\n                  value={[delayTime]}\r\n                  min={0.1}\r\n                  max={2}\r\n                  step={0.1}\r\n                  onValueChange={(v) => setDelayTime(v[0])}\r\n                />\r\n              </div>\r\n\r\n              {/* Master Limiter */}\r\n              <div className=\"flex items-center justify-between\">\r\n                <Label>Master Limiter</Label>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => setLimiterEnabled(!limiterEnabled)}\r\n                  className={\r\n                    limiterEnabled ? \"bg-primary text-primary-foreground\" : \"\"\r\n                  }\r\n                >\r\n                  {limiterEnabled ? \"ON\" : \"OFF\"}\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </Card>\r\n\r\n          {/* Real-Time Meters */}\r\n          <Card className=\"bg-card border-border p-6\">\r\n            <h3 className=\"text-lg font-bold mb-4 text-primary\">\r\n              Real-Time Analysis\r\n            </h3>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label>LUFS Momentary</Label>\r\n                <div className=\"text-2xl font-bold text-primary\">\r\n                  {lufsMomentary.toFixed(1)}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label>True Peak</Label>\r\n                <div className=\"text-2xl font-bold text-primary\">\r\n                  {truePeak.toFixed(1)} dB\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label>Dynamic Range</Label>\r\n                <div className=\"text-2xl font-bold text-primary\">\r\n                  {dynamicRange.toFixed(1)} LU\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label>Phase Correlation</Label>\r\n                <div className=\"text-2xl font-bold text-primary\">\r\n                  {phaseCorrelation.toFixed(2)}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <p className=\"text-xs text-muted-foreground mt-4\">\r\n              Note: These are simplified estimates. For professional metering,\r\n              use dedicated tools.\r\n            </p>\r\n          </Card>\r\n\r\n          {/* EQ */}\r\n          <TenBandEqualizer\r\n            bands={eqBands}\r\n            onBandChange={handleEQBandChange}\r\n            onReset={handleEQReset}\r\n          />\r\n\r\n          {/* Compressor */}\r\n          <DynamicsCompressorControls\r\n            settings={compressorSettings}\r\n            gainReduction={gainReduction}\r\n            onSettingsChange={(settings) =>\r\n              setCompressorSettings({ ...compressorSettings, ...settings })\r\n            }\r\n          />\r\n        </div>\r\n\r\n        {/* Right Sidebar */}\r\n        <div className=\"space-y-6\">\r\n          {/* Visualizer */}\r\n          <AudioVisualizer\r\n            analyserNode={analyserNodeRef.current}\r\n            isPlaying={isPlaying}\r\n          />\r\n\r\n          {/* Playlist */}\r\n          <PlaylistPanel\r\n            files={files}\r\n            currentFileId={currentFile?.id || null}\r\n            onFileSelect={setCurrentFile}\r\n          />\r\n\r\n          {/* Fun Spectrum Visualizer */}\r\n          <FunSpectrumVisualizer\r\n            analyserNode={analyserNodeRef.current}\r\n            isPlaying={isPlaying}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\media-player\\AudioVisualizer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\media-player\\DynamicsCompressorControls.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\media-player\\FunSpectrumVisualizer.tsx","messages":[{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":67,"column":11,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":67,"endColumn":31,"suggestions":[{"messageId":"addBrackets","fix":{"range":[2297,3437],"text":"{ const barCount = 64;\r\n          const barWidth = canvas.width / barCount;\r\n          for (let i = 0; i < barCount; i++) {\r\n            const dataIndex = Math.floor((i / barCount) * bufferLength);\r\n            const barHeight =\r\n              (dataArray[dataIndex] / 255) * canvas.height * 0.8;\r\n            const x = i * barWidth;\r\n\r\n            // Color based on frequency and time\r\n            const hue = (i / barCount) * 360 + timeRef.current * 50;\r\n            const gradient = ctx.createLinearGradient(\r\n              x,\r\n              canvas.height - barHeight,\r\n              x,\r\n              canvas.height\r\n            );\r\n            gradient.addColorStop(0, `hsl(${hue}, 100%, 60%)`);\r\n            gradient.addColorStop(1, colors[2]);\r\n\r\n            ctx.fillStyle = gradient;\r\n            ctx.fillRect(x, canvas.height - barHeight, barWidth - 2, barHeight);\r\n\r\n            // Add glow effect\r\n            ctx.shadowBlur = 10;\r\n            ctx.shadowColor = `hsl(${hue}, 100%, 60%)`;\r\n            ctx.fillRect(x, canvas.height - barHeight, barWidth - 2, barHeight);\r\n            ctx.shadowBlur = 0;\r\n          }\r\n          break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":68,"column":11,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":68,"endColumn":52,"suggestions":[{"messageId":"addBrackets","fix":{"range":[2297,3437],"text":"{ const barCount = 64;\r\n          const barWidth = canvas.width / barCount;\r\n          for (let i = 0; i < barCount; i++) {\r\n            const dataIndex = Math.floor((i / barCount) * bufferLength);\r\n            const barHeight =\r\n              (dataArray[dataIndex] / 255) * canvas.height * 0.8;\r\n            const x = i * barWidth;\r\n\r\n            // Color based on frequency and time\r\n            const hue = (i / barCount) * 360 + timeRef.current * 50;\r\n            const gradient = ctx.createLinearGradient(\r\n              x,\r\n              canvas.height - barHeight,\r\n              x,\r\n              canvas.height\r\n            );\r\n            gradient.addColorStop(0, `hsl(${hue}, 100%, 60%)`);\r\n            gradient.addColorStop(1, colors[2]);\r\n\r\n            ctx.fillStyle = gradient;\r\n            ctx.fillRect(x, canvas.height - barHeight, barWidth - 2, barHeight);\r\n\r\n            // Add glow effect\r\n            ctx.shadowBlur = 10;\r\n            ctx.shadowColor = `hsl(${hue}, 100%, 60%)`;\r\n            ctx.fillRect(x, canvas.height - barHeight, barWidth - 2, barHeight);\r\n            ctx.shadowBlur = 0;\r\n          }\r\n          break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":103,"column":11,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":103,"endColumn":58,"suggestions":[{"messageId":"addBrackets","fix":{"range":[3503,4534],"text":"{ ctx.strokeStyle = colors[0];\r\n          ctx.lineWidth = 3;\r\n          ctx.beginPath();\r\n\r\n          const sliceWidth = canvas.width / bufferLength;\r\n          let x = 0;\r\n\r\n          for (let i = 0; i < bufferLength; i++) {\r\n            const v = timeDataArray[i] / 128.0;\r\n            const y = (v * canvas.height) / 2;\r\n\r\n            if (i === 0) {\r\n              ctx.moveTo(x, y);\r\n            } else {\r\n              ctx.lineTo(x, y);\r\n            }\r\n\r\n            x += sliceWidth;\r\n          }\r\n\r\n          ctx.stroke();\r\n\r\n          // Add mirror effect\r\n          ctx.strokeStyle = colors[1];\r\n          ctx.beginPath();\r\n          x = 0;\r\n          for (let i = 0; i < bufferLength; i++) {\r\n            const v = timeDataArray[i] / 128.0;\r\n            const y = canvas.height - (v * canvas.height) / 2;\r\n\r\n            if (i === 0) {\r\n              ctx.moveTo(x, y);\r\n            } else {\r\n              ctx.lineTo(x, y);\r\n            }\r\n\r\n            x += sliceWidth;\r\n          }\r\n          ctx.stroke();\r\n          break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":104,"column":11,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":104,"endColumn":21,"suggestions":[{"messageId":"addBrackets","fix":{"range":[3503,4534],"text":"{ ctx.strokeStyle = colors[0];\r\n          ctx.lineWidth = 3;\r\n          ctx.beginPath();\r\n\r\n          const sliceWidth = canvas.width / bufferLength;\r\n          let x = 0;\r\n\r\n          for (let i = 0; i < bufferLength; i++) {\r\n            const v = timeDataArray[i] / 128.0;\r\n            const y = (v * canvas.height) / 2;\r\n\r\n            if (i === 0) {\r\n              ctx.moveTo(x, y);\r\n            } else {\r\n              ctx.lineTo(x, y);\r\n            }\r\n\r\n            x += sliceWidth;\r\n          }\r\n\r\n          ctx.stroke();\r\n\r\n          // Add mirror effect\r\n          ctx.strokeStyle = colors[1];\r\n          ctx.beginPath();\r\n          x = 0;\r\n          for (let i = 0; i < bufferLength; i++) {\r\n            const v = timeDataArray[i] / 128.0;\r\n            const y = canvas.height - (v * canvas.height) / 2;\r\n\r\n            if (i === 0) {\r\n              ctx.moveTo(x, y);\r\n            } else {\r\n              ctx.lineTo(x, y);\r\n            }\r\n\r\n            x += sliceWidth;\r\n          }\r\n          ctx.stroke();\r\n          break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":142,"column":11,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":142,"endColumn":70,"suggestions":[{"messageId":"addBrackets","fix":{"range":[4606,5558],"text":"{ const radius = Math.min(canvas.width, canvas.height) * 0.3;\r\n          const angleStep = (Math.PI * 2) / bufferLength;\r\n\r\n          for (let i = 0; i < bufferLength; i += 2) {\r\n            const angle = i * angleStep + timeRef.current;\r\n            const dataValue = dataArray[i] / 255;\r\n            const barLength = dataValue * radius * 0.8;\r\n\r\n            const x1 = centerX + Math.cos(angle) * radius;\r\n            const y1 = centerY + Math.sin(angle) * radius;\r\n            const x2 = centerX + Math.cos(angle) * (radius + barLength);\r\n            const y2 = centerY + Math.sin(angle) * (radius + barLength);\r\n\r\n            const hue = (i / bufferLength) * 360 + timeRef.current * 30;\r\n            ctx.strokeStyle = `hsl(${hue}, 100%, ${50 + dataValue * 50}%)`;\r\n            ctx.lineWidth = 2;\r\n            ctx.beginPath();\r\n            ctx.moveTo(x1, y1);\r\n            ctx.lineTo(x2, y2);\r\n            ctx.stroke();\r\n          }\r\n          break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":143,"column":11,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":143,"endColumn":58,"suggestions":[{"messageId":"addBrackets","fix":{"range":[4606,5558],"text":"{ const radius = Math.min(canvas.width, canvas.height) * 0.3;\r\n          const angleStep = (Math.PI * 2) / bufferLength;\r\n\r\n          for (let i = 0; i < bufferLength; i += 2) {\r\n            const angle = i * angleStep + timeRef.current;\r\n            const dataValue = dataArray[i] / 255;\r\n            const barLength = dataValue * radius * 0.8;\r\n\r\n            const x1 = centerX + Math.cos(angle) * radius;\r\n            const y1 = centerY + Math.sin(angle) * radius;\r\n            const x2 = centerX + Math.cos(angle) * (radius + barLength);\r\n            const y2 = centerY + Math.sin(angle) * (radius + barLength);\r\n\r\n            const hue = (i / bufferLength) * 360 + timeRef.current * 30;\r\n            ctx.strokeStyle = `hsl(${hue}, 100%, ${50 + dataValue * 50}%)`;\r\n            ctx.lineWidth = 2;\r\n            ctx.beginPath();\r\n            ctx.moveTo(x1, y1);\r\n            ctx.lineTo(x2, y2);\r\n            ctx.stroke();\r\n          }\r\n          break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'colorSchemes'. Either include it or remove the dependency array.","line":175,"column":6,"nodeType":"ArrayExpression","endLine":175,"endColumn":50,"suggestions":[{"desc":"Update the dependencies array to be: [analyserNode, isPlaying, mode, colorScheme, colorSchemes]","fix":{"range":[5736,5780],"text":"[analyserNode, isPlaying, mode, colorScheme, colorSchemes]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'colorSchemes.length'. Either include it or remove the dependency array.","line":195,"column":6,"nodeType":"ArrayExpression","endLine":195,"endColumn":17,"suggestions":[{"desc":"Update the dependencies array to be: [colorSchemes.length, isPlaying]","fix":{"range":[6335,6346],"text":"[colorSchemes.length, isPlaying]"}}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useEffect, useState } from \"react\";\r\nimport { Card } from \"@/components/ui/card\";\r\nimport { Maximize2, Minimize2 } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\ninterface FunSpectrumVisualizerProps {\r\n  analyserNode: AnalyserNode | null;\r\n  isPlaying: boolean;\r\n}\r\n\r\ntype VisualizerMode = \"bars\" | \"wave\" | \"circular\";\r\n\r\nexport const FunSpectrumVisualizer: React.FC<FunSpectrumVisualizerProps> = ({\r\n  analyserNode,\r\n  isPlaying,\r\n}) => {\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const animationFrameRef = useRef<number>(0);\r\n  const [mode, setMode] = useState<VisualizerMode>(\"bars\");\r\n  const [colorScheme, setColorScheme] = useState(0);\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n  const timeRef = useRef(0);\r\n\r\n  const colorSchemes = [\r\n    [\"#ff006e\", \"#8338ec\", \"#3a86ff\"], // Pink, Purple, Blue\r\n    [\"#ffbe0b\", \"#fb5607\", \"#ff006e\"], // Yellow, Orange, Pink\r\n    [\"#06ffa5\", \"#06d6a0\", \"#118ab2\"], // Green, Teal, Blue\r\n    [\"#f72585\", \"#b5179e\", \"#7209b7\"], // Magenta gradient\r\n    [\"#ff9f1c\", \"#ffbf69\", \"#cbf3f0\"], // Warm sunset\r\n    [\"#06a77d\", \"#d5e68d\", \"#f1a208\"], // Nature\r\n  ];\r\n\r\n  useEffect(() => {\r\n    if (!analyserNode || !canvasRef.current || !isPlaying) {\r\n      if (animationFrameRef.current) {\r\n        cancelAnimationFrame(animationFrameRef.current);\r\n      }\r\n      return;\r\n    }\r\n\r\n    const canvas = canvasRef.current;\r\n    const ctx = canvas.getContext(\"2d\");\r\n    if (!ctx) return;\r\n\r\n    const bufferLength = analyserNode.frequencyBinCount;\r\n    const dataArray = new Uint8Array(bufferLength);\r\n    const timeDataArray = new Uint8Array(bufferLength);\r\n\r\n    const draw = () => {\r\n      animationFrameRef.current = requestAnimationFrame(draw);\r\n      analyserNode.getByteFrequencyData(dataArray);\r\n      analyserNode.getByteTimeDomainData(timeDataArray);\r\n\r\n      timeRef.current += 0.02;\r\n      const colors = colorSchemes[colorScheme % colorSchemes.length];\r\n\r\n      // Clear canvas\r\n      ctx.fillStyle = \"rgba(15, 23, 42, 0.3)\";\r\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n      const centerX = canvas.width / 2;\r\n      const centerY = canvas.height / 2;\r\n\r\n      switch (mode) {\r\n        case \"bars\":\r\n          // Animated bars with gradient\r\n          const barCount = 64;\r\n          const barWidth = canvas.width / barCount;\r\n          for (let i = 0; i < barCount; i++) {\r\n            const dataIndex = Math.floor((i / barCount) * bufferLength);\r\n            const barHeight =\r\n              (dataArray[dataIndex] / 255) * canvas.height * 0.8;\r\n            const x = i * barWidth;\r\n\r\n            // Color based on frequency and time\r\n            const hue = (i / barCount) * 360 + timeRef.current * 50;\r\n            const gradient = ctx.createLinearGradient(\r\n              x,\r\n              canvas.height - barHeight,\r\n              x,\r\n              canvas.height\r\n            );\r\n            gradient.addColorStop(0, `hsl(${hue}, 100%, 60%)`);\r\n            gradient.addColorStop(1, colors[2]);\r\n\r\n            ctx.fillStyle = gradient;\r\n            ctx.fillRect(x, canvas.height - barHeight, barWidth - 2, barHeight);\r\n\r\n            // Add glow effect\r\n            ctx.shadowBlur = 10;\r\n            ctx.shadowColor = `hsl(${hue}, 100%, 60%)`;\r\n            ctx.fillRect(x, canvas.height - barHeight, barWidth - 2, barHeight);\r\n            ctx.shadowBlur = 0;\r\n          }\r\n          break;\r\n\r\n        case \"wave\":\r\n          // Smooth waveform\r\n          ctx.strokeStyle = colors[0];\r\n          ctx.lineWidth = 3;\r\n          ctx.beginPath();\r\n\r\n          const sliceWidth = canvas.width / bufferLength;\r\n          let x = 0;\r\n\r\n          for (let i = 0; i < bufferLength; i++) {\r\n            const v = timeDataArray[i] / 128.0;\r\n            const y = (v * canvas.height) / 2;\r\n\r\n            if (i === 0) {\r\n              ctx.moveTo(x, y);\r\n            } else {\r\n              ctx.lineTo(x, y);\r\n            }\r\n\r\n            x += sliceWidth;\r\n          }\r\n\r\n          ctx.stroke();\r\n\r\n          // Add mirror effect\r\n          ctx.strokeStyle = colors[1];\r\n          ctx.beginPath();\r\n          x = 0;\r\n          for (let i = 0; i < bufferLength; i++) {\r\n            const v = timeDataArray[i] / 128.0;\r\n            const y = canvas.height - (v * canvas.height) / 2;\r\n\r\n            if (i === 0) {\r\n              ctx.moveTo(x, y);\r\n            } else {\r\n              ctx.lineTo(x, y);\r\n            }\r\n\r\n            x += sliceWidth;\r\n          }\r\n          ctx.stroke();\r\n          break;\r\n\r\n        case \"circular\":\r\n          // Circular spectrum\r\n          const radius = Math.min(canvas.width, canvas.height) * 0.3;\r\n          const angleStep = (Math.PI * 2) / bufferLength;\r\n\r\n          for (let i = 0; i < bufferLength; i += 2) {\r\n            const angle = i * angleStep + timeRef.current;\r\n            const dataValue = dataArray[i] / 255;\r\n            const barLength = dataValue * radius * 0.8;\r\n\r\n            const x1 = centerX + Math.cos(angle) * radius;\r\n            const y1 = centerY + Math.sin(angle) * radius;\r\n            const x2 = centerX + Math.cos(angle) * (radius + barLength);\r\n            const y2 = centerY + Math.sin(angle) * (radius + barLength);\r\n\r\n            const hue = (i / bufferLength) * 360 + timeRef.current * 30;\r\n            ctx.strokeStyle = `hsl(${hue}, 100%, ${50 + dataValue * 50}%)`;\r\n            ctx.lineWidth = 2;\r\n            ctx.beginPath();\r\n            ctx.moveTo(x1, y1);\r\n            ctx.lineTo(x2, y2);\r\n            ctx.stroke();\r\n          }\r\n          break;\r\n\r\n      }\r\n    };\r\n\r\n    draw();\r\n\r\n    return () => {\r\n      if (animationFrameRef.current) {\r\n        cancelAnimationFrame(animationFrameRef.current);\r\n      }\r\n    };\r\n  }, [analyserNode, isPlaying, mode, colorScheme]);\r\n\r\n  // Auto-cycle modes and colors\r\n  useEffect(() => {\r\n    if (!isPlaying) return;\r\n\r\n    const interval = setInterval(() => {\r\n      setMode((prev) => {\r\n        const modes: VisualizerMode[] = [\r\n          \"bars\",\r\n          \"wave\",\r\n          \"circular\",\r\n        ];\r\n        const currentIndex = modes.indexOf(prev);\r\n        return modes[(currentIndex + 1) % modes.length];\r\n      });\r\n      setColorScheme((prev) => (prev + 1) % colorSchemes.length);\r\n    }, 8000); // Change every 8 seconds\r\n\r\n    return () => clearInterval(interval);\r\n  }, [isPlaying]);\r\n\r\n  const toggleFullscreen = () => {\r\n    setIsFullscreen(!isFullscreen);\r\n  };\r\n\r\n  if (!isPlaying) {\r\n    return (\r\n      <Card className=\"bg-gradient-to-br from-slate-900 to-slate-800 border-slate-700 p-4\">\r\n        <h3 className=\"text-sm font-semibold text-purple-400 mb-2 flex items-center gap-2\">\r\n          <span className=\"text-xl\"></span>\r\n          Level Visualizer\r\n        </h3>\r\n        <div className=\"text-center py-8 text-slate-500 text-sm\">\r\n          Start playing music to see the visualizer\r\n        </div>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Card className={`bg-gradient-to-br from-slate-900 to-slate-800 border-slate-700 p-4 ${isFullscreen ? 'fixed inset-0 z-[9999] rounded-none' : ''}`}>\r\n      <div className=\"flex items-center justify-between mb-2\">\r\n        <h3 className=\"text-sm font-semibold text-purple-400 flex items-center gap-2\">\r\n          <span className=\"text-xl\"></span>\r\n          Level Visualizer\r\n        </h3>\r\n        <div className=\"flex gap-2\">\r\n          <div className=\"flex gap-1\">\r\n            {([\"bars\", \"wave\", \"circular\"] as VisualizerMode[]).map(\r\n              (m) => (\r\n                <button\r\n                  key={m}\r\n                  onClick={() => setMode(m)}\r\n                  className={`px-2 py-1 text-xs rounded transition-all ${\r\n                    mode === m\r\n                      ? \"bg-purple-600 text-white\"\r\n                      : \"bg-slate-700 text-slate-400 hover:bg-slate-600\"\r\n                  }`}\r\n                >\r\n                  {m[0].toUpperCase()}\r\n                </button>\r\n              )\r\n            )}\r\n          </div>\r\n          <Button\r\n            size=\"sm\"\r\n            variant=\"outline\"\r\n            onClick={toggleFullscreen}\r\n            className=\"h-7 px-2\"\r\n          >\r\n            {isFullscreen ? <Minimize2 className=\"h-3 w-3\" /> : <Maximize2 className=\"h-3 w-3\" />}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      <canvas\r\n        ref={canvasRef}\r\n        width={400}\r\n        height={isFullscreen ? 600 : 200}\r\n        className=\"w-full rounded-lg border border-slate-700 shadow-lg\"\r\n      />\r\n      <div className=\"mt-2 flex items-center justify-between text-xs text-slate-400\">\r\n        <span>Mode: {mode}</span>\r\n        <button\r\n          onClick={() =>\r\n            setColorScheme((prev) => (prev + 1) % colorSchemes.length)\r\n          }\r\n          className=\"hover:text-purple-400 transition-colors\"\r\n        >\r\n           Change Colors\r\n        </button>\r\n      </div>\r\n    </Card>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\media-player\\LevelMediaPlayer.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'compressorSettings.attack', 'compressorSettings.ratio', 'compressorSettings.release', 'compressorSettings.threshold', 'eqBands', and 'volume'. Either include them or remove the dependency array.","line":174,"column":6,"nodeType":"ArrayExpression","endLine":174,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [compressorSettings.attack, compressorSettings.ratio, compressorSettings.release, compressorSettings.threshold, eqBands, volume]","fix":{"range":[5466,5468],"text":"[compressorSettings.attack, compressorSettings.ratio, compressorSettings.release, compressorSettings.threshold, eqBands, volume]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect, useCallback } from \"react\";\r\nimport { Card } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Slider } from \"@/components/ui/slider\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport {\r\n  Play,\r\n  Pause,\r\n  SkipBack,\r\n  SkipForward,\r\n  Volume2,\r\n  Repeat,\r\n  Upload,\r\n  Trash2,\r\n  Activity,\r\n} from \"lucide-react\";\r\nimport WaveSurfer from \"wavesurfer.js\";\r\nimport {\r\n  getAudioContext,\r\n  resumeAudioContext,\r\n} from \"@/utils/audioContextManager\";\r\nimport { AudioFile } from \"@/types/audio\";\r\nimport { TenBandEqualizer, EQBand } from \"./TenBandEqualizer\";\r\nimport {\r\n  DynamicsCompressorControls,\r\n  CompressorSettings,\r\n} from \"./DynamicsCompressorControls\";\r\nimport { VisualizerDisplay, VisualizerMode } from \"./VisualizerDisplay\";\r\nimport { PlaylistPanel } from \"./PlaylistPanel\";\r\nimport { MediaPlayerUpload } from \"./MediaPlayerUpload\";\r\nimport { toast } from \"sonner\";\r\n\r\ninterface LevelMediaPlayerProps {\r\n  files: AudioFile[];\r\n  onFilesAdded?: (files: AudioFile[]) => void;\r\n  onFileDelete?: (fileId: string) => void;\r\n  autoPlayFile?: AudioFile | null;\r\n  onAutoPlayComplete?: () => void;\r\n  onClearAll?: () => void;\r\n}\r\n\r\nconst INITIAL_EQ_BANDS: EQBand[] = [\r\n  { frequency: 64, gain: 0 },\r\n  { frequency: 125, gain: 0 },\r\n  { frequency: 250, gain: 0 },\r\n  { frequency: 500, gain: 0 },\r\n  { frequency: 1000, gain: 0 },\r\n  { frequency: 2000, gain: 0 },\r\n  { frequency: 4000, gain: 0 },\r\n  { frequency: 8000, gain: 0 },\r\n];\r\n\r\nconst INITIAL_COMPRESSOR: CompressorSettings = {\r\n  threshold: -1.5,\r\n  ratio: 2.5,\r\n  attack: 0.001,\r\n  release: 0.0015,\r\n};\r\n\r\nexport const LevelMediaPlayer: React.FC<LevelMediaPlayerProps> = ({\r\n  files,\r\n  onFilesAdded,\r\n  onFileDelete,\r\n  autoPlayFile,\r\n  onAutoPlayComplete,\r\n  onClearAll,\r\n}) => {\r\n  const [currentFile, setCurrentFile] = useState<AudioFile | null>(null);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [duration, setDuration] = useState(0);\r\n  const [volume, setVolume] = useState(0.8);\r\n  const [loop, setLoop] = useState(false);\r\n  const [eqBands, setEqBands] = useState<EQBand[]>(INITIAL_EQ_BANDS);\r\n  const [compressorSettings, setCompressorSettings] = useState<CompressorSettings>(INITIAL_COMPRESSOR);\r\n  const [gainReduction, setGainReduction] = useState(0);\r\n  const [visualizerMode, setVisualizerMode] = useState<VisualizerMode>('bars');\r\n\r\n  const waveformRef = useRef<HTMLDivElement>(null);\r\n  const wavesurferRef = useRef<WaveSurfer | null>(null);\r\n  const eqFiltersRef = useRef<BiquadFilterNode[]>([]);\r\n  const compressorNodeRef = useRef<DynamicsCompressorNode | null>(null);\r\n  const analyserNodeRef = useRef<AnalyserNode | null>(null);\r\n  const gainNodeRef = useRef<GainNode | null>(null);\r\n  const audioSourceRef = useRef<MediaElementAudioSourceNode | null>(null);\r\n\r\n  // Initialize WaveSurfer\r\n  useEffect(() => {\r\n    if (!waveformRef.current) return;\r\n    const ws = WaveSurfer.create({\r\n      container: waveformRef.current,\r\n      waveColor: \"#3b82f6\",\r\n      progressColor: \"#06b6d4\",\r\n      cursorColor: \"#06b6d4\",\r\n      barWidth: 2,\r\n      barRadius: 3,\r\n      cursorWidth: 2,\r\n      height: 100,\r\n      barGap: 2,\r\n    });\r\n    wavesurferRef.current = ws;\r\n    ws.on(\"ready\", () => {\r\n      setDuration(ws.getDuration());\r\n    });\r\n    ws.on(\"audioprocess\", () => {\r\n      setCurrentTime(ws.getCurrentTime());\r\n    });\r\n    ws.on(\"finish\", () => {\r\n      if (loop) {\r\n        ws.play();\r\n      } else {\r\n        setIsPlaying(false);\r\n      }\r\n    });\r\n    return () => {\r\n      ws.destroy();\r\n    };\r\n  }, [loop]);\r\n\r\n  // File upload handler\r\n  const handleFilesAdded = useCallback(\r\n    (newFiles: AudioFile[]) => {\r\n      if (onFilesAdded) {\r\n        onFilesAdded(newFiles);\r\n      }\r\n      toast.success(`Added ${newFiles.length} file(s) to player`);\r\n    },\r\n    [onFilesAdded]\r\n  );\r\n\r\n  // Initialize Web Audio API nodes\r\n  useEffect(() => {\r\n    const audioContext = getAudioContext();\r\n    if (!audioContext) return;\r\n\r\n    if (!analyserNodeRef.current) {\r\n      const analyser = audioContext.createAnalyser();\r\n      analyser.fftSize = 2048;\r\n      analyserNodeRef.current = analyser;\r\n    }\r\n\r\n    if (!gainNodeRef.current) {\r\n      const gain = audioContext.createGain();\r\n      gain.gain.value = volume;\r\n      gainNodeRef.current = gain;\r\n    }\r\n\r\n    if (!compressorNodeRef.current) {\r\n      const compressor = audioContext.createDynamicsCompressor();\r\n      compressor.threshold.value = compressorSettings.threshold;\r\n      compressor.ratio.value = compressorSettings.ratio;\r\n      compressor.attack.value = compressorSettings.attack;\r\n      compressor.release.value = compressorSettings.release;\r\n      compressor.knee.value = 0;\r\n      compressorNodeRef.current = compressor;\r\n    }\r\n\r\n    if (eqFiltersRef.current.length === 0) {\r\n      eqBands.forEach((band, index) => {\r\n        const filter = audioContext.createBiquadFilter();\r\n        if (index === 0) {\r\n          filter.type = \"lowshelf\";\r\n        } else if (index === eqBands.length - 1) {\r\n          filter.type = \"highshelf\";\r\n        } else {\r\n          filter.type = \"peaking\";\r\n        }\r\n        filter.frequency.value = band.frequency;\r\n        filter.gain.value = band.gain;\r\n        filter.Q.value = 1.0;\r\n        eqFiltersRef.current.push(filter);\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  // Auto-play file\r\n  useEffect(() => {\r\n    if (autoPlayFile && autoPlayFile.id !== currentFile?.id) {\r\n      console.log(\"Auto-playing file from track list:\", autoPlayFile.name);\r\n      setCurrentFile(autoPlayFile);\r\n      if (onAutoPlayComplete) {\r\n        onAutoPlayComplete();\r\n      }\r\n    }\r\n  }, [autoPlayFile, currentFile, onAutoPlayComplete]);\r\n\r\n  // Load file into WaveSurfer\r\n  useEffect(() => {\r\n    if (!currentFile || !wavesurferRef.current) return;\r\n    const loadAudio = async () => {\r\n      try {\r\n        const url = currentFile.enhancedUrl || currentFile.originalUrl;\r\n        if (!url && currentFile.originalFile) {\r\n          const blob = currentFile.originalFile;\r\n          const objectUrl = URL.createObjectURL(blob);\r\n          await wavesurferRef.current!.load(objectUrl);\r\n        } else if (url) {\r\n          await wavesurferRef.current!.load(url);\r\n        }\r\n\r\n        const audioContext = getAudioContext();\r\n        if (audioContext && wavesurferRef.current) {\r\n          const backend = wavesurferRef.current.getMediaElement();\r\n          if (backend && !audioSourceRef.current) {\r\n            try {\r\n              const source = audioContext.createMediaElementSource(backend);\r\n              audioSourceRef.current = source;\r\n\r\n              let currentNode: AudioNode = source;\r\n              eqFiltersRef.current.forEach((filter) => {\r\n                currentNode.connect(filter);\r\n                currentNode = filter;\r\n              });\r\n              if (compressorNodeRef.current) {\r\n                currentNode.connect(compressorNodeRef.current);\r\n                currentNode = compressorNodeRef.current;\r\n              }\r\n              if (gainNodeRef.current) {\r\n                currentNode.connect(gainNodeRef.current);\r\n                currentNode = gainNodeRef.current;\r\n              }\r\n              if (analyserNodeRef.current) {\r\n                gainNodeRef.current!.connect(analyserNodeRef.current);\r\n                analyserNodeRef.current.connect(audioContext.destination);\r\n              }\r\n              console.log(\" Web Audio API graph connected\");\r\n            } catch (error) {\r\n              console.error(\"Error connecting audio graph:\", error);\r\n            }\r\n          }\r\n        }\r\n        toast.success(`Loaded: ${currentFile.name}`);\r\n      } catch (error) {\r\n        console.error(\"Failed to load audio:\", error);\r\n        toast.error(\"Failed to load audio file\");\r\n      }\r\n    };\r\n    loadAudio();\r\n  }, [currentFile]);\r\n\r\n  // Update EQ\r\n  useEffect(() => {\r\n    const audioContext = getAudioContext();\r\n    if (!audioContext) return;\r\n    eqFiltersRef.current.forEach((filter, index) => {\r\n      if (eqBands[index]) {\r\n        filter.gain.setValueAtTime(eqBands[index].gain, audioContext.currentTime);\r\n      }\r\n    });\r\n  }, [eqBands]);\r\n\r\n  // Update compressor\r\n  useEffect(() => {\r\n    if (!compressorNodeRef.current) return;\r\n    const audioContext = getAudioContext();\r\n    if (!audioContext) return;\r\n    const comp = compressorNodeRef.current;\r\n    comp.threshold.setValueAtTime(compressorSettings.threshold, audioContext.currentTime);\r\n    comp.ratio.setValueAtTime(compressorSettings.ratio, audioContext.currentTime);\r\n    comp.attack.setValueAtTime(compressorSettings.attack, audioContext.currentTime);\r\n    comp.release.setValueAtTime(compressorSettings.release, audioContext.currentTime);\r\n    comp.knee.setValueAtTime(0, audioContext.currentTime);\r\n  }, [compressorSettings]);\r\n\r\n  // Update volume\r\n  useEffect(() => {\r\n    if (!gainNodeRef.current) return;\r\n    const audioContext = getAudioContext();\r\n    if (!audioContext) return;\r\n    gainNodeRef.current.gain.setValueAtTime(volume, audioContext.currentTime);\r\n  }, [volume]);\r\n\r\n  // Monitor gain reduction\r\n  useEffect(() => {\r\n    if (!compressorNodeRef.current || !isPlaying) return;\r\n    const interval = setInterval(() => {\r\n      if (compressorNodeRef.current) {\r\n        setGainReduction(compressorNodeRef.current.reduction);\r\n      }\r\n    }, 100);\r\n    return () => clearInterval(interval);\r\n  }, [isPlaying]);\r\n\r\n  const handlePlayPause = async () => {\r\n    if (!wavesurferRef.current) return;\r\n    try {\r\n      await resumeAudioContext();\r\n      if (isPlaying) {\r\n        wavesurferRef.current.pause();\r\n        setIsPlaying(false);\r\n      } else {\r\n        await wavesurferRef.current.play();\r\n        setIsPlaying(true);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Playback error:\", error);\r\n      toast.error(\"Playback failed\");\r\n    }\r\n  };\r\n\r\n  const handleDeleteFile = () => {\r\n    if (!currentFile) return;\r\n    if (onFileDelete) {\r\n      onFileDelete(currentFile.id);\r\n    }\r\n    setCurrentFile(null);\r\n    setIsPlaying(false);\r\n    toast.success(`Deleted: ${currentFile.name}`);\r\n  };\r\n\r\n  const handleSkipBackward = () => {\r\n    if (wavesurferRef.current) {\r\n      const newTime = Math.max(0, currentTime - 10);\r\n      wavesurferRef.current.seekTo(newTime / duration);\r\n    }\r\n  };\r\n\r\n  const handleSkipForward = () => {\r\n    if (wavesurferRef.current) {\r\n      const newTime = Math.min(duration, currentTime + 10);\r\n      wavesurferRef.current.seekTo(newTime / duration);\r\n    }\r\n  };\r\n\r\n  const handleEQBandChange = (index: number, gain: number) => {\r\n    const newBands = [...eqBands];\r\n    newBands[index] = { ...newBands[index], gain };\r\n    setEqBands(newBands);\r\n  };\r\n\r\n  const handleEQReset = () => {\r\n    setEqBands(INITIAL_EQ_BANDS);\r\n    toast.success(\"EQ reset to flat\");\r\n  };\r\n\r\n  const formatTime = (seconds: number) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = Math.floor(seconds % 60);\r\n    return `${mins}:${secs.toString().padStart(2, \"0\")}`;\r\n  };\r\n\r\n  const handleSeek = (value: number[]) => {\r\n    if (wavesurferRef.current) {\r\n      const seekTime = value[0];\r\n      wavesurferRef.current.seekTo(seekTime / duration);\r\n      setCurrentTime(seekTime);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6 p-6\">\r\n      {/* Upload Zone */}\r\n      <MediaPlayerUpload onFilesAdded={handleFilesAdded} />\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        {/* Left Column: Visualizer & Player Controls */}\r\n        <div className=\"lg:col-span-2 space-y-6\">\r\n          {/* Main Player Card */}\r\n          <Card className=\"bg-gradient-to-br from-slate-950 to-slate-900 border-slate-800 p-0 shadow-2xl overflow-hidden relative group\">\r\n            {/* Header / Title Overlay */}\r\n            <div className=\"absolute top-0 left-0 right-0 p-4 z-20 bg-gradient-to-b from-black/80 to-transparent flex items-center justify-between pointer-events-none\">\r\n              <h3 className=\"text-xl font-bold flex items-center gap-2 text-cyan-400 drop-shadow-md pointer-events-auto\">\r\n                <span className=\"text-2xl\"></span>\r\n                {currentFile ? currentFile.name : \"No track loaded\"}\r\n              </h3>\r\n              {currentFile && (\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"icon\"\r\n                  onClick={handleDeleteFile}\r\n                  className=\"text-red-400 hover:bg-red-900/40 hover:text-red-300 pointer-events-auto\"\r\n                >\r\n                  <Trash2 className=\"h-5 w-5\" />\r\n                </Button>\r\n              )}\r\n            </div>\r\n\r\n            {/* Visualizer Display (Center Stage) */}\r\n            <div className=\"relative w-full max-w-[600px] aspect-square mx-auto bg-black/50 shadow-lg rounded-lg my-4\">\r\n              <VisualizerDisplay\r\n                analyserNode={analyserNodeRef.current}\r\n                isPlaying={isPlaying}\r\n                mode={visualizerMode}\r\n                onModeChange={setVisualizerMode}\r\n              />\r\n\r\n              {/* Hidden WaveSurfer Container (Engine Only) - Must keep layout for initialization */}\r\n              <div\r\n                ref={waveformRef}\r\n                className=\"absolute inset-0 opacity-0 pointer-events-none z-[-1]\"\r\n                aria-hidden=\"true\"\r\n              />\r\n            </div>\r\n\r\n            {/* Controls Section */}\r\n            <div className=\"p-6 bg-slate-900/90 backdrop-blur-sm border-t border-slate-800\">\r\n              {/* Progress Slider */}\r\n              <div className=\"mb-6 space-y-2\">\r\n                <Slider\r\n                  value={[currentTime]}\r\n                  min={0}\r\n                  max={duration || 100}\r\n                  step={0.1}\r\n                  onValueChange={handleSeek}\r\n                  className=\"cursor-pointer py-2\"\r\n                />\r\n                <div className=\"flex items-center justify-between text-xs text-slate-400 font-mono\">\r\n                  <span>{formatTime(currentTime)}</span>\r\n                  <span>{formatTime(duration)}</span>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Playback Controls */}\r\n              <div className=\"flex items-center justify-between\">\r\n                {/* Volume Controls */}\r\n                <div className=\"flex items-center gap-3 w-1/4\">\r\n                  <Volume2 className=\"h-5 w-5 text-slate-400\" />\r\n                  <Slider\r\n                    value={[volume]}\r\n                    min={0}\r\n                    max={1}\r\n                    step={0.01}\r\n                    onValueChange={(v) => setVolume(v[0])}\r\n                    className=\"w-24\"\r\n                  />\r\n                </div>\r\n\r\n                {/* Main Transport Controls */}\r\n                <div className=\"flex items-center gap-6\">\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"icon\"\r\n                    onClick={handleSkipBackward}\r\n                    disabled={!currentFile}\r\n                    className=\"text-slate-400 hover:text-white hover:bg-slate-800\"\r\n                  >\r\n                    <SkipBack className=\"h-6 w-6\" />\r\n                  </Button>\r\n\r\n                  <Button\r\n                    variant=\"default\"\r\n                    size=\"icon\"\r\n                    onClick={handlePlayPause}\r\n                    disabled={!currentFile}\r\n                    className=\"bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-400 hover:to-blue-500 h-16 w-16 rounded-full shadow-lg shadow-cyan-500/20 scale-100 hover:scale-105 transition-all\"\r\n                  >\r\n                    {isPlaying ? <Pause className=\"h-8 w-8 fill-white\" /> : <Play className=\"h-8 w-8 ml-1 fill-white\" />}\r\n                  </Button>\r\n\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"icon\"\r\n                    onClick={handleSkipForward}\r\n                    disabled={!currentFile}\r\n                    className=\"text-slate-400 hover:text-white hover:bg-slate-800\"\r\n                  >\r\n                    <SkipForward className=\"h-6 w-6\" />\r\n                  </Button>\r\n                </div>\r\n\r\n                {/* Secondary Controls */}\r\n                <div className=\"flex items-center justify-end gap-3 w-1/4\">\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"icon\"\r\n                    onClick={() => setLoop(!loop)}\r\n                    className={`${loop ? \"text-cyan-400\" : \"text-slate-500\"} hover:bg-slate-800`}\r\n                  >\r\n                    <Repeat className=\"h-5 w-5\" />\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </Card>\r\n\r\n          {/* EQ Section */}\r\n          <TenBandEqualizer\r\n            bands={eqBands}\r\n            onBandChange={handleEQBandChange}\r\n            onReset={handleEQReset}\r\n          />\r\n        </div>\r\n\r\n        {/* Right Column: Compressor & Playlist */}\r\n        <div className=\"space-y-6\">\r\n          {/* Compressor */}\r\n          <DynamicsCompressorControls\r\n            settings={compressorSettings}\r\n            gainReduction={gainReduction}\r\n            onSettingsChange={(settings) =>\r\n              setCompressorSettings({ ...compressorSettings, ...settings })\r\n            }\r\n          />\r\n\r\n          {/* Playlist */}\r\n          <PlaylistPanel\r\n            files={files}\r\n            currentFileId={currentFile?.id || null}\r\n            onFileSelect={setCurrentFile}\r\n            onFileDelete={onFileDelete}\r\n            onClearAll={onClearAll}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\media-player\\MediaPlayerUpload.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":48,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2031,2034],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2031,2034],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2243,2246],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2243,2246],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useCallback } from 'react';\r\nimport { useDropzone } from 'react-dropzone';\r\nimport { Card } from '@/components/ui/card';\r\nimport { Checkbox } from '@/components/ui/checkbox';\r\nimport { Upload, AlertCircle, ExternalLink } from 'lucide-react';\r\nimport { AudioFile } from '@/types/audio';\r\nimport { Link } from 'react-router-dom';\r\nimport { toast } from 'sonner';\r\n\r\ninterface MediaPlayerUploadProps {\r\n  onFilesAdded: (files: AudioFile[]) => void;\r\n}\r\n\r\nexport const MediaPlayerUpload: React.FC<MediaPlayerUploadProps> = ({ onFilesAdded }) => {\r\n  const [hasConsented, setHasConsented] = useState(false);\r\n  const [pendingFiles, setPendingFiles] = useState<File[]>([]);\r\n  const [errorMessage, setErrorMessage] = useState<string | null>(null);\r\n\r\n  const processFiles = useCallback(async (files: File[]) => {\r\n    const toastId = toast.loading(`Analyzing ${files.length} file${files.length > 1 ? 's' : ''}...`, {\r\n      description: 'Detecting BPM and key signatures',\r\n    });\r\n\r\n    // Import analysis utilities\r\n    const { detectKeyFromFile } = await import('@/utils/keyDetector');\r\n    const { detectBPMFromFile } = await import('@/utils/bpmDetector');\r\n\r\n    const audioFiles: AudioFile[] = await Promise.all(\r\n      files.map(async (file, idx) => {\r\n        let harmonicKey = 'N/A';\r\n        let bpm: number | undefined = undefined;\r\n\r\n        console.log(`\\n [${idx + 1}/${files.length}] Analyzing: ${file.name}`);\r\n\r\n        // Analyze in parallel with timeouts\r\n        const [keyResult, bpmResult] = await Promise.allSettled([\r\n          Promise.race([\r\n            detectKeyFromFile(file),\r\n            new Promise((_, reject) => setTimeout(() => reject(new Error('Key timeout')), 5000))\r\n          ]),\r\n          Promise.race([\r\n            detectBPMFromFile(file),\r\n            new Promise((_, reject) => setTimeout(() => reject(new Error('BPM timeout')), 5000))\r\n          ])\r\n        ]);\r\n\r\n        if (keyResult.status === 'fulfilled') {\r\n          const keyAnalysis = keyResult.value as any;\r\n          harmonicKey = keyAnalysis.camelot;\r\n          console.log(` Key: ${harmonicKey}`);\r\n        }\r\n\r\n        if (bpmResult.status === 'fulfilled') {\r\n          const bpmAnalysis = bpmResult.value as any;\r\n          bpm = bpmAnalysis.bpm;\r\n          console.log(` BPM: ${bpm}`);\r\n        }\r\n\r\n        return {\r\n          id: `${Date.now()}-${idx}-${file.name}`,\r\n          name: file.name,\r\n          size: file.size,\r\n          type: file.type,\r\n          originalFile: file,\r\n          originalUrl: URL.createObjectURL(file),\r\n          status: 'uploaded' as const,\r\n          fileType: file.name.split('.').pop()?.toLowerCase() as 'mp3' | 'wav' | 'flac' | 'unsupported',\r\n          harmonicKey,\r\n          bpm,\r\n          duration: 0,\r\n        };\r\n      })\r\n    );\r\n\r\n    const detectedBPM = audioFiles.filter(f => f.bpm).length;\r\n    const detectedKey = audioFiles.filter(f => f.harmonicKey && f.harmonicKey !== 'N/A').length;\r\n\r\n    if (detectedKey === 0 && detectedBPM === 0) {\r\n      toast.error('Analysis failed', {\r\n        id: toastId,\r\n        description: 'Could not detect BPM or Key',\r\n      });\r\n    } else {\r\n      toast.success('Analysis complete!', {\r\n        id: toastId,\r\n        description: `BPM: ${detectedBPM}/${files.length}  Key: ${detectedKey}/${files.length}`,\r\n      });\r\n    }\r\n\r\n    onFilesAdded(audioFiles);\r\n    setPendingFiles([]);\r\n  }, [onFilesAdded]);\r\n\r\n  const onDrop = useCallback((acceptedFiles: File[]) => {\r\n    setErrorMessage(null);\r\n\r\n    // Always require consent - don't bypass terms and conditions\r\n    if (!hasConsented) {\r\n      setPendingFiles(acceptedFiles);\r\n      setErrorMessage('Please accept the Terms and Conditions before uploading files.');\r\n      return;\r\n    }\r\n\r\n    processFiles(acceptedFiles);\r\n  }, [hasConsented, processFiles]);\r\n\r\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\r\n    onDrop,\r\n    accept: {\r\n      'audio/*': ['.mp3', '.wav', '.flac']\r\n    },\r\n    multiple: true,\r\n  });\r\n\r\n  const handleConsentChange = (checked: boolean) => {\r\n    setHasConsented(checked);\r\n    setErrorMessage(null);\r\n\r\n    if (checked && pendingFiles.length > 0) {\r\n      processFiles(pendingFiles);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card className=\"bg-gradient-to-br from-slate-900 to-slate-800 border-slate-700\">\r\n      <div\r\n        {...getRootProps()}\r\n        className={`p-4 border-2 border-dashed rounded-lg cursor-pointer transition-colors ${isDragActive\r\n            ? 'border-cyan-500 bg-cyan-500/10'\r\n            : 'border-slate-600 hover:border-cyan-500/50 hover:bg-slate-800/50'\r\n          }`}\r\n      >\r\n        <input {...getInputProps()} disabled={!hasConsented} />\r\n        <div className=\"flex flex-col items-center justify-center gap-2 text-center\">\r\n          <Upload className=\"h-8 w-8 text-cyan-400\" />\r\n          <div>\r\n            <p className=\"text-sm font-semibold mb-1 text-cyan-300\">\r\n              {isDragActive\r\n                ? 'Drop files here...'\r\n                : hasConsented\r\n                  ? 'Drop audio files here or click to browse'\r\n                  : 'Accept Terms and Conditions to upload'}\r\n            </p>\r\n            <p className=\"text-xs text-slate-400\">\r\n              Supports MP3, WAV, FLAC\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Terms and Conditions Consent */}\r\n      <div className=\"mt-6 pt-4 border-t border-slate-600\">\r\n        <div className=\"flex items-start gap-3\">\r\n          <Checkbox\r\n            id=\"media-player-consent\"\r\n            checked={hasConsented}\r\n            onCheckedChange={handleConsentChange}\r\n            className=\"mt-1\"\r\n          />\r\n          <div className=\"flex-1\">\r\n            <label\r\n              htmlFor=\"media-player-consent\"\r\n              className=\"text-sm cursor-pointer leading-relaxed text-cyan-200 font-semibold\"\r\n            >\r\n              I agree to the{' '}\r\n              <Link\r\n                to=\"/terms\"\r\n                className=\"text-cyan-400 hover:text-cyan-300 underline inline-flex items-center gap-1\"\r\n                target=\"_blank\"\r\n              >\r\n                Terms and Conditions\r\n                <ExternalLink className=\"h-3 w-3\" />\r\n              </Link>\r\n              {' '}and acknowledge the Copyright Disclaimer. I confirm that I own or have proper authorization\r\n              for all audio files I upload and process.\r\n            </label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Error Message */}\r\n      {errorMessage && (\r\n        <div className=\"mt-4 p-3 rounded-md bg-red-900/50 border border-red-600/50 text-red-200 flex items-center text-sm\">\r\n          <AlertCircle className=\"h-4 w-4 mr-2 flex-shrink-0\" />\r\n          {errorMessage}\r\n        </div>\r\n      )}\r\n\r\n      {/* Upload Status */}\r\n      {!hasConsented && (\r\n        <div className=\"mt-4 p-3 rounded-md bg-yellow-900/50 border border-yellow-600/50 text-yellow-200 flex items-center text-sm\">\r\n          <AlertCircle className=\"h-4 w-4 mr-2 flex-shrink-0\" />\r\n          Please accept the Terms and Conditions to enable file uploads.\r\n        </div>\r\n      )}\r\n    </Card>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\media-player\\MiniPlayer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\media-player\\PlaylistPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\media-player\\TenBandEqualizer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\media-player\\VisualizerDisplay.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":37,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1233,1236],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1233,1236],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":245,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":245,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9473,9476],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9473,9476],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useEffect, useState, Suspense } from 'react';\r\nimport { Card } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Maximize, Minimize, Activity } from 'lucide-react';\r\n\r\n// Lazy load the 3D visualizer to avoid bundle bloat and potential crashes affecting the main thread\r\nconst Visualizer3D = React.lazy(() => import('../visualizer-3d/Visualizer3D'));\r\n\r\nexport type VisualizerMode =\r\n    | 'bars'\r\n    | 'wave'\r\n    | 'circular'\r\n    | 'particles'\r\n    | 'spectrogram'\r\n    | 'terrain3d'\r\n    | 'particles3d'\r\n    | 'tunnel3d'\r\n    | 'sphere3d';\r\n\r\ninterface VisualizerDisplayProps {\r\n    analyserNode: AnalyserNode | null;\r\n    isPlaying: boolean;\r\n    mode: VisualizerMode;\r\n    onModeChange?: (mode: VisualizerMode) => void;\r\n}\r\n\r\nexport const VisualizerDisplay: React.FC<VisualizerDisplayProps> = ({\r\n    analyserNode,\r\n    isPlaying,\r\n    mode,\r\n    onModeChange\r\n}) => {\r\n    const canvasRef = useRef<HTMLCanvasElement>(null);\r\n    const containerRef = useRef<HTMLDivElement>(null);\r\n    const animationRef = useRef<number>();\r\n    const particlesRef = useRef<any[]>([]);\r\n    const [isFullscreen, setIsFullscreen] = useState(false);\r\n\r\n    const is3DMode = mode.endsWith('3d');\r\n\r\n    // Handle fullscreen changes\r\n    useEffect(() => {\r\n        const handleFullscreenChange = () => {\r\n            setIsFullscreen(!!document.fullscreenElement);\r\n        };\r\n        document.addEventListener('fullscreenchange', handleFullscreenChange);\r\n        return () => document.removeEventListener('fullscreenchange', handleFullscreenChange);\r\n    }, []);\r\n\r\n    const toggleFullscreen = () => {\r\n        if (!containerRef.current) return;\r\n\r\n        if (!document.fullscreenElement) {\r\n            containerRef.current.requestFullscreen().catch(err => {\r\n                console.error(`Error attempting to enable fullscreen: ${err.message}`);\r\n            });\r\n        } else {\r\n            document.exitFullscreen();\r\n        }\r\n    };\r\n\r\n    // 2D Canvas Logic\r\n    useEffect(() => {\r\n        if (is3DMode || !canvasRef.current || !analyserNode) return;\r\n\r\n        const canvas = canvasRef.current;\r\n        const ctx = canvas.getContext('2d');\r\n        if (!ctx) return;\r\n\r\n        // Set canvas size\r\n        const resizeCanvas = () => {\r\n            canvas.width = canvas.clientWidth * window.devicePixelRatio;\r\n            canvas.height = canvas.clientHeight * window.devicePixelRatio;\r\n            ctx.scale(window.devicePixelRatio, window.devicePixelRatio);\r\n        };\r\n        resizeCanvas();\r\n        window.addEventListener('resize', resizeCanvas);\r\n\r\n        const bufferLength = analyserNode.frequencyBinCount;\r\n        const dataArray = new Uint8Array(bufferLength);\r\n\r\n        // Initialize particles if needed\r\n        if (mode === 'particles' && particlesRef.current.length === 0) {\r\n            for (let i = 0; i < 100; i++) {\r\n                particlesRef.current.push({\r\n                    x: Math.random() * canvas.width,\r\n                    y: Math.random() * canvas.height,\r\n                    vx: (Math.random() - 0.5) * 2,\r\n                    vy: (Math.random() - 0.5) * 2,\r\n                    size: Math.random() * 3 + 1,\r\n                    color: `hsl(${Math.random() * 360}, 100%, 50%)`\r\n                });\r\n            }\r\n        }\r\n\r\n        const draw = () => {\r\n            if (!ctx || !analyserNode) return;\r\n\r\n            const width = canvas.width / window.devicePixelRatio;\r\n            const height = canvas.height / window.devicePixelRatio;\r\n\r\n            ctx.clearRect(0, 0, width, height);\r\n\r\n            if (!isPlaying) {\r\n                animationRef.current = requestAnimationFrame(draw);\r\n                return;\r\n            }\r\n\r\n            if (mode === 'bars') {\r\n                analyserNode.getByteFrequencyData(dataArray);\r\n                const barWidth = (width / bufferLength) * 2.5;\r\n                let barHeight;\r\n                let x = 0;\r\n\r\n                for (let i = 0; i < bufferLength; i++) {\r\n                    barHeight = (dataArray[i] / 255) * height;\r\n\r\n                    const gradient = ctx.createLinearGradient(0, height, 0, height - barHeight);\r\n                    gradient.addColorStop(0, '#06b6d4'); // Cyan\r\n                    gradient.addColorStop(1, '#3b82f6'); // Blue\r\n\r\n                    ctx.fillStyle = gradient;\r\n                    ctx.fillRect(x, height - barHeight, barWidth, barHeight);\r\n\r\n                    x += barWidth + 1;\r\n                }\r\n            } else if (mode === 'wave') {\r\n                analyserNode.getByteTimeDomainData(dataArray);\r\n                ctx.lineWidth = 2;\r\n                ctx.strokeStyle = '#06b6d4';\r\n                ctx.beginPath();\r\n\r\n                const sliceWidth = width / bufferLength;\r\n                let x = 0;\r\n\r\n                for (let i = 0; i < bufferLength; i++) {\r\n                    const v = dataArray[i] / 128.0;\r\n                    const y = (v * height) / 2;\r\n\r\n                    if (i === 0) {\r\n                        ctx.moveTo(x, y);\r\n                    } else {\r\n                        ctx.lineTo(x, y);\r\n                    }\r\n\r\n                    x += sliceWidth;\r\n                }\r\n\r\n                ctx.lineTo(width, height / 2);\r\n                ctx.stroke();\r\n            } else if (mode === 'circular') {\r\n                analyserNode.getByteFrequencyData(dataArray);\r\n                const centerX = width / 2;\r\n                const centerY = height / 2;\r\n                const radius = Math.min(width, height) / 4;\r\n\r\n                ctx.beginPath();\r\n                ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);\r\n                ctx.strokeStyle = '#334155';\r\n                ctx.stroke();\r\n\r\n                const bars = 64;\r\n                const step = (Math.PI * 2) / bars;\r\n\r\n                for (let i = 0; i < bars; i++) {\r\n                    const value = dataArray[i * 4]; // Sample fewer points\r\n                    const barHeight = (value / 255) * (radius / 2);\r\n                    const angle = i * step;\r\n\r\n                    const x1 = centerX + Math.cos(angle) * radius;\r\n                    const y1 = centerY + Math.sin(angle) * radius;\r\n                    const x2 = centerX + Math.cos(angle) * (radius + barHeight);\r\n                    const y2 = centerY + Math.sin(angle) * (radius + barHeight);\r\n\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(x1, y1);\r\n                    ctx.lineTo(x2, y2);\r\n                    ctx.strokeStyle = `hsl(${i * (360 / bars)}, 100%, 50%)`;\r\n                    ctx.lineWidth = 4;\r\n                    ctx.lineCap = 'round';\r\n                    ctx.stroke();\r\n                }\r\n            } else if (mode === 'particles') {\r\n                analyserNode.getByteFrequencyData(dataArray);\r\n                const average = dataArray.reduce((a, b) => a + b) / dataArray.length;\r\n                const boost = average / 255; // 0 to 1\r\n\r\n                particlesRef.current.forEach((p, i) => {\r\n                    p.x += p.vx * (1 + boost * 5);\r\n                    p.y += p.vy * (1 + boost * 5);\r\n\r\n                    // Wrap around\r\n                    if (p.x < 0) p.x = width;\r\n                    if (p.x > width) p.x = 0;\r\n                    if (p.y < 0) p.y = height;\r\n                    if (p.y > height) p.y = 0;\r\n\r\n                    const size = p.size * (1 + (dataArray[i % bufferLength] / 255) * 2);\r\n\r\n                    ctx.beginPath();\r\n                    ctx.arc(p.x, p.y, size, 0, Math.PI * 2);\r\n                    ctx.fillStyle = p.color;\r\n                    ctx.globalAlpha = 0.6 + boost * 0.4;\r\n                    ctx.fill();\r\n                    ctx.globalAlpha = 1;\r\n                });\r\n            } else if (mode === 'spectrogram') {\r\n                analyserNode.getByteFrequencyData(dataArray);\r\n                const barWidth = (width / bufferLength) * 2;\r\n\r\n                for (let i = 0; i < bufferLength; i++) {\r\n                    const barHeight = (dataArray[i] / 255) * (height / 2);\r\n                    const hue = (i / bufferLength) * 360;\r\n                    ctx.fillStyle = `hsl(${hue}, 100%, 50%)`;\r\n\r\n                    // Right side\r\n                    ctx.fillRect(width / 2 + i * barWidth, height / 2 - barHeight / 2, barWidth, barHeight);\r\n                    // Left side\r\n                    ctx.fillRect(width / 2 - i * barWidth, height / 2 - barHeight / 2, barWidth, barHeight);\r\n                }\r\n            }\r\n\r\n            animationRef.current = requestAnimationFrame(draw);\r\n        };\r\n\r\n        draw();\r\n\r\n        return () => {\r\n            window.removeEventListener('resize', resizeCanvas);\r\n            if (animationRef.current) {\r\n                cancelAnimationFrame(animationRef.current);\r\n            }\r\n        };\r\n    }, [analyserNode, isPlaying, mode, is3DMode]);\r\n\r\n    return (\r\n        <Card\r\n            ref={containerRef}\r\n            className={`bg-black/90 border-slate-800 p-0 overflow-hidden relative group ${isFullscreen ? 'rounded-none border-0' : 'h-full w-full'}`}\r\n        >\r\n            {is3DMode ? (\r\n                <Suspense fallback={<div className=\"w-full h-full flex items-center justify-center text-cyan-500\">Loading 3D Engine...</div>}>\r\n                    <Visualizer3D\r\n                        mode={mode.replace('3d', '') as any}\r\n                        analyser={analyserNode}\r\n                    />\r\n                </Suspense>\r\n            ) : (\r\n                <canvas\r\n                    ref={canvasRef}\r\n                    className=\"w-full h-full block\"\r\n                    style={{ width: '100%', height: '100%' }}\r\n                />\r\n            )}\r\n\r\n            {/* Overlay Controls */}\r\n            <div className=\"absolute inset-0 p-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none\">\r\n                {/* Top Right: Fullscreen Button */}\r\n                <div className=\"absolute top-4 right-4 pointer-events-auto\">\r\n                    <Button\r\n                        variant=\"ghost\"\r\n                        size=\"icon\"\r\n                        onClick={toggleFullscreen}\r\n                        className=\"text-white hover:bg-white/20 bg-black/40 h-8 w-8 backdrop-blur-sm border border-white/10\"\r\n                        title={isFullscreen ? \"Exit fullscreen\" : \"Enter fullscreen\"}\r\n                    >\r\n                        {isFullscreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n                    </Button>\r\n                </div>\r\n\r\n                {/* Bottom Right: Visualizer Selector */}\r\n                {onModeChange && (\r\n                    <div className=\"absolute bottom-4 right-4 pointer-events-auto flex items-center gap-2 bg-black/60 px-3 py-2 rounded-lg backdrop-blur-sm border border-cyan-500/30\">\r\n                        <Activity className=\"h-4 w-4 text-cyan-400\" />\r\n                        <Select value={mode} onValueChange={(v) => onModeChange(v as VisualizerMode)}>\r\n                            <SelectTrigger className=\"w-[130px] h-7 text-xs bg-slate-800/80 border-purple-500/30 text-slate-300 shadow-lg\">\r\n                                <SelectValue />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                                <SelectItem value=\"bars\">Bars</SelectItem>\r\n                                <SelectItem value=\"wave\">Wave</SelectItem>\r\n                                <SelectItem value=\"circular\">Circular</SelectItem>\r\n                                <SelectItem value=\"particles\">Particles</SelectItem>\r\n                                <SelectItem value=\"spectrogram\">Spectrogram</SelectItem>\r\n                                <SelectItem value=\"terrain3d\">3D Terrain</SelectItem>\r\n                                <SelectItem value=\"particles3d\">3D Particles</SelectItem>\r\n                                <SelectItem value=\"tunnel3d\">3D Tunnel</SelectItem>\r\n                                <SelectItem value=\"sphere3d\">3D Sphere</SelectItem>\r\n                            </SelectContent>\r\n                        </Select>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </Card>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\media-player\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\Orb.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'frag' and 'vert'. Either include them or remove the dependency array.","line":278,"column":8,"nodeType":"ArrayExpression","endLine":278,"endColumn":61,"suggestions":[{"desc":"Update the dependencies array to be: [hue, hoverIntensity, rotateOnHover, forceHoverState, vert, frag]","fix":{"range":[9246,9299],"text":"[hue, hoverIntensity, rotateOnHover, forceHoverState, vert, frag]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useRef } from 'react';\r\nimport { Renderer, Program, Mesh, Triangle, Vec3 } from 'ogl';\r\n\r\ninterface OrbProps {\r\n    hue?: number;\r\n    hoverIntensity?: number;\r\n    rotateOnHover?: boolean;\r\n    forceHoverState?: boolean;\r\n}\r\n\r\nexport default function Orb({\r\n    hue = 0,\r\n    hoverIntensity = 0.2,\r\n    rotateOnHover = true,\r\n    forceHoverState = false\r\n}: OrbProps) {\r\n    const ctnDom = useRef<HTMLDivElement>(null);\r\n\r\n    const vert = /* glsl */ `\r\n    precision highp float;\r\n    attribute vec2 position;\r\n    attribute vec2 uv;\r\n    varying vec2 vUv;\r\n    void main() {\r\n      vUv = uv;\r\n      gl_Position = vec4(position, 0.0, 1.0);\r\n    }\r\n  `;\r\n\r\n    const frag = /* glsl */ `\r\n    precision highp float;\r\n\r\n    uniform float iTime;\r\n    uniform vec3 iResolution;\r\n    uniform float hue;\r\n    uniform float hover;\r\n    uniform float rot;\r\n    uniform float hoverIntensity;\r\n    varying vec2 vUv;\r\n\r\n    vec3 rgb2yiq(vec3 c) {\r\n      float y = dot(c, vec3(0.299, 0.587, 0.114));\r\n      float i = dot(c, vec3(0.596, -0.274, -0.322));\r\n      float q = dot(c, vec3(0.211, -0.523, 0.312));\r\n      return vec3(y, i, q);\r\n    }\r\n    \r\n    vec3 yiq2rgb(vec3 c) {\r\n      float r = c.x + 0.956 * c.y + 0.621 * c.z;\r\n      float g = c.x - 0.272 * c.y - 0.647 * c.z;\r\n      float b = c.x - 1.106 * c.y + 1.703 * c.z;\r\n      return vec3(r, g, b);\r\n    }\r\n    \r\n    vec3 adjustHue(vec3 color, float hueDeg) {\r\n      float hueRad = hueDeg * 3.14159265 / 180.0;\r\n      vec3 yiq = rgb2yiq(color);\r\n      float cosA = cos(hueRad);\r\n      float sinA = sin(hueRad);\r\n      float i = yiq.y * cosA - yiq.z * sinA;\r\n      float q = yiq.y * sinA + yiq.z * cosA;\r\n      yiq.y = i;\r\n      yiq.z = q;\r\n      return yiq2rgb(yiq);\r\n    }\r\n    \r\n    vec3 hash33(vec3 p3) {\r\n      p3 = fract(p3 * vec3(0.1031, 0.11369, 0.13787));\r\n      p3 += dot(p3, p3.yxz + 19.19);\r\n      return -1.0 + 2.0 * fract(vec3(\r\n        p3.x + p3.y,\r\n        p3.x + p3.z,\r\n        p3.y + p3.z\r\n      ) * p3.zyx);\r\n    }\r\n    \r\n    float snoise3(vec3 p) {\r\n      const float K1 = 0.333333333;\r\n      const float K2 = 0.166666667;\r\n      vec3 i = floor(p + (p.x + p.y + p.z) * K1);\r\n      vec3 d0 = p - (i - (i.x + i.y + i.z) * K2);\r\n      vec3 e = step(vec3(0.0), d0 - d0.yzx);\r\n      vec3 i1 = e * (1.0 - e.zxy);\r\n      vec3 i2 = 1.0 - e.zxy * (1.0 - e);\r\n      vec3 d1 = d0 - (i1 - K2);\r\n      vec3 d2 = d0 - (i2 - K1);\r\n      vec3 d3 = d0 - 0.5;\r\n      vec4 h = max(0.6 - vec4(\r\n        dot(d0, d0),\r\n        dot(d1, d1),\r\n        dot(d2, d2),\r\n        dot(d3, d3)\r\n      ), 0.0);\r\n      vec4 n = h * h * h * h * vec4(\r\n        dot(d0, hash33(i)),\r\n        dot(d1, hash33(i + i1)),\r\n        dot(d2, hash33(i + i2)),\r\n        dot(d3, hash33(i + 1.0))\r\n      );\r\n      return dot(vec4(31.316), n);\r\n    }\r\n    \r\n    vec4 extractAlpha(vec3 colorIn) {\r\n      float a = max(max(colorIn.r, colorIn.g), colorIn.b);\r\n      return vec4(colorIn.rgb / (a + 1e-5), a);\r\n    }\r\n    \r\n    const vec3 baseColor1 = vec3(0.611765, 0.262745, 0.996078);\r\n    const vec3 baseColor2 = vec3(0.298039, 0.760784, 0.913725);\r\n    const vec3 baseColor3 = vec3(0.062745, 0.078431, 0.600000);\r\n    const float innerRadius = 0.6;\r\n    const float noiseScale = 0.65;\r\n    \r\n    float light1(float intensity, float attenuation, float dist) {\r\n      return intensity / (1.0 + dist * attenuation);\r\n    }\r\n    \r\n    float light2(float intensity, float attenuation, float dist) {\r\n      return intensity / (1.0 + dist * dist * attenuation);\r\n    }\r\n    \r\n    vec4 draw(vec2 uv) {\r\n      vec3 color1 = adjustHue(baseColor1, hue);\r\n      vec3 color2 = adjustHue(baseColor2, hue);\r\n      vec3 color3 = adjustHue(baseColor3, hue);\r\n      \r\n      float ang = atan(uv.y, uv.x);\r\n      float len = length(uv);\r\n      float invLen = len > 0.0 ? 1.0 / len : 0.0;\r\n      \r\n      float n0 = snoise3(vec3(uv * noiseScale, iTime * 0.5)) * 0.5 + 0.5;\r\n      float r0 = mix(mix(innerRadius, 1.0, 0.4), mix(innerRadius, 1.0, 0.6), n0);\r\n      float d0 = distance(uv, (r0 * invLen) * uv);\r\n      float v0 = light1(1.0, 10.0, d0);\r\n      v0 *= smoothstep(r0 * 1.05, r0, len);\r\n      float cl = cos(ang + iTime * 2.0) * 0.5 + 0.5;\r\n      \r\n      float a = iTime * -1.0;\r\n      vec2 pos = vec2(cos(a), sin(a)) * r0;\r\n      float d = distance(uv, pos);\r\n      float v1 = light2(1.5, 5.0, d);\r\n      v1 *= light1(1.0, 50.0, d0);\r\n      \r\n      float v2 = smoothstep(1.0, mix(innerRadius, 1.0, n0 * 0.5), len);\r\n      float v3 = smoothstep(innerRadius, mix(innerRadius, 1.0, 0.5), len);\r\n      \r\n      vec3 col = mix(color1, color2, cl);\r\n      col = mix(color3, col, v0);\r\n      col = (col + v1) * v2 * v3;\r\n      col = clamp(col, 0.0, 1.0);\r\n      \r\n      return extractAlpha(col);\r\n    }\r\n    \r\n    vec4 mainImage(vec2 fragCoord) {\r\n      vec2 center = iResolution.xy * 0.5;\r\n      float size = min(iResolution.x, iResolution.y);\r\n      vec2 uv = (fragCoord - center) / size * 2.0;\r\n      \r\n      float angle = rot;\r\n      float s = sin(angle);\r\n      float c = cos(angle);\r\n      uv = vec2(c * uv.x - s * uv.y, s * uv.x + c * uv.y);\r\n      \r\n      uv.x += hover * hoverIntensity * 0.1 * sin(uv.y * 10.0 + iTime);\r\n      uv.y += hover * hoverIntensity * 0.1 * sin(uv.x * 10.0 + iTime);\r\n      \r\n      return draw(uv);\r\n    }\r\n    \r\n    void main() {\r\n      vec2 fragCoord = vUv * iResolution.xy;\r\n      vec4 col = mainImage(fragCoord);\r\n      gl_FragColor = vec4(col.rgb * col.a, col.a);\r\n    }\r\n  `;\r\n\r\n    useEffect(() => {\r\n        const container = ctnDom.current;\r\n        if (!container) return;\r\n\r\n        const renderer = new Renderer({ alpha: true, premultipliedAlpha: false });\r\n        const gl = renderer.gl;\r\n        gl.clearColor(0, 0, 0, 0);\r\n        container.appendChild(gl.canvas);\r\n\r\n        const geometry = new Triangle(gl);\r\n        const program = new Program(gl, {\r\n            vertex: vert,\r\n            fragment: frag,\r\n            uniforms: {\r\n                iTime: { value: 0 },\r\n                iResolution: {\r\n                    value: new Vec3(gl.canvas.width, gl.canvas.height, gl.canvas.width / gl.canvas.height)\r\n                },\r\n                hue: { value: hue },\r\n                hover: { value: 0 },\r\n                rot: { value: 0 },\r\n                hoverIntensity: { value: hoverIntensity }\r\n            }\r\n        });\r\n\r\n        const mesh = new Mesh(gl, { geometry, program });\r\n\r\n        function resize() {\r\n            if (!container) return;\r\n            const dpr = window.devicePixelRatio || 1;\r\n            const width = container.clientWidth;\r\n            const height = container.clientHeight;\r\n            renderer.setSize(width * dpr, height * dpr);\r\n            gl.canvas.style.width = width + 'px';\r\n            gl.canvas.style.height = height + 'px';\r\n            program.uniforms.iResolution.value.set(gl.canvas.width, gl.canvas.height, gl.canvas.width / gl.canvas.height);\r\n        }\r\n        window.addEventListener('resize', resize);\r\n        resize();\r\n\r\n        let targetHover = 0;\r\n        let lastTime = 0;\r\n        let currentRot = 0;\r\n        const rotationSpeed = 0.3;\r\n\r\n        const handleMouseMove = (e: MouseEvent) => {\r\n            const rect = container.getBoundingClientRect();\r\n            const x = e.clientX - rect.left;\r\n            const y = e.clientY - rect.top;\r\n            const width = rect.width;\r\n            const height = rect.height;\r\n            const size = Math.min(width, height);\r\n            const centerX = width / 2;\r\n            const centerY = height / 2;\r\n            const uvX = ((x - centerX) / size) * 2.0;\r\n            const uvY = ((y - centerY) / size) * 2.0;\r\n\r\n            if (Math.sqrt(uvX * uvX + uvY * uvY) < 0.8) {\r\n                targetHover = 1;\r\n            } else {\r\n                targetHover = 0;\r\n            }\r\n        };\r\n\r\n        const handleMouseLeave = () => {\r\n            targetHover = 0;\r\n        };\r\n\r\n        container.addEventListener('mousemove', handleMouseMove);\r\n        container.addEventListener('mouseleave', handleMouseLeave);\r\n\r\n        let rafId: number;\r\n        const update = (t: number) => {\r\n            rafId = requestAnimationFrame(update);\r\n            const dt = (t - lastTime) * 0.001;\r\n            lastTime = t;\r\n            program.uniforms.iTime.value = t * 0.001;\r\n            program.uniforms.hue.value = hue;\r\n            program.uniforms.hoverIntensity.value = hoverIntensity;\r\n\r\n            const effectiveHover = forceHoverState ? 1 : targetHover;\r\n            program.uniforms.hover.value += (effectiveHover - program.uniforms.hover.value) * 0.1;\r\n\r\n            if (rotateOnHover && effectiveHover > 0.5) {\r\n                currentRot += dt * rotationSpeed;\r\n            }\r\n            program.uniforms.rot.value = currentRot;\r\n\r\n            renderer.render({ scene: mesh });\r\n        };\r\n        rafId = requestAnimationFrame(update);\r\n\r\n        return () => {\r\n            cancelAnimationFrame(rafId);\r\n            window.removeEventListener('resize', resize);\r\n            container.removeEventListener('mousemove', handleMouseMove);\r\n            container.removeEventListener('mouseleave', handleMouseLeave);\r\n            container.removeChild(gl.canvas);\r\n            gl.getExtension('WEBGL_lose_context')?.loseContext();\r\n        };\r\n    }, [hue, hoverIntensity, rotateOnHover, forceHoverState]);\r\n\r\n    return <div ref={ctnDom} className=\"w-full h-full\" />;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\SimpleModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\accordion.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\alert-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\alert.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\aspect-ratio.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\badge.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":36,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":36,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\r\n        secondary:\r\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        destructive:\r\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\r\n        outline: \"text-foreground\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface BadgeProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return (\r\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\r\n  )\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\breadcrumb.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\button.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":58,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":58,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90 hover:scale-105\",\r\n        destructive:\r\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\r\n        outline:\r\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n        premium: \"bg-gradient-to-r from-purple-600 via-blue-600 to-purple-600 bg-[length:200%_100%] text-white font-bold shadow-lg shadow-purple-500/50 hover:shadow-purple-500/70 hover:bg-[position:100%_0] hover:scale-105 transition-all duration-500\",\r\n        spectrum: \"bg-gradient-to-r from-cyan-500 via-purple-500 to-pink-500 bg-[length:200%_100%] text-white font-bold shadow-xl shadow-purple-500/60 hover:shadow-cyan-500/80 hover:bg-[position:100%_0] hover:scale-110 animate-pulse-slow border-2 border-purple-400\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-4 py-2\",\r\n        sm: \"h-9 rounded-md px-3\",\r\n        lg: \"h-11 rounded-md px-8\",\r\n        icon: \"h-10 w-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\"\r\n    return (\r\n      <Comp\r\n        className={cn(buttonVariants({ variant, size, className }))}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nButton.displayName = \"Button\"\r\n\r\nexport { Button, buttonVariants }\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\calendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\carousel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\chart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\collapsible.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\command.tsx","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":24,"column":11,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":24,"endColumn":29,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[724,775],"text":"type CommandDialogProps = DialogProps"},"desc":"Replace empty interface with a type alias."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\r\nimport { Command as CommandPrimitive } from \"cmdk\"\r\nimport { Search } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\r\n\r\nconst Command = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCommand.displayName = CommandPrimitive.displayName\r\n\r\ninterface CommandDialogProps extends DialogProps {}\r\n\r\nconst CommandDialog = ({ children, ...props }: CommandDialogProps) => {\r\n  return (\r\n    <Dialog {...props}>\r\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\r\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\r\n          {children}\r\n        </Command>\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n\r\nconst CommandInput = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Input>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\r\n>(({ className, ...props }, ref) => (\r\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\r\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\r\n    <CommandPrimitive.Input\r\n      ref={ref}\r\n      className={cn(\r\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </div>\r\n))\r\n\r\nCommandInput.displayName = CommandPrimitive.Input.displayName\r\n\r\nconst CommandList = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.List\r\n    ref={ref}\r\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\r\n    {...props}\r\n  />\r\n))\r\n\r\nCommandList.displayName = CommandPrimitive.List.displayName\r\n\r\nconst CommandEmpty = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Empty>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\r\n>((props, ref) => (\r\n  <CommandPrimitive.Empty\r\n    ref={ref}\r\n    className=\"py-6 text-center text-sm\"\r\n    {...props}\r\n  />\r\n))\r\n\r\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\r\n\r\nconst CommandGroup = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Group>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.Group\r\n    ref={ref}\r\n    className={cn(\r\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\n\r\nCommandGroup.displayName = CommandPrimitive.Group.displayName\r\n\r\nconst CommandSeparator = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 h-px bg-border\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\r\n\r\nconst CommandItem = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\n\r\nCommandItem.displayName = CommandPrimitive.Item.displayName\r\n\r\nconst CommandShortcut = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLSpanElement>) => {\r\n  return (\r\n    <span\r\n      className={cn(\r\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\nCommandShortcut.displayName = \"CommandShortcut\"\r\n\r\nexport {\r\n  Command,\r\n  CommandDialog,\r\n  CommandInput,\r\n  CommandList,\r\n  CommandEmpty,\r\n  CommandGroup,\r\n  CommandItem,\r\n  CommandShortcut,\r\n  CommandSeparator,\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\context-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\drawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\form.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":168,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":168,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport {\r\n  Controller,\r\n  ControllerProps,\r\n  FieldPath,\r\n  FieldValues,\r\n  FormProvider,\r\n  useFormContext,\r\n} from \"react-hook-form\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport { Label } from \"@/components/ui/label\"\r\n\r\nconst Form = FormProvider\r\n\r\ntype FormFieldContextValue<\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\r\n> = {\r\n  name: TName\r\n}\r\n\r\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\r\n  {} as FormFieldContextValue\r\n)\r\n\r\nconst FormField = <\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\r\n>({\r\n  ...props\r\n}: ControllerProps<TFieldValues, TName>) => {\r\n  return (\r\n    <FormFieldContext.Provider value={{ name: props.name }}>\r\n      <Controller {...props} />\r\n    </FormFieldContext.Provider>\r\n  )\r\n}\r\n\r\nconst useFormField = () => {\r\n  const fieldContext = React.useContext(FormFieldContext)\r\n  const itemContext = React.useContext(FormItemContext)\r\n  const { getFieldState, formState } = useFormContext()\r\n\r\n  const fieldState = getFieldState(fieldContext.name, formState)\r\n\r\n  if (!fieldContext) {\r\n    throw new Error(\"useFormField should be used within <FormField>\")\r\n  }\r\n\r\n  const { id } = itemContext\r\n\r\n  return {\r\n    id,\r\n    name: fieldContext.name,\r\n    formItemId: `${id}-form-item`,\r\n    formDescriptionId: `${id}-form-item-description`,\r\n    formMessageId: `${id}-form-item-message`,\r\n    ...fieldState,\r\n  }\r\n}\r\n\r\ntype FormItemContextValue = {\r\n  id: string\r\n}\r\n\r\nconst FormItemContext = React.createContext<FormItemContextValue>(\r\n  {} as FormItemContextValue\r\n)\r\n\r\nconst FormItem = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => {\r\n  const id = React.useId()\r\n\r\n  return (\r\n    <FormItemContext.Provider value={{ id }}>\r\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\r\n    </FormItemContext.Provider>\r\n  )\r\n})\r\nFormItem.displayName = \"FormItem\"\r\n\r\nconst FormLabel = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\r\n>(({ className, ...props }, ref) => {\r\n  const { error, formItemId } = useFormField()\r\n\r\n  return (\r\n    <Label\r\n      ref={ref}\r\n      className={cn(error && \"text-destructive\", className)}\r\n      htmlFor={formItemId}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormLabel.displayName = \"FormLabel\"\r\n\r\nconst FormControl = React.forwardRef<\r\n  React.ElementRef<typeof Slot>,\r\n  React.ComponentPropsWithoutRef<typeof Slot>\r\n>(({ ...props }, ref) => {\r\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\r\n\r\n  return (\r\n    <Slot\r\n      ref={ref}\r\n      id={formItemId}\r\n      aria-describedby={\r\n        !error\r\n          ? `${formDescriptionId}`\r\n          : `${formDescriptionId} ${formMessageId}`\r\n      }\r\n      aria-invalid={!!error}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormControl.displayName = \"FormControl\"\r\n\r\nconst FormDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => {\r\n  const { formDescriptionId } = useFormField()\r\n\r\n  return (\r\n    <p\r\n      ref={ref}\r\n      id={formDescriptionId}\r\n      className={cn(\"text-sm text-muted-foreground\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormDescription.displayName = \"FormDescription\"\r\n\r\nconst FormMessage = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, children, ...props }, ref) => {\r\n  const { error, formMessageId } = useFormField()\r\n  const body = error ? String(error?.message) : children\r\n\r\n  if (!body) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <p\r\n      ref={ref}\r\n      id={formMessageId}\r\n      className={cn(\"text-sm font-medium text-destructive\", className)}\r\n      {...props}\r\n    >\r\n      {body}\r\n    </p>\r\n  )\r\n})\r\nFormMessage.displayName = \"FormMessage\"\r\n\r\nexport {\r\n  useFormField,\r\n  Form,\r\n  FormItem,\r\n  FormLabel,\r\n  FormControl,\r\n  FormDescription,\r\n  FormMessage,\r\n  FormField,\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\hover-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\input-otp.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\menubar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\navigation-menu.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":119,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":119,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\r\nimport { cva } from \"class-variance-authority\"\r\nimport { ChevronDown } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst NavigationMenu = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\r\n>(({ className, children, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <NavigationMenuViewport />\r\n  </NavigationMenuPrimitive.Root>\r\n))\r\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\r\n\r\nconst NavigationMenuList = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.List\r\n    ref={ref}\r\n    className={cn(\r\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\r\n\r\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\r\n\r\nconst navigationMenuTriggerStyle = cva(\r\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50\"\r\n)\r\n\r\nconst NavigationMenuTrigger = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\r\n    {...props}\r\n  >\r\n    {children}{\" \"}\r\n    <ChevronDown\r\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\r\n      aria-hidden=\"true\"\r\n    />\r\n  </NavigationMenuPrimitive.Trigger>\r\n))\r\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\r\n\r\nconst NavigationMenuContent = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.Content\r\n    ref={ref}\r\n    className={cn(\r\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\r\n\r\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\r\n\r\nconst NavigationMenuViewport = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\r\n>(({ className, ...props }, ref) => (\r\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\r\n    <NavigationMenuPrimitive.Viewport\r\n      className={cn(\r\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\r\n        className\r\n      )}\r\n      ref={ref}\r\n      {...props}\r\n    />\r\n  </div>\r\n))\r\nNavigationMenuViewport.displayName =\r\n  NavigationMenuPrimitive.Viewport.displayName\r\n\r\nconst NavigationMenuIndicator = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\r\n>(({ className, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.Indicator\r\n    ref={ref}\r\n    className={cn(\r\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\r\n  </NavigationMenuPrimitive.Indicator>\r\n))\r\nNavigationMenuIndicator.displayName =\r\n  NavigationMenuPrimitive.Indicator.displayName\r\n\r\nexport {\r\n  navigationMenuTriggerStyle,\r\n  NavigationMenu,\r\n  NavigationMenuList,\r\n  NavigationMenuItem,\r\n  NavigationMenuContent,\r\n  NavigationMenuTrigger,\r\n  NavigationMenuLink,\r\n  NavigationMenuIndicator,\r\n  NavigationMenuViewport,\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\pagination.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\radio-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\resizable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\shader-animation.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[295,298],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[295,298],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useRef } from \"react\"\r\nimport * as THREE from \"three\"\r\n\r\nexport function ShaderAnimation() {\r\n  const containerRef = useRef<HTMLDivElement>(null)\r\n  const sceneRef = useRef<{\r\n    camera: THREE.Camera\r\n    scene: THREE.Scene\r\n    renderer: THREE.WebGLRenderer\r\n    uniforms: any\r\n    animationId: number\r\n  } | null>(null)\r\n\r\n  useEffect(() => {\r\n    if (!containerRef.current) return\r\n\r\n    const container = containerRef.current\r\n\r\n    // Vertex shader\r\n    const vertexShader = `\r\n      void main() {\r\n        gl_Position = vec4( position, 1.0 );\r\n      }\r\n    `\r\n\r\n    // Fragment shader with cyan/blue/purple colors matching the app theme\r\n    const fragmentShader = `\r\n      #define TWO_PI 6.2831853072\r\n      #define PI 3.14159265359\r\n\r\n      precision highp float;\r\n      uniform vec2 resolution;\r\n      uniform float time;\r\n\r\n      void main(void) {\r\n        vec2 uv = (gl_FragCoord.xy * 2.0 - resolution.xy) / min(resolution.x, resolution.y);\r\n        float t = time*0.05;\r\n        float lineWidth = 0.002;\r\n\r\n        vec3 color = vec3(0.0);\r\n        for(int j = 0; j < 3; j++){\r\n          for(int i=0; i < 5; i++){\r\n            color[j] += lineWidth*float(i*i) / abs(fract(t - 0.01*float(j)+float(i)*0.01)*5.0 - length(uv) + mod(uv.x+uv.y, 0.2));\r\n          }\r\n        }\r\n        \r\n        // Apply cyan/blue/purple color scheme (matching Level app theme)\r\n        // Cyan: rgb(34, 211, 238) -> normalized\r\n        // Blue: rgb(59, 130, 246) -> normalized\r\n        // Purple: rgb(147, 51, 234) -> normalized\r\n        vec3 cyan = vec3(0.13, 0.83, 0.93);\r\n        vec3 blue = vec3(0.23, 0.51, 0.96);\r\n        vec3 purple = vec3(0.58, 0.20, 0.92);\r\n        \r\n        vec3 finalColor = color.r * cyan + color.g * blue + color.b * purple;\r\n        \r\n        gl_FragColor = vec4(finalColor, 1.0);\r\n      }\r\n    `\r\n\r\n    // Initialize Three.js scene\r\n    const camera = new THREE.Camera()\r\n    camera.position.z = 1\r\n\r\n    const scene = new THREE.Scene()\r\n    const geometry = new THREE.PlaneGeometry(2, 2)\r\n\r\n    const uniforms = {\r\n      time: { type: \"f\", value: 1.0 },\r\n      resolution: { type: \"v2\", value: new THREE.Vector2() },\r\n    }\r\n\r\n    const material = new THREE.ShaderMaterial({\r\n      uniforms: uniforms,\r\n      vertexShader: vertexShader,\r\n      fragmentShader: fragmentShader,\r\n    })\r\n\r\n    const mesh = new THREE.Mesh(geometry, material)\r\n    scene.add(mesh)\r\n\r\n    const renderer = new THREE.WebGLRenderer({ antialias: true })\r\n    renderer.setPixelRatio(window.devicePixelRatio)\r\n\r\n    container.appendChild(renderer.domElement)\r\n\r\n    // Handle window resize\r\n    const onWindowResize = () => {\r\n      const width = container.clientWidth\r\n      const height = container.clientHeight\r\n      renderer.setSize(width, height)\r\n      uniforms.resolution.value.x = renderer.domElement.width\r\n      uniforms.resolution.value.y = renderer.domElement.height\r\n    }\r\n\r\n    // Initial resize\r\n    onWindowResize()\r\n    window.addEventListener(\"resize\", onWindowResize, false)\r\n\r\n    // Animation loop\r\n    const animate = () => {\r\n      const animationId = requestAnimationFrame(animate)\r\n      uniforms.time.value += 0.05\r\n      renderer.render(scene, camera)\r\n\r\n      if (sceneRef.current) {\r\n        sceneRef.current.animationId = animationId\r\n      }\r\n    }\r\n\r\n    // Store scene references for cleanup\r\n    sceneRef.current = {\r\n      camera,\r\n      scene,\r\n      renderer,\r\n      uniforms,\r\n      animationId: 0,\r\n    }\r\n\r\n    // Start animation\r\n    animate()\r\n\r\n    // Cleanup function\r\n    return () => {\r\n      window.removeEventListener(\"resize\", onWindowResize)\r\n\r\n      if (sceneRef.current) {\r\n        cancelAnimationFrame(sceneRef.current.animationId)\r\n\r\n        if (container && sceneRef.current.renderer.domElement) {\r\n          container.removeChild(sceneRef.current.renderer.domElement)\r\n        }\r\n\r\n        sceneRef.current.renderer.dispose()\r\n        geometry.dispose()\r\n        material.dispose()\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <div\r\n      ref={containerRef}\r\n      className=\"w-full h-screen\"\r\n      style={{\r\n        background: \"#000\",\r\n        overflow: \"hidden\",\r\n      }}\r\n    />\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\sidebar.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":760,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":760,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { VariantProps, cva } from \"class-variance-authority\"\r\nimport { PanelLeft } from \"lucide-react\"\r\n\r\nimport { useIsMobile } from \"@/hooks/use-mobile\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Separator } from \"@/components/ui/separator\"\r\nimport { Sheet, SheetContent } from \"@/components/ui/sheet\"\r\nimport { Skeleton } from \"@/components/ui/skeleton\"\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\"\r\n\r\nconst SIDEBAR_COOKIE_NAME = \"sidebar:state\"\r\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\r\nconst SIDEBAR_WIDTH = \"16rem\"\r\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\r\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\r\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\r\n\r\ntype SidebarContext = {\r\n  state: \"expanded\" | \"collapsed\"\r\n  open: boolean\r\n  setOpen: (open: boolean) => void\r\n  openMobile: boolean\r\n  setOpenMobile: (open: boolean) => void\r\n  isMobile: boolean\r\n  toggleSidebar: () => void\r\n}\r\n\r\nconst SidebarContext = React.createContext<SidebarContext | null>(null)\r\n\r\nfunction useSidebar() {\r\n  const context = React.useContext(SidebarContext)\r\n  if (!context) {\r\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\r\n  }\r\n\r\n  return context\r\n}\r\n\r\nconst SidebarProvider = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\"> & {\r\n    defaultOpen?: boolean\r\n    open?: boolean\r\n    onOpenChange?: (open: boolean) => void\r\n  }\r\n>(\r\n  (\r\n    {\r\n      defaultOpen = true,\r\n      open: openProp,\r\n      onOpenChange: setOpenProp,\r\n      className,\r\n      style,\r\n      children,\r\n      ...props\r\n    },\r\n    ref\r\n  ) => {\r\n    const isMobile = useIsMobile()\r\n    const [openMobile, setOpenMobile] = React.useState(false)\r\n\r\n    // This is the internal state of the sidebar.\r\n    // We use openProp and setOpenProp for control from outside the component.\r\n    const [_open, _setOpen] = React.useState(defaultOpen)\r\n    const open = openProp ?? _open\r\n    const setOpen = React.useCallback(\r\n      (value: boolean | ((value: boolean) => boolean)) => {\r\n        const openState = typeof value === \"function\" ? value(open) : value\r\n        if (setOpenProp) {\r\n          setOpenProp(openState)\r\n        } else {\r\n          _setOpen(openState)\r\n        }\r\n\r\n        // This sets the cookie to keep the sidebar state.\r\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\r\n      },\r\n      [setOpenProp, open]\r\n    )\r\n\r\n    // Helper to toggle the sidebar.\r\n    const toggleSidebar = React.useCallback(() => {\r\n      return isMobile\r\n        ? setOpenMobile((open) => !open)\r\n        : setOpen((open) => !open)\r\n    }, [isMobile, setOpen, setOpenMobile])\r\n\r\n    // Adds a keyboard shortcut to toggle the sidebar.\r\n    React.useEffect(() => {\r\n      const handleKeyDown = (event: KeyboardEvent) => {\r\n        if (\r\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\r\n          (event.metaKey || event.ctrlKey)\r\n        ) {\r\n          event.preventDefault()\r\n          toggleSidebar()\r\n        }\r\n      }\r\n\r\n      window.addEventListener(\"keydown\", handleKeyDown)\r\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\r\n    }, [toggleSidebar])\r\n\r\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\r\n    // This makes it easier to style the sidebar with Tailwind classes.\r\n    const state = open ? \"expanded\" : \"collapsed\"\r\n\r\n    const contextValue = React.useMemo<SidebarContext>(\r\n      () => ({\r\n        state,\r\n        open,\r\n        setOpen,\r\n        isMobile,\r\n        openMobile,\r\n        setOpenMobile,\r\n        toggleSidebar,\r\n      }),\r\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\r\n    )\r\n\r\n    return (\r\n      <SidebarContext.Provider value={contextValue}>\r\n        <TooltipProvider delayDuration={0}>\r\n          <div\r\n            style={\r\n              {\r\n                \"--sidebar-width\": SIDEBAR_WIDTH,\r\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\r\n                ...style,\r\n              } as React.CSSProperties\r\n            }\r\n            className={cn(\r\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\r\n              className\r\n            )}\r\n            ref={ref}\r\n            {...props}\r\n          >\r\n            {children}\r\n          </div>\r\n        </TooltipProvider>\r\n      </SidebarContext.Provider>\r\n    )\r\n  }\r\n)\r\nSidebarProvider.displayName = \"SidebarProvider\"\r\n\r\nconst Sidebar = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\"> & {\r\n    side?: \"left\" | \"right\"\r\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\r\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\r\n  }\r\n>(\r\n  (\r\n    {\r\n      side = \"left\",\r\n      variant = \"sidebar\",\r\n      collapsible = \"offcanvas\",\r\n      className,\r\n      children,\r\n      ...props\r\n    },\r\n    ref\r\n  ) => {\r\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\r\n\r\n    if (collapsible === \"none\") {\r\n      return (\r\n        <div\r\n          className={cn(\r\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\r\n            className\r\n          )}\r\n          ref={ref}\r\n          {...props}\r\n        >\r\n          {children}\r\n        </div>\r\n      )\r\n    }\r\n\r\n    if (isMobile) {\r\n      return (\r\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\r\n          <SheetContent\r\n            data-sidebar=\"sidebar\"\r\n            data-mobile=\"true\"\r\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\r\n            style={\r\n              {\r\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\r\n              } as React.CSSProperties\r\n            }\r\n            side={side}\r\n          >\r\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\r\n          </SheetContent>\r\n        </Sheet>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <div\r\n        ref={ref}\r\n        className=\"group peer hidden md:block text-sidebar-foreground\"\r\n        data-state={state}\r\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\r\n        data-variant={variant}\r\n        data-side={side}\r\n      >\r\n        {/* This is what handles the sidebar gap on desktop */}\r\n        <div\r\n          className={cn(\r\n            \"duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear\",\r\n            \"group-data-[collapsible=offcanvas]:w-0\",\r\n            \"group-data-[side=right]:rotate-180\",\r\n            variant === \"floating\" || variant === \"inset\"\r\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\r\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\r\n          )}\r\n        />\r\n        <div\r\n          className={cn(\r\n            \"duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex\",\r\n            side === \"left\"\r\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\r\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\r\n            // Adjust the padding for floating and inset variants.\r\n            variant === \"floating\" || variant === \"inset\"\r\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\r\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\r\n            className\r\n          )}\r\n          {...props}\r\n        >\r\n          <div\r\n            data-sidebar=\"sidebar\"\r\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\r\n          >\r\n            {children}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n)\r\nSidebar.displayName = \"Sidebar\"\r\n\r\nconst SidebarTrigger = React.forwardRef<\r\n  React.ElementRef<typeof Button>,\r\n  React.ComponentProps<typeof Button>\r\n>(({ className, onClick, ...props }, ref) => {\r\n  const { toggleSidebar } = useSidebar()\r\n\r\n  return (\r\n    <Button\r\n      ref={ref}\r\n      data-sidebar=\"trigger\"\r\n      variant=\"ghost\"\r\n      size=\"icon\"\r\n      className={cn(\"h-7 w-7\", className)}\r\n      onClick={(event) => {\r\n        onClick?.(event)\r\n        toggleSidebar()\r\n      }}\r\n      {...props}\r\n    >\r\n      <PanelLeft />\r\n      <span className=\"sr-only\">Toggle Sidebar</span>\r\n    </Button>\r\n  )\r\n})\r\nSidebarTrigger.displayName = \"SidebarTrigger\"\r\n\r\nconst SidebarRail = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ComponentProps<\"button\">\r\n>(({ className, ...props }, ref) => {\r\n  const { toggleSidebar } = useSidebar()\r\n\r\n  return (\r\n    <button\r\n      ref={ref}\r\n      data-sidebar=\"rail\"\r\n      aria-label=\"Toggle Sidebar\"\r\n      tabIndex={-1}\r\n      onClick={toggleSidebar}\r\n      title=\"Toggle Sidebar\"\r\n      className={cn(\r\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\r\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\r\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\r\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\r\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\r\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarRail.displayName = \"SidebarRail\"\r\n\r\nconst SidebarInset = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"main\">\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <main\r\n      ref={ref}\r\n      className={cn(\r\n        \"relative flex min-h-svh flex-1 flex-col bg-background\",\r\n        \"peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarInset.displayName = \"SidebarInset\"\r\n\r\nconst SidebarInput = React.forwardRef<\r\n  React.ElementRef<typeof Input>,\r\n  React.ComponentProps<typeof Input>\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <Input\r\n      ref={ref}\r\n      data-sidebar=\"input\"\r\n      className={cn(\r\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarInput.displayName = \"SidebarInput\"\r\n\r\nconst SidebarHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\">\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      data-sidebar=\"header\"\r\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarHeader.displayName = \"SidebarHeader\"\r\n\r\nconst SidebarFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\">\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      data-sidebar=\"footer\"\r\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarFooter.displayName = \"SidebarFooter\"\r\n\r\nconst SidebarSeparator = React.forwardRef<\r\n  React.ElementRef<typeof Separator>,\r\n  React.ComponentProps<typeof Separator>\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <Separator\r\n      ref={ref}\r\n      data-sidebar=\"separator\"\r\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarSeparator.displayName = \"SidebarSeparator\"\r\n\r\nconst SidebarContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\">\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      data-sidebar=\"content\"\r\n      className={cn(\r\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarContent.displayName = \"SidebarContent\"\r\n\r\nconst SidebarGroup = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\">\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      data-sidebar=\"group\"\r\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarGroup.displayName = \"SidebarGroup\"\r\n\r\nconst SidebarGroupLabel = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\r\n>(({ className, asChild = false, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"div\"\r\n\r\n  return (\r\n    <Comp\r\n      ref={ref}\r\n      data-sidebar=\"group-label\"\r\n      className={cn(\r\n        \"duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\r\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\r\n\r\nconst SidebarGroupAction = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\r\n>(({ className, asChild = false, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"button\"\r\n\r\n  return (\r\n    <Comp\r\n      ref={ref}\r\n      data-sidebar=\"group-action\"\r\n      className={cn(\r\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\r\n        // Increases the hit area of the button on mobile.\r\n        \"after:absolute after:-inset-2 after:md:hidden\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\r\n\r\nconst SidebarGroupContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\">\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    data-sidebar=\"group-content\"\r\n    className={cn(\"w-full text-sm\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\r\n\r\nconst SidebarMenu = React.forwardRef<\r\n  HTMLUListElement,\r\n  React.ComponentProps<\"ul\">\r\n>(({ className, ...props }, ref) => (\r\n  <ul\r\n    ref={ref}\r\n    data-sidebar=\"menu\"\r\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSidebarMenu.displayName = \"SidebarMenu\"\r\n\r\nconst SidebarMenuItem = React.forwardRef<\r\n  HTMLLIElement,\r\n  React.ComponentProps<\"li\">\r\n>(({ className, ...props }, ref) => (\r\n  <li\r\n    ref={ref}\r\n    data-sidebar=\"menu-item\"\r\n    className={cn(\"group/menu-item relative\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\r\n\r\nconst sidebarMenuButtonVariants = cva(\r\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\r\n        outline:\r\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\r\n      },\r\n      size: {\r\n        default: \"h-8 text-sm\",\r\n        sm: \"h-7 text-xs\",\r\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nconst SidebarMenuButton = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ComponentProps<\"button\"> & {\r\n    asChild?: boolean\r\n    isActive?: boolean\r\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\r\n  } & VariantProps<typeof sidebarMenuButtonVariants>\r\n>(\r\n  (\r\n    {\r\n      asChild = false,\r\n      isActive = false,\r\n      variant = \"default\",\r\n      size = \"default\",\r\n      tooltip,\r\n      className,\r\n      ...props\r\n    },\r\n    ref\r\n  ) => {\r\n    const Comp = asChild ? Slot : \"button\"\r\n    const { isMobile, state } = useSidebar()\r\n\r\n    const button = (\r\n      <Comp\r\n        ref={ref}\r\n        data-sidebar=\"menu-button\"\r\n        data-size={size}\r\n        data-active={isActive}\r\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\r\n        {...props}\r\n      />\r\n    )\r\n\r\n    if (!tooltip) {\r\n      return button\r\n    }\r\n\r\n    if (typeof tooltip === \"string\") {\r\n      tooltip = {\r\n        children: tooltip,\r\n      }\r\n    }\r\n\r\n    return (\r\n      <Tooltip>\r\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\r\n        <TooltipContent\r\n          side=\"right\"\r\n          align=\"center\"\r\n          hidden={state !== \"collapsed\" || isMobile}\r\n          {...tooltip}\r\n        />\r\n      </Tooltip>\r\n    )\r\n  }\r\n)\r\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\r\n\r\nconst SidebarMenuAction = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ComponentProps<\"button\"> & {\r\n    asChild?: boolean\r\n    showOnHover?: boolean\r\n  }\r\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"button\"\r\n\r\n  return (\r\n    <Comp\r\n      ref={ref}\r\n      data-sidebar=\"menu-action\"\r\n      className={cn(\r\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\r\n        // Increases the hit area of the button on mobile.\r\n        \"after:absolute after:-inset-2 after:md:hidden\",\r\n        \"peer-data-[size=sm]/menu-button:top-1\",\r\n        \"peer-data-[size=default]/menu-button:top-1.5\",\r\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        showOnHover &&\r\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\r\n\r\nconst SidebarMenuBadge = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\">\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    data-sidebar=\"menu-badge\"\r\n    className={cn(\r\n      \"absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none\",\r\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\r\n      \"peer-data-[size=sm]/menu-button:top-1\",\r\n      \"peer-data-[size=default]/menu-button:top-1.5\",\r\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\r\n      \"group-data-[collapsible=icon]:hidden\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\r\n\r\nconst SidebarMenuSkeleton = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\"> & {\r\n    showIcon?: boolean\r\n  }\r\n>(({ className, showIcon = false, ...props }, ref) => {\r\n  // Random width between 50 to 90%.\r\n  const width = React.useMemo(() => {\r\n    return `${Math.floor(Math.random() * 40) + 50}%`\r\n  }, [])\r\n\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      data-sidebar=\"menu-skeleton\"\r\n      className={cn(\"rounded-md h-8 flex gap-2 px-2 items-center\", className)}\r\n      {...props}\r\n    >\r\n      {showIcon && (\r\n        <Skeleton\r\n          className=\"size-4 rounded-md\"\r\n          data-sidebar=\"menu-skeleton-icon\"\r\n        />\r\n      )}\r\n      <Skeleton\r\n        className=\"h-4 flex-1 max-w-[--skeleton-width]\"\r\n        data-sidebar=\"menu-skeleton-text\"\r\n        style={\r\n          {\r\n            \"--skeleton-width\": width,\r\n          } as React.CSSProperties\r\n        }\r\n      />\r\n    </div>\r\n  )\r\n})\r\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\r\n\r\nconst SidebarMenuSub = React.forwardRef<\r\n  HTMLUListElement,\r\n  React.ComponentProps<\"ul\">\r\n>(({ className, ...props }, ref) => (\r\n  <ul\r\n    ref={ref}\r\n    data-sidebar=\"menu-sub\"\r\n    className={cn(\r\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\r\n      \"group-data-[collapsible=icon]:hidden\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\r\n\r\nconst SidebarMenuSubItem = React.forwardRef<\r\n  HTMLLIElement,\r\n  React.ComponentProps<\"li\">\r\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\r\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\r\n\r\nconst SidebarMenuSubButton = React.forwardRef<\r\n  HTMLAnchorElement,\r\n  React.ComponentProps<\"a\"> & {\r\n    asChild?: boolean\r\n    size?: \"sm\" | \"md\"\r\n    isActive?: boolean\r\n  }\r\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"a\"\r\n\r\n  return (\r\n    <Comp\r\n      ref={ref}\r\n      data-sidebar=\"menu-sub-button\"\r\n      data-size={size}\r\n      data-active={isActive}\r\n      className={cn(\r\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\r\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\r\n        size === \"sm\" && \"text-xs\",\r\n        size === \"md\" && \"text-sm\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\r\n\r\nexport {\r\n  Sidebar,\r\n  SidebarContent,\r\n  SidebarFooter,\r\n  SidebarGroup,\r\n  SidebarGroupAction,\r\n  SidebarGroupContent,\r\n  SidebarGroupLabel,\r\n  SidebarHeader,\r\n  SidebarInput,\r\n  SidebarInset,\r\n  SidebarMenu,\r\n  SidebarMenuAction,\r\n  SidebarMenuBadge,\r\n  SidebarMenuButton,\r\n  SidebarMenuItem,\r\n  SidebarMenuSkeleton,\r\n  SidebarMenuSub,\r\n  SidebarMenuSubButton,\r\n  SidebarMenuSubItem,\r\n  SidebarProvider,\r\n  SidebarRail,\r\n  SidebarSeparator,\r\n  SidebarTrigger,\r\n  useSidebar,\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\slider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\sonner.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":29,"column":19,"nodeType":"Identifier","messageId":"namedExport","endLine":29,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useTheme } from \"next-themes\"\r\nimport { Toaster as Sonner, toast } from \"sonner\"\r\n\r\ntype ToasterProps = React.ComponentProps<typeof Sonner>\r\n\r\nconst Toaster = ({ ...props }: ToasterProps) => {\r\n  const { theme = \"system\" } = useTheme()\r\n\r\n  return (\r\n    <Sonner\r\n      theme={theme as ToasterProps[\"theme\"]}\r\n      className=\"toaster group\"\r\n      toastOptions={{\r\n        classNames: {\r\n          toast:\r\n            \"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg\",\r\n          description: \"group-[.toast]:text-muted-foreground\",\r\n          actionButton:\r\n            \"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground\",\r\n          cancelButton:\r\n            \"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground\",\r\n        },\r\n      }}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Toaster, toast }\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\textarea.tsx","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":5,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":5,"endColumn":31,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[77,164],"text":"type TextareaProps = React.TextareaHTMLAttributes<HTMLTextAreaElement>"},"desc":"Replace empty interface with a type alias."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nexport interface TextareaProps\r\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\r\n\r\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\r\n  ({ className, ...props }, ref) => {\r\n    return (\r\n      <textarea\r\n        className={cn(\r\n          \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nTextarea.displayName = \"Textarea\"\r\n\r\nexport { Textarea }\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\toast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\toaster.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\toggle-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\toggle.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":43,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":43,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst toggleVariants = cva(\r\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-transparent\",\r\n        outline:\r\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-3\",\r\n        sm: \"h-9 px-2.5\",\r\n        lg: \"h-11 px-5\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nconst Toggle = React.forwardRef<\r\n  React.ElementRef<typeof TogglePrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\r\n    VariantProps<typeof toggleVariants>\r\n>(({ className, variant, size, ...props }, ref) => (\r\n  <TogglePrimitive.Root\r\n    ref={ref}\r\n    className={cn(toggleVariants({ variant, size, className }))}\r\n    {...props}\r\n  />\r\n))\r\n\r\nToggle.displayName = TogglePrimitive.Root.displayName\r\n\r\nexport { Toggle, toggleVariants }\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\ui\\use-toast.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\visualizer-3d\\Visualizer3D.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\visualizer-3d\\VisualizerErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\visualizer-3d\\scenes\\ParticleScene.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\visualizer-3d\\scenes\\SphereScene.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\visualizer-3d\\scenes\\TerrainScene.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\david\\sonic-refine-suite-project\\src\\components\\visualizer-3d\\scenes\\TunnelScene.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]